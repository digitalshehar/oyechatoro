{"version":3,"sources":["../../../../app/dashboard/staff/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useDbStaff } from '../../lib/db-hooks';\r\n\r\nexport default function StaffPage() {\r\n    const { users, loading, addUser, deleteUser, updateUser } = useDbStaff();\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isEditMode, setIsEditMode] = useState(false);\r\n    const [editingUserId, setEditingUserId] = useState<string | null>(null);\r\n    const [formData, setFormData] = useState({ name: '', email: '', phone: '', password: '', role: 'Staff' });\r\n\r\n    const openAddModal = () => {\r\n        setIsEditMode(false);\r\n        setEditingUserId(null);\r\n        setFormData({ name: '', email: '', phone: '', password: '', role: 'Staff' });\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const openEditModal = (user: any) => {\r\n        setIsEditMode(true);\r\n        setEditingUserId(user.id);\r\n        setFormData({\r\n            name: user.name,\r\n            email: user.email,\r\n            phone: user.phone || '', // Handle null phone\r\n            password: '', // Don't fill password, leave blank to keep unchanged\r\n            role: user.role\r\n        });\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        let result;\r\n        if (isEditMode && editingUserId) {\r\n            result = await updateUser(editingUserId, formData);\r\n        } else {\r\n            result = await addUser(formData);\r\n        }\r\n\r\n        if (result.success) {\r\n            setIsModalOpen(false);\r\n            setFormData({ name: '', email: '', phone: '', password: '', role: 'Staff' });\r\n            setIsEditMode(false);\r\n            setEditingUserId(null);\r\n        } else {\r\n            alert(result.error);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"p-8 text-center\">Loading staff...</div>;\r\n\r\n    return (\r\n        <div className=\"p-4 md:p-8 max-w-7xl mx-auto\">\r\n            <div className=\"flex justify-between items-center mb-8 animate-in\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-[var(--brand-dark)]\">Staff Management</h1>\r\n                    <p className=\"text-[var(--text-muted)]\">Manage team access and roles</p>\r\n                </div>\r\n                <button\r\n                    onClick={openAddModal}\r\n                    className=\"flex items-center gap-2 px-6 py-3 bg-[var(--brand-primary)] text-white font-bold rounded-xl shadow-lg shadow-orange-200 hover:opacity-90 transition-opacity\"\r\n                >\r\n                    <span>+ Add Staff</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Staff List */}\r\n            <div className=\"glass-card rounded-2xl overflow-hidden animate-in\" style={{ animationDelay: '0.1s' }}>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-gray-50 border-b border-gray-100\">\r\n                            <tr>\r\n                                <th className=\"text-left p-4 text-sm font-bold text-gray-500 uppercase tracking-wider\">Name</th>\r\n                                <th className=\"text-left p-4 text-sm font-bold text-gray-500 uppercase tracking-wider\">Contact</th>\r\n                                <th className=\"text-left p-4 text-sm font-bold text-gray-500 uppercase tracking-wider\">Role</th>\r\n                                <th className=\"text-right p-4 text-sm font-bold text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                            {users.map((user) => (\r\n                                <tr key={user.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"font-bold text-gray-800\">{user.name}</div>\r\n                                    </td>\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"text-sm text-gray-600\">{user.email}</div>\r\n                                        <div className=\"text-sm text-gray-600\">{user.phone}</div>\r\n                                    </td>\r\n                                    <td className=\"p-4\">\r\n                                        <span className={`px-3 py-1 rounded-full text-xs font-bold ${user.role === 'Admin' ? 'bg-purple-100 text-purple-700' :\r\n                                            user.role === 'Manager' ? 'bg-blue-100 text-blue-700' :\r\n                                                'bg-gray-100 text-gray-700'\r\n                                            }`}>\r\n                                            {user.role}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right\">\r\n                                        <div className=\"flex items-center justify-end gap-2\">\r\n                                            <button\r\n                                                onClick={() => openEditModal(user)}\r\n                                                className=\"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                                                title=\"Edit User\"\r\n                                            >\r\n                                                ‚úèÔ∏è\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    if (confirm(`Remove ${user.name}? This cannot be undone.`)) deleteUser(user.id);\r\n                                                }}\r\n                                                className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                title=\"Remove Access\"\r\n                                            >\r\n                                                üóëÔ∏è\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                            {users.length === 0 && (\r\n                                <tr>\r\n                                    <td colSpan={4} className=\"p-8 text-center text-gray-400\">\r\n                                        No staff members found. Add one to get started.\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add/Edit Staff Modal */}\r\n            {isModalOpen && (\r\n                <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in\">\r\n                    <div className=\"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden\">\r\n                        <div className=\"p-6 border-b border-gray-100 flex justify-between items-center\">\r\n                            <h2 className=\"text-xl font-bold text-gray-800\">{isEditMode ? 'Edit Staff Details' : 'Add New Staff'}</h2>\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"text-gray-400 hover:text-gray-600\">‚úï</button>\r\n                        </div>\r\n                        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Full Name</label>\r\n                                <input\r\n                                    required\r\n                                    type=\"text\"\r\n                                    className=\"w-full p-3 rounded-xl border border-gray-200 focus:border-[var(--brand-primary)] outline-none\"\r\n                                    placeholder=\"e.g. Rahul Kumar\"\r\n                                    value={formData.name}\r\n                                    onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Email Address</label>\r\n                                <input\r\n                                    required\r\n                                    type=\"email\"\r\n                                    className=\"w-full p-3 rounded-xl border border-gray-200 focus:border-[var(--brand-primary)] outline-none\"\r\n                                    placeholder=\"e.g. rahul@oyechatoro.com\"\r\n                                    value={formData.email}\r\n                                    onChange={e => setFormData({ ...formData, email: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Phone Number</label>\r\n                                <input\r\n                                    required\r\n                                    type=\"tel\"\r\n                                    className=\"w-full p-3 rounded-xl border border-gray-200 focus:border-[var(--brand-primary)] outline-none\"\r\n                                    placeholder=\"e.g. 9876543210\"\r\n                                    value={formData.phone}\r\n                                    onChange={e => setFormData({ ...formData, phone: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Role</label>\r\n                                <select\r\n                                    className=\"w-full p-3 rounded-xl border border-gray-200 focus:border-[var(--brand-primary)] outline-none\"\r\n                                    value={formData.role}\r\n                                    onChange={e => setFormData({ ...formData, role: e.target.value })}\r\n                                >\r\n                                    <option value=\"Staff\">Staff</option>\r\n                                    <option value=\"Manager\">Manager</option>\r\n                                    <option value=\"Chef\">Chef</option>\r\n                                    <option value=\"Admin\">Admin</option>\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">\r\n                                    Password {isEditMode && <span className=\"text-xs font-normal text-gray-400\">(Leave blank to keep current)</span>}\r\n                                </label>\r\n                                <input\r\n                                    required={!isEditMode}\r\n                                    type=\"password\"\r\n                                    className=\"w-full p-3 rounded-xl border border-gray-200 focus:border-[var(--brand-primary)] outline-none\"\r\n                                    placeholder={isEditMode ? \"Enter new password to change\" : \"Create a secure password\"}\r\n                                    value={formData.password}\r\n                                    onChange={e => setFormData({ ...formData, password: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <div className=\"pt-4 flex gap-3\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setIsModalOpen(false)}\r\n                                    className=\"flex-1 p-3 rounded-xl border border-gray-200 font-bold text-gray-600 hover:bg-gray-50\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"flex-1 p-3 rounded-xl bg-[var(--brand-primary)] text-white font-bold hover:opacity-90 shadow-lg shadow-orange-200\"\r\n                                >\r\n                                    {isEditMode ? 'Save Changes' : 'Create Account'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}