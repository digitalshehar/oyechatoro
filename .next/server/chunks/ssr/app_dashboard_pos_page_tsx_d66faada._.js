module.exports=[62395,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(60824);function f({show:a,itemName:d,basePrice:e,modifiers:f,onClose:g,onConfirm:h}){let[i,j]=(0,c.useState)({}),[k,l]=(0,c.useState)("");if(!a)return null;let m=()=>Object.values(i).flat();return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:g,children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl flex flex-col max-h-[80vh]",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:d}),(0,b.jsx)("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:"‚úï"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-6 pr-2",children:[f.map((a,c)=>(0,b.jsxs)("div",{className:"border-b pb-4 last:border-0",children:[(0,b.jsxs)("h4",{className:"font-bold text-gray-700 mb-2 flex justify-between",children:[a.name,(0,b.jsx)("span",{className:"text-xs font-normal bg-gray-100 px-2 py-1 rounded text-gray-500",children:"one"===a.type?"Select 1":"Select Any"})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.options?.map((c,d)=>{let e=(i[a.name]||[]).some(a=>a.name===c.name);return(0,b.jsxs)("label",{className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${e?"border-orange-500 bg-orange-50":"border-gray-100 hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${e?"border-orange-500 bg-orange-500":"border-gray-300"}`,children:e&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})}),(0,b.jsx)("span",{className:`${e?"font-bold text-gray-800":"text-gray-600"}`,children:c.name})]}),c.price>0&&(0,b.jsxs)("span",{className:"text-sm font-semibold text-gray-600",children:["+‚Çπ",c.price]}),(0,b.jsx)("input",{type:"checkbox",className:"hidden",checked:e,onChange:()=>{j(b=>{let d=b[a.name]||[];return"one"===a.type?{...b,[a.name]:[c]}:d.find(a=>a.name===c.name)?{...b,[a.name]:d.filter(a=>a.name!==c.name)}:{...b,[a.name]:[...d,c]}})}})]},d)})})]},c)),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-gray-700 mb-2",children:"Special Instructions"}),(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),placeholder:"e.g., Less spicy, no onions...",className:"w-full border rounded-xl p-3 text-sm focus:border-orange-500 outline-none resize-none",rows:3})]})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,b.jsxs)("button",{onClick:()=>{h(m(),k),j({}),l("")},className:"w-full py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-bold flex justify-between px-6 shadow-lg shadow-orange-200",children:[(0,b.jsx)("span",{children:"Add Item"}),(0,b.jsxs)("span",{children:["‚Çπ",e+m().reduce((a,b)=>a+b.price,0)]})]})})]})})}function g({show:a,onClose:c,showSuccess:d,cartTotal:e,cartCount:f,subtotal:g,discountAmount:h,parcelAmount:i,taxAmount:j,tipAmount:k,paymentMethod:l,setPaymentMethod:m,amountTendered:n,setAmountTendered:o,changeAmount:p,onConfirm:q,onPayLater:r}){return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:c,children:(0,b.jsx)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl",onClick:a=>a.stopPropagation(),children:d?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"‚úÖ"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-green-600 mb-2",children:"Order Placed!"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Printing receipt..."}),p>0&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-xl",children:[(0,b.jsx)("div",{className:"text-lg",children:"Return Change"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["‚Çπ",p]})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"üí≥ Payment"}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3 mb-4 text-sm space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("span",{children:["Items (",f,")"]}),(0,b.jsxs)("span",{children:["‚Çπ",g]})]}),h>0&&(0,b.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,b.jsx)("span",{children:"Discount"}),(0,b.jsxs)("span",{children:["-‚Çπ",h]})]}),i>0&&(0,b.jsxs)("div",{className:"flex justify-between text-blue-600",children:[(0,b.jsx)("span",{children:"Parcel"}),(0,b.jsxs)("span",{children:["+‚Çπ",i]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"GST"}),(0,b.jsxs)("span",{children:["‚Çπ",j]})]}),k>0&&(0,b.jsxs)("div",{className:"flex justify-between text-pink-600",children:[(0,b.jsx)("span",{children:"Tip"}),(0,b.jsxs)("span",{children:["+‚Çπ",k]})]})]}),(0,b.jsx)("div",{className:"bg-orange-50 rounded-xl p-4 mb-4",children:(0,b.jsxs)("div",{className:"flex justify-between text-2xl font-bold",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{className:"text-orange-600",children:["‚Çπ",e]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:["Cash","Online"].map(a=>(0,b.jsxs)("button",{onClick:()=>m(a),className:`py-3 rounded-xl font-semibold transition-all ${l===a?"bg-orange-500 text-white":"bg-gray-100"}`,children:["Cash"===a&&"üíµ"," ","Online"===a&&"üåê"," ",a]},a))}),(0,b.jsx)("button",{onClick:r,className:"w-full py-3 mb-4 rounded-xl font-bold text-sm bg-yellow-100 text-yellow-700 border border-yellow-300",children:"üïí Pay Later"}),"Cash"===l&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 rounded-xl",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"üíµ Amount Received:"}),(0,b.jsx)("div",{className:"flex gap-2 mb-2",children:[e,100*Math.ceil(e/100),500*Math.ceil(e/500)].map(a=>(0,b.jsxs)("button",{onClick:()=>o(a),className:`px-3 py-2 rounded-lg text-sm font-semibold ${n===a?"bg-green-500 text-white":"bg-white border"}`,children:["‚Çπ",a]},a))}),(0,b.jsx)("input",{type:"number",value:n||"",onChange:a=>o(Number(a.target.value)),placeholder:"Enter amount...",className:"w-full px-4 py-3 rounded-xl border text-xl font-bold text-center"}),n>=e&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-green-100 rounded-lg text-center",children:[(0,b.jsx)("div",{className:"text-sm text-green-600",children:"Change Due"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-green-700",children:["‚Çπ",p]})]}),n>0&&n<e&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-red-100 rounded-lg text-center",children:[(0,b.jsx)("div",{className:"text-sm text-red-600",children:"Amount Short"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-red-700",children:["‚Çπ",e-n]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:c,className:"flex-1 py-3 rounded-xl font-semibold bg-gray-100",children:"Cancel"}),(0,b.jsx)("button",{onClick:q,disabled:"Cash"===l&&n<e&&n>0,className:"flex-1 py-3 rounded-xl font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white disabled:opacity-50",children:"‚úì Confirm"})]})]})})}):null}function h({show:a,onClose:c,totalRevenue:d,cashAmount:e,upiAmount:f,totalOrders:g}){return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:c,children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-6",children:"üìä Today's Sales"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-orange-50 p-4 rounded-xl flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Total Revenue"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:["‚Çπ",d]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-green-50 p-3 rounded-xl",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Cash"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["‚Çπ",e]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 p-3 rounded-xl",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Online/UPI"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:["‚Çπ",f]})]})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-xl flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Total Orders"}),(0,b.jsx)("span",{className:"font-bold",children:g})]})]}),(0,b.jsx)("button",{onClick:c,className:"w-full mt-6 py-3 rounded-xl font-semibold bg-gray-100",children:"Close"})]})}):null}function i({show:a,onClose:c,customer:d,setCustomer:e,onStartOrder:f}){return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:c,children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"üìû Online/Phone Order"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Customer details for delivery/pickup"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"üë§ Customer Name *",value:d.name,onChange:a=>e({...d,name:a.target.value}),className:"w-full px-4 py-3 rounded-xl border focus:border-orange-500 outline-none"}),(0,b.jsx)("input",{type:"tel",placeholder:"üì± Phone Number *",value:d.phone,onChange:a=>e({...d,phone:a.target.value}),className:"w-full px-4 py-3 rounded-xl border focus:border-orange-500 outline-none"}),(0,b.jsx)("textarea",{placeholder:"üè† Delivery Address (if delivery)",value:d.address,onChange:a=>e({...d,address:a.target.value}),className:"w-full px-4 py-3 rounded-xl border focus:border-orange-500 outline-none resize-none",rows:3})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:c,className:"flex-1 py-3 rounded-xl font-semibold bg-gray-100",children:"Cancel"}),(0,b.jsx)("button",{onClick:f,className:"flex-1 py-3 rounded-xl font-semibold bg-gradient-to-r from-teal-500 to-green-500 text-white",children:"Start Order ‚Üí"})]})]})}):null}function j({show:a,onClose:c,orders:d,onPrintReceipt:e,onSettlePayment:f}){return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:c,children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-lg shadow-2xl h-[80vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"üïí Recent Orders"}),(0,b.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:"‚úï"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto space-y-3",children:0===d.length?(0,b.jsx)("div",{className:"text-center text-gray-500 py-10",children:"No recent orders today."}):d.map(a=>(0,b.jsxs)("div",{className:"border rounded-xl p-3 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex gap-2 items-center mb-1",children:[(0,b.jsxs)("span",{className:"font-bold text-gray-800",children:["#",a.id]}),(0,b.jsx)("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${"Completed"===a.status?"bg-green-100 text-green-700":"Cancelled"===a.status?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:a.status}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:new Date(a.createdAt).toLocaleTimeString()})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[a.table&&(0,b.jsxs)("span",{className:"mr-2",children:["ü™ë ",a.table]}),a.type]}),(0,b.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-[200px]",children:a.items?.map(a=>`${a.quantity}x ${a.name}`).join(", ")}),"Unpaid"===a.paymentStatus&&(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)("span",{className:"bg-red-100 text-red-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase",children:"Unpaid (Pay Later)"})})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,b.jsxs)("div",{className:"font-bold text-lg",children:["‚Çπ",a.total]}),(0,b.jsxs)("div",{className:"flex gap-2",children:["Unpaid"===a.paymentStatus&&"Cancelled"!==a.status&&(0,b.jsx)("button",{onClick:()=>{let b=prompt("Settle Payment via: Cash or Online?","Cash");if(b){let c=b.toLowerCase().includes("online")||b.toLowerCase().includes("upi")?"Online":"Cash";f(a.id,c)}},className:"px-3 py-1 bg-green-500 text-white shadow-sm rounded-lg text-xs font-semibold hover:bg-green-600 animate-pulse",children:"‚úÖ Settle"}),(0,b.jsx)("button",{onClick:()=>e(a),className:"px-3 py-1 bg-white border shadow-sm rounded-lg text-xs font-semibold hover:bg-gray-50",children:"üñ® Print"})]})]})]},a.id))})]})}):null}function k({show:a,onClose:d,customers:e,onSearch:f,onSelect:g}){let[h,i]=(0,c.useState)("");return((0,c.useEffect)(()=>{a&&i("")},[a]),a)?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:d,children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl h-[80vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"üë§ Search Customer"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 text-xl",children:"‚úï"})]}),(0,b.jsxs)("div",{className:"relative mb-4",children:[(0,b.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Search by Name or Phone...",value:h,onChange:a=>{let b=a.target.value;i(b),f(b)},className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 outline-none transition-all"}),(0,b.jsx)("span",{className:"absolute left-3 top-3.5 text-gray-400",children:"üîç"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:0===e.length?(0,b.jsx)("div",{className:"text-center text-gray-400 py-10",children:h?"No customers found":"Type to search..."}):e.map(a=>(0,b.jsxs)("button",{onClick:()=>g(a),className:"w-full text-left p-3 rounded-xl hover:bg-orange-50 border border-transparent hover:border-orange-200 transition-all group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("div",{className:"font-bold text-gray-800",children:a.name}),(0,b.jsxs)("div",{className:"text-xs font-bold text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full",children:[a.loyaltyPoints," pts"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["üìû ",a.phone]}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["Last: ",new Date(a.lastVisit).toLocaleDateString()]})]})]},a.id))})]})}):null}let l=["Rahul","Amit","Vijay","Priya","Neha"];function m(){let{categories:a,items:m}=(0,e.useDbMenu)(),{orders:n,createOrder:o,updateOrder:p}=(0,e.useDbOrders)(),{customers:q,fetchCustomers:r,upsertCustomer:s}=(0,e.useDbCustomers)(),{settings:t}=(0,e.useDbSettings)(),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)("all"),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)("Dine In"),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)("Cash"),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)("percent"),[S,T]=(0,c.useState)(0),[U,V]=(0,c.useState)([]),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)([]),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(!0),[ag,ah]=(0,c.useState)([]),[ai,aj]=(0,c.useState)({packing:0,delivery:0}),[ak,al]=(0,c.useState)(0),[am,an]=(0,c.useState)(""),[ao,ap]=(0,c.useState)(""),[aq,ar]=(0,c.useState)(0),[as,at]=(0,c.useState)(!1),[au,av]=(0,c.useState)({totalOrders:0,totalRevenue:0,cashAmount:0,upiAmount:0}),[aw,ax]=(0,c.useState)([]),[ay,az]=(0,c.useState)(!1),[aA,aB]=(0,c.useState)(!1),[aC,aD]=(0,c.useState)("menu"),[aE,aF]=(0,c.useState)(null),[aG,aH]=(0,c.useState)(!1),[aI,aJ]=(0,c.useState)(!1),[aK,aL]=(0,c.useState)("floor"),[aM,aN]=(0,c.useState)(!1),[aO,aP]=(0,c.useState)({name:"",phone:"",address:""}),[aQ,aR]=(0,c.useState)(!1),[aS,aT]=(0,c.useState)(null),[aU,aV]=(0,c.useState)(null),[aW,aX]=(0,c.useState)([]),[aY,aZ]=(0,c.useState)(0),a$=(0,c.useRef)(null);(0,c.useEffect)(()=>{B(!0)},[]),(0,c.useEffect)(()=>{A&&localStorage.setItem("pos_held_orders",JSON.stringify(U))},[U,A]),(0,c.useEffect)(()=>{let a=a=>{if("F1"===a.key&&(a.preventDefault(),a$.current?.focus()),"F2"===a.key&&(a.preventDefault(),be()),"F3"===a.key&&(a.preventDefault(),X(!0)),"F4"===a.key&&(a.preventDefault(),a5()),"F5"===a.key&&(a.preventDefault(),af(a=>!a)),"F8"===a.key&&u.length>0&&(a.preventDefault(),L(!0)),"F12"===a.key&&(a.preventDefault(),bg()),"Escape"===a.key&&(L(!1),X(!1),Z(!1),ab(!1),aR(!1)),a.key>="1"&&a.key<="9"&&!(a.target instanceof HTMLInputElement)){let b=parseInt(a.key)-1;if(ag[b]){let a=m.find(a=>a.id===ag[b]);a&&a3(a)}}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[u,m,ag]);let a_=()=>{let a=new Date,b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=n.filter(a=>new Date(a.createdAt)>=b&&"Cancelled"!==a.status),d={totalOrders:c.length,totalSales:c.reduce((a,b)=>a+Number(b.total),0),cashSales:c.filter(a=>"Cash"===a.paymentMethod).reduce((a,b)=>a+Number(b.total),0),onlineSales:c.filter(a=>"Online"===a.paymentMethod||"UPI"===a.paymentMethod||"Card"===a.paymentMethod).reduce((a,b)=>a+Number(b.total),0)};av({totalOrders:d.totalOrders,totalRevenue:d.totalSales,cashAmount:d.cashSales,upiAmount:d.onlineSales}),ax([...n].sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()).slice(0,10))};(0,c.useEffect)(()=>{(ay||aA)&&a_()},[ay,aA]);let a0=(0,c.useCallback)(a=>{let b=n.filter(b=>"DineIn"===b.type&&b.table===a&&"Completed"!==b.status&&"Cancelled"!==b.status);if(0===b.length)return{status:"free"};let c=b[0];return"Ready"===c.status?{status:"billing",order:c}:{status:"occupied",order:c}},[n]),a1=(0,c.useMemo)(()=>m.filter(a=>"Active"===a.status),[m]),a2=(0,c.useMemo)(()=>{let a=a1;if("all"!==w&&(a=a.filter(a=>a.categoryId===w)),y){let b=y.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||(a.description||"").toLowerCase().includes(b))}return a.sort((a,b)=>a.price-b.price)},[a1,w,y]),a3=(0,c.useCallback)(a=>{if(a.modifiers&&a.modifiers.length>0){aT(a),aR(!0);return}a4(a,[],"")},[]),a4=(a,b,c)=>{let d=b.reduce((a,b)=>a+b.price,0),e=a.price+d,f=b.length>0?`${a.id}-${Date.now()}`:a.id;v(d=>0===b.length&&d.find(b=>b.id===a.id&&(!b.modifiers||0===b.modifiers.length))?d.map(b=>b.id!==a.id||b.modifiers&&0!==b.modifiers.length?b:{...b,quantity:b.quantity+1}):[...d,{id:f,menuItemId:a.id,name:a.name,price:e,quantity:1,veg:a.veg,image:a.image,modifiers:b,note:c}])},a5=()=>{u.length>0&&!aG?aH(!0):(v([]),T(0),T(0),ad(null),aj({packing:0,delivery:0}),al(0),an(""),ap(""),ar(0),aJ(!1),aH(!1))},a6=(a,b)=>{v(c=>c.map(c=>c.id===a?{...c,note:b}:c)),aF(null)},a7=a=>u.find(b=>b.id===a)?.quantity||0,a8=u.reduce((a,b)=>a+b.price*b.quantity,0),a9="percent"===Q?Math.round(a8*S/100):S,ba=ai.packing+ai.delivery,bb=a8-a9+ba+0+ak,bc=u.reduce((a,b)=>a+b.quantity,0),bd=aq>bb?aq-bb:0,be=()=>{if(0===u.length)return;let a={id:Date.now().toString(),name:E?`Table ${E}`:`Order ${U.length+1}`,cart:[...u],tableNumber:E,orderType:C,timestamp:Date.now()};V(b=>[...b,a]),a5(),F("")},bf=(a="Paid",b=M)=>{let c=window.open("","_blank","width=300,height=600");if(!c)return;let d=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Receipt</title>
                <style>
                    body { font-family: 'Courier New', monospace; font-size: 12px; padding: 10px; max-width: 280px; margin: 0 auto; }
                    .center { text-align: center; }
                    .bold { font-weight: bold; }
                    .line { border-top: 1px dashed #000; margin: 10px 0; }
                    .row { display: flex; justify-content: space-between; margin: 3px 0; }
                    .note { font-size: 10px; color: #666; margin-left: 15px; }
                    h1 { font-size: 18px; margin: 5px 0; }
                    h2 { font-size: 14px; margin: 5px 0; }
                </style>
            </head>
            <body>
                <div class="center">
                    <h1>OYE CHATORO</h1>
                    <p>Abu Road, Rajasthan</p>
                    <p>Ph: 9509913792</p>
                </div>
                <div class="line"></div>
                <div class="row"><span>Date:</span><span>${new Date().toLocaleDateString()}</span></div>
                <div class="row"><span>Time:</span><span>${new Date().toLocaleTimeString()}</span></div>
                <div class="row"><span>Type:</span><span>${C}</span></div>
                ${E?`<div class="row"><span>Table:</span><span>${E}</span></div>`:""}
                ${ao?`<div class="row"><span>Staff:</span><span>${ao}</span></div>`:""}
                ${G?`<div class="row"><span>Customer:</span><span>${G}</span></div>`:""}
                <div class="line"></div>
                ${u.map(a=>`
                    <div class="row">
                        <span>${a.quantity}x ${a.name}</span>
                        <span>‚Çπ${a.price*a.quantity}</span>
                    </div>
                    ${a.modifiers?a.modifiers.map(a=>`<div class="note"> + ${a.name}</div>`).join(""):""}
                    ${a.note?`<div class="note">‚Ü≥ ${a.note}</div>`:""}
                `).join("")}
                <div class="line"></div>
                <div class="row"><span>Subtotal:</span><span>‚Çπ${a8}</span></div>
                ${a9>0?`<div class="row"><span>Discount:</span><span>-‚Çπ${a9}</span></div>`:""}
                ${ba>0?`<div class="row"><span>Parcel Charge:</span><span>‚Çπ${ba}</span></div>`:""}
                ${ba>0?`<div class="row"><span>Parcel Charge:</span><span>‚Çπ${ba}</span></div>`:""}
                <div class="line"></div>
                <div class="row bold"><span>TOTAL:</span><span>‚Çπ${bb}</span></div>
                ${"Unpaid"===a?`
                    <div class="line"></div>
                    <div class="center bold" style="background: #000; color: #fff; padding: 5px;">PAY LATER / DUE</div>
                    <div class="row"><span>Payment:</span><span>NOT PAID</span></div>
                `:`
                    ${"Cash"===b&&aq>0?`
                        <div class="row"><span>Tendered:</span><span>‚Çπ${aq}</span></div>
                        <div class="row bold"><span>Change:</span><span>‚Çπ${bd}</span></div>
                    `:""}
                    <div class="row"><span>Payment:</span><span>${b}</span></div>
                `}
                ${am?`<div class="line"></div><p><b>Notes:</b> ${am}</p>`:""}
                <div class="line"></div>
                <div class="center">
                    <p>Thank you for visiting!</p>
                    <p>Please come again üôè</p>
                </div>
                <!-- <script>window.print(); window.close();</script> -->
            </body>
            </html>
        `;c.document.write(d)},bg=()=>{alert("No recent order to print")},bh=async()=>{I&&await s({name:G||"Unknown",phone:I,totalOrders:1,totalSpent:bb})},bi=async()=>{let a,b;if(0===u.length)return;await bh();let c={items:u.map(a=>({id:a.menuItemId,name:a.name,quantity:a.quantity,price:a.price,note:a.note,modifiers:a.modifiers})),total:bb,type:{"Dine In":"DineIn",Takeaway:"Takeaway",Delivery:"Delivery"}[C],table:"Dine In"===C?E:void 0,customer:G||"Walk-in Customer",mobile:I||void 0,paymentMethod:M,paymentStatus:"Paid",discount:a9>0?{type:"percent"===Q?"percent":"amount",value:S,amount:a9}:void 0,tip:ak,waiterName:ao,waiterCalled:!1,notes:am,dietary:(a=[],(b=(am+" "+u.map(a=>a.note||"").join(" ")).toLowerCase()).includes("jain")&&a.push("Jain"),b.includes("vegan")&&a.push("Vegan"),(b.includes("allergy")||b.includes("allergic"))&&a.push("Allergy"),a)};if(aU){let a=[...aW,...u.map(a=>({id:a.menuItemId,name:a.name,quantity:a.quantity,price:a.price,note:a.note,modifiers:a.modifiers}))];await p(aU,{items:a,total:aY+bb,status:"Cooking"}),P(!0),setTimeout(()=>{P(!1),L(!1),a5(),F(""),H(""),J(""),ad(null),aV(null),aX([]),aL("floor")},1e3);return}o(c).catch(console.error),bf("Paid",M),P(!0),setTimeout(()=>{P(!1),L(!1),a5(),F(""),H(""),J(""),ad(null)},2e3)},bj=async()=>{let a,b;0!==u.length&&(await bh(),o({items:u.map(a=>({id:a.menuItemId,name:a.name,quantity:a.quantity,price:a.price,note:a.note,modifiers:a.modifiers})),total:bb,type:{"Dine In":"DineIn",Takeaway:"Takeaway",Delivery:"Delivery"}[C],table:"Dine In"===C?E:void 0,customer:G||"Walk-in Customer",mobile:I||void 0,paymentMethod:"Cash",paymentStatus:"Unpaid",discount:a9>0?{type:"percent"===Q?"percent":"amount",value:S,amount:a9}:void 0,tip:ak,waiterName:ao,dietary:(a=[],(b=(am+" "+u.map(a=>a.note||"").join(" ")).toLowerCase()).includes("jain")&&a.push("Jain"),b.includes("vegan")&&a.push("Vegan"),(b.includes("allergy")||b.includes("allergic"))&&a.push("Allergy"),a)}).catch(console.error),bf("Unpaid","Cash"),P(!0),setTimeout(()=>{P(!1),L(!1),a5(),F(""),H(""),J(""),ad(null)},2e3))};return A?(0,b.jsxs)("div",{className:"flex-1 flex flex-col bg-gray-100 overflow-hidden",children:["floor"===aK&&(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:"/dashboard/overview",className:"p-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-all font-bold text-xs flex items-center gap-1",children:"‚Üê EXIT"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"ü™ë Table Floor"}),(0,b.jsx)("p",{className:"text-white/80 text-[10px] md:text-sm",children:"Select a table to take order"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>az(!0),className:"px-4 py-2 bg-white/20 text-white rounded-lg font-semibold text-sm hover:bg-white/30",children:"üìä Sales"}),(0,b.jsx)("button",{onClick:()=>aB(!0),className:"px-4 py-2 bg-white/20 text-white rounded-lg font-semibold text-sm hover:bg-white/30",children:"üïí Recent"}),(0,b.jsxs)("select",{value:ao,onChange:a=>{let b=a.target.value;ap(b),localStorage.setItem("pos_selected_staff",b)},className:`px-3 py-2 rounded-lg font-semibold text-sm ${!ao?"bg-red-100 text-red-600 animate-pulse":"bg-white/20 text-white"}`,children:[(0,b.jsx)("option",{value:"",children:"üë§ Staff"}),l.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]})}),(0,b.jsxs)("div",{className:"bg-white border-b px-4 py-2 flex gap-4 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-green-500"})," Free"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-orange-500"})," Occupied"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-red-500"})," Bill Ready"]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[Array.from({length:10},(a,c)=>{let d=`T-${c+1}`,{status:e,order:f}=a0(d);return(0,b.jsxs)("button",{onClick:()=>(a=>{let{status:b,order:c}=a0(a);F(a),D("Dine In"),"occupied"===b&&c?(aV(c.id),aX(c.items),aZ(c.total),H(c.customer),J(c.mobile||""),c.mobile&&r(c.mobile),v([])):(aV(null),aX([]),aZ(0),v([]),H(""),J(""),ad(null)),aL("pos"),aD("menu")})(d),className:`p-4 rounded-2xl border-2 ${"free"===e?"bg-green-50 border-green-500 hover:bg-green-100":"occupied"===e?"bg-orange-50 border-orange-500 hover:bg-orange-100":"bg-red-50 border-red-500 hover:bg-red-100"} transition-all hover:scale-105 active:scale-95 text-left`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:`text-3xl ${"free"===e?"text-green-500":"occupied"===e?"text-orange-500":"text-red-500"}`,children:"ü™ë"}),(0,b.jsx)("span",{className:`text-xs font-bold px-2 py-1 rounded ${"free"===e?"bg-green-500 text-white":"occupied"===e?"bg-orange-500 text-white":"bg-red-500 text-white"}`,children:"free"===e?"FREE":"occupied"===e?"BUSY":"BILL"})]}),(0,b.jsx)("div",{className:"text-xl font-bold text-gray-800",children:d}),f&&(0,b.jsxs)("div",{className:"mt-2 text-sm",children:[(0,b.jsx)("div",{className:"text-gray-500 truncate",children:f.items.slice(0,2).map(a=>a.name).join(", ")}),(0,b.jsxs)("div",{className:"font-bold text-orange-600",children:["‚Çπ",f.total]})]})]},d)}),(0,b.jsxs)("button",{onClick:()=>{D("Takeaway"),F(""),aL("pos"),aD("menu")},className:"p-4 rounded-2xl border-2 bg-blue-50 border-blue-500 hover:bg-blue-100 transition-all hover:scale-105 active:scale-95 text-left",children:[(0,b.jsx)("span",{className:"text-3xl",children:"üì¶"}),(0,b.jsx)("div",{className:"text-xl font-bold text-gray-800 mt-2",children:"Takeaway"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"New parcel order"})]}),(0,b.jsxs)("button",{onClick:()=>{D("Delivery"),F(""),aL("pos"),aD("menu")},className:"p-4 rounded-2xl border-2 bg-purple-50 border-purple-500 hover:bg-purple-100 transition-all hover:scale-105 active:scale-95 text-left",children:[(0,b.jsx)("span",{className:"text-3xl",children:"üöó"}),(0,b.jsx)("div",{className:"text-xl font-bold text-gray-800 mt-2",children:"Delivery"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"New delivery order"})]}),(0,b.jsxs)("button",{onClick:()=>aN(!0),className:"p-4 rounded-2xl border-2 bg-teal-50 border-teal-500 hover:bg-teal-100 transition-all hover:scale-105 active:scale-95 text-left",children:[(0,b.jsx)("span",{className:"text-3xl",children:"üìû"}),(0,b.jsx)("div",{className:"text-xl font-bold text-gray-800 mt-2",children:"Phone/Online"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Customer call order"})]})]})})]}),"pos"===aK&&(0,b.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[(0,b.jsxs)("div",{className:`flex-1 flex flex-col overflow-hidden ${"cart"===aC?"hidden md:flex":"flex"}`,children:[(0,b.jsxs)("div",{className:"bg-white border-b p-2 md:p-3 flex flex-col md:flex-row gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>aL("floor"),className:"px-4 py-2.5 rounded-xl bg-gray-800 text-white font-bold text-xs flex items-center gap-1 shrink-0 shadow-lg shadow-gray-200",children:"‚Üê Floor"}),E&&(0,b.jsxs)("div",{className:"px-3 py-2.5 bg-orange-100 text-orange-600 rounded-xl font-bold text-xs shrink-0 border border-orange-200",children:["ü™ë ",E]}),(0,b.jsx)("div",{className:"flex-1 relative",children:(0,b.jsx)("input",{ref:a$,type:"text",placeholder:"üîç Search items...",value:y,onChange:a=>z(a.target.value),className:"w-full pl-4 pr-10 py-2.5 rounded-xl border border-gray-100 focus:border-orange-500 focus:ring-4 focus:ring-orange-50 outline-none transition-all text-sm bg-gray-50/50"})})]}),(0,b.jsx)("div",{className:"flex gap-1 overflow-x-auto pb-1 md:pb-0 scrollbar-hide",children:["Dine In","Takeaway","Delivery"].map(a=>(0,b.jsxs)("button",{onClick:()=>D(a),className:`px-4 py-2 rounded-xl font-bold text-[10px] md:text-xs transition-all whitespace-nowrap flex items-center gap-1.5 border ${C===a?"bg-orange-500 text-white border-orange-600 shadow-md shadow-orange-100":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:[(0,b.jsx)("span",{children:"Dine In"===a?"ü™ë":"Takeaway"===a?"üì¶":"üöó"})," ",a]},a))})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-2 flex gap-2 overflow-x-auto scrollbar-hide",children:[(0,b.jsx)("button",{onClick:()=>x("all"),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${"all"===w?"bg-gray-800 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-200"}`,children:"All Items"}),a.map(a=>(0,b.jsx)("button",{onClick:()=>x(a.id),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${w===a.id?"bg-gray-800 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-200"}`,children:a.name},a.id))]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:a2.map(a=>(0,b.jsxs)("button",{onClick:()=>a3(a),className:"bg-white p-3 rounded-xl border hover:border-orange-500 hover:shadow-lg transition-all text-left group relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"absolute top-2 right-2 flex flex-col gap-1 items-end",children:[(0,b.jsx)("span",{className:`w-3 h-3 rounded-full ${a.veg?"bg-green-500":"bg-red-500"}`}),a7(a.id)>0&&(0,b.jsx)("span",{className:"bg-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:a7(a.id)})]}),(0,b.jsx)("div",{className:"font-bold text-gray-800 text-sm mb-1 pr-4",children:a.name}),(0,b.jsxs)("div",{className:"text-orange-600 font-bold text-sm",children:["‚Çπ",a.price]}),a.modifiers&&a.modifiers.length>0&&(0,b.jsx)("span",{className:"text-[10px] text-gray-400",children:"Customizable"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-orange-50 opacity-0 group-hover:opacity-10 transition-opacity"})]},a.id))})})]}),(0,b.jsxs)("div",{className:`w-full md:w-[400px] bg-white border-l flex flex-col ${"menu"===aC?"hidden md:flex":"flex"}`,children:[(0,b.jsxs)("div",{className:"bg-gray-900 text-white p-3 md:p-4 border-b border-white/5 shadow-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-sm shadow-lg shadow-orange-900/20",children:"üõí"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-bold text-sm",children:"Review Order"}),(0,b.jsx)("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest",children:E||C})]})]}),(0,b.jsx)("button",{onClick:()=>aD("menu"),className:"md:hidden p-2 bg-white/5 rounded-xl text-xs font-bold border border-white/10 hover:bg-white/10 transition-colors flex items-center gap-1",children:"‚Üê BACK"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"flex-1 relative",children:(0,b.jsx)("input",{type:"tel",placeholder:"üì± Mobile No",value:I,onChange:a=>{let b,c=a.target.value;J(c),10===c.length&&(r(c),(b=q.find(a=>a.phone.includes(c)))&&b.phone===c?(ad(b),H(b.name),J(b.phone)):J(c))},className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-gray-500 outline-none focus:border-orange-500 focus:bg-white/10 transition-all font-bold"})}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"üë§ Name",value:G,onChange:a=>H(a.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-gray-500 outline-none focus:border-orange-500 focus:bg-white/10 transition-all font-bold"}),ac&&(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center gap-1 bg-orange-600 px-1.5 py-0.5 rounded text-[8px] font-black uppercase shadow-lg shadow-orange-900/40",children:"VIP"})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[aU&&aW.length>0&&(0,b.jsxs)("div",{className:"mb-4 bg-orange-50 p-3 rounded-xl border border-orange-100",children:[(0,b.jsx)("div",{className:"text-xs font-bold text-orange-600 mb-2 uppercase tracking-wide",children:"Existing Items"}),aW.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center py-1 opacity-70",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-800",children:[a.quantity,"x ",a.name]}),a.note&&(0,b.jsx)("div",{className:"text-xs text-gray-500 italic",children:a.note})]}),(0,b.jsxs)("div",{className:"font-bold text-gray-600",children:["‚Çπ",a.price*a.quantity]})]},`existing-${c}`)),(0,b.jsxs)("div",{className:"mt-2 pt-2 border-t border-orange-200 flex justify-between text-sm font-bold text-orange-800",children:[(0,b.jsx)("span",{children:"Previous Total"}),(0,b.jsxs)("span",{children:["‚Çπ",aY]})]})]}),0===u.length?(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 opacity-50",children:[(0,b.jsx)("span",{className:"text-4xl mb-2",children:"üõí"}),(0,b.jsx)("p",{children:"Cart is empty"})]}):u.map(a=>(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100 flex gap-3 group relative",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,b.jsx)("span",{className:"font-bold text-sm text-gray-800",children:a.name}),(0,b.jsxs)("span",{className:"font-bold text-gray-800",children:["‚Çπ",a.price*a.quantity]})]}),a.modifiers&&a.modifiers.length>0&&(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1 flex flex-wrap gap-1",children:a.modifiers.map((a,c)=>(0,b.jsx)("span",{className:"bg-white border px-1 rounded",children:a.name},c))}),a.note&&(0,b.jsxs)("div",{className:"text-xs text-orange-600 italic mb-1",children:["Note: ",a.note]}),aE===a.id?(0,b.jsx)("div",{className:"flex gap-2 mt-1",children:(0,b.jsx)("input",{autoFocus:!0,type:"text",className:"flex-1 text-xs border rounded px-1 py-0.5",defaultValue:a.note,onBlur:b=>a6(a.id,b.target.value),onKeyDown:b=>"Enter"===b.key&&a6(a.id,b.currentTarget.value)})}):(0,b.jsxs)("button",{onClick:()=>aF(a.id),className:"text-[10px] text-blue-500 hover:underline",children:["+ ",a.note?"Edit Note":"Add Note"]})]}),(0,b.jsx)("div",{className:"flex flex-col items-center justify-between gap-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-lg border shadow-sm px-1 py-0.5",children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void v(a=>{let c=a.find(a=>a.id===b);return c&&c.quantity>1?a.map(a=>a.id===b?{...a,quantity:a.quantity-1}:a):a.filter(a=>a.id!==b)})},className:"w-6 h-6 flex items-center justify-center text-red-500 hover:bg-red-50 rounded",children:"-"}),(0,b.jsx)("span",{className:"font-bold text-sm w-4 text-center",children:a.quantity}),(0,b.jsx)("button",{onClick:()=>a3({...a,modifiers:a.modifiers}),className:"w-6 h-6 flex items-center justify-center text-green-500 hover:bg-green-50 rounded",children:"+"})]})})]},a.id))]}),(0,b.jsxs)("div",{className:"bg-white border-t p-4 shadow-[0_-5px_15px_rgba(0,0,0,0.05)]",children:[(0,b.jsxs)("div",{className:"space-y-1 mb-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between text-gray-500",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["‚Çπ",a8]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-green-600",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 cursor-pointer hover:bg-green-50 px-1 rounded",onClick:()=>R(a=>"percent"===a?"flat":"percent"),children:(0,b.jsxs)("span",{children:["Discount (","percent"===Q?"%":"‚Çπ",")"]})}),S>0?(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)("span",{children:["-‚Çπ",a9]}),(0,b.jsx)("button",{onClick:()=>T(0),className:"text-xs bg-red-100 text-red-500 rounded px-1",children:"‚úï"})]}):(0,b.jsx)("button",{onClick:()=>{let a=prompt("Enter Discount "+("percent"===Q?"%":"Amount"));a&&T(Number(a))},className:"text-xs bg-green-100 px-2 rounded",children:"+ Add"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-blue-600",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("span",{children:"Extra Charges"}),(0,b.jsx)("button",{onClick:()=>{let a=prompt("Enter Packing Charge (‚Çπ)",ai.packing.toString()),b=prompt("Enter Delivery Charge (‚Çπ)",ai.delivery.toString());null!==a&&aj(b=>({...b,packing:Number(a)})),null!==b&&aj(a=>({...a,delivery:Number(b)}))},className:"text-xs bg-blue-100 px-2 rounded hover:bg-blue-200",children:"‚úèÔ∏è Edit"})]}),(0,b.jsxs)("div",{className:"text-right text-xs",children:[ai.packing>0&&(0,b.jsxs)("div",{children:["Packing: ‚Çπ",ai.packing]}),ai.delivery>0&&(0,b.jsxs)("div",{children:["Delivery: ‚Çπ",ai.delivery]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-bold text-lg pt-2 border-t text-gray-900",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["‚Çπ",bb]})]})]}),(0,b.jsx)("textarea",{placeholder:"üìù Order Notes...",value:am,onChange:a=>an(a.target.value),className:"w-full text-xs p-2 bg-gray-50 rounded-lg mb-3 border-0 focus:ring-1 focus:ring-orange-500 resize-none h-8"}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[(0,b.jsx)("button",{onClick:()=>az(!0),className:"col-span-1 py-3 rounded-xl font-bold text-gray-600 bg-gray-100 hover:bg-gray-200",children:"üìä"}),(0,b.jsx)("button",{onClick:be,className:"col-span-1 py-3 rounded-xl font-bold text-blue-600 bg-blue-50 hover:bg-blue-100",children:"‚è∏ Hold"}),(0,b.jsx)("button",{onClick:()=>{let a=window.open("","_blank","width=300,height=400");if(!a)return;let b=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>KOT</title>
                <style>
                    body { font-family: 'Courier New', monospace; font-size: 14px; padding: 10px; max-width: 280px; margin: 0 auto; }
                    .center { text-align: center; }
                    .bold { font-weight: bold; font-size: 16px; }
                    .line { border-top: 2px dashed #000; margin: 8px 0; }
                    .item { margin: 8px 0; padding: 5px; background: #f5f5f5; }
                    .qty { font-size: 20px; font-weight: bold; }
                    .note { color: red; font-weight: bold; }
                    h1 { font-size: 22px; margin: 5px 0; }
                </style>
            </head>
            <body>
                <div class="center">
                    <h1>üç≥ KITCHEN ORDER</h1>
                    <p class="bold">${new Date().toLocaleTimeString()}</p>
                    ${aU?"<p>(ADD TO ORDER)</p>":""}
                </div>
                <div class="line"></div>
                <div class="bold">${C} ${E?"‚Ä¢ Table "+E:""}</div>
                <div class="line"></div>
                ${u.map(a=>`
                    <div class="item">
                        <span class="qty">${a.quantity}x</span> ${a.name}
                        ${a.modifiers?a.modifiers.map(a=>`<div class="note">+ ${a.name}</div>`).join(""):""}
                        ${a.note?`<div class="note">‚ö†Ô∏è ${a.note}</div>`:""}
                    </div>
                `).join("")}
                ${am?`<div class="line"></div><div class="note">üìù ${am}</div>`:""}
                <div class="line"></div>
                <div class="center bold">--- END OF KOT ---</div>
                <!-- <script>window.print(); window.close();</script> -->
            </body>
            </html>
        `;a.document.write(b),aJ(!0)},className:"col-span-1 py-3 rounded-xl font-bold text-purple-600 bg-purple-50 hover:bg-purple-100",children:"üë®‚Äçüç≥ KOT"}),(0,b.jsx)("button",{onClick:a5,className:"col-span-1 py-3 rounded-xl font-bold text-red-600 bg-red-50 hover:bg-red-100",children:"üóë"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:aU?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{aV(null),aX([]),v([]),aL("floor")},className:"flex-1 py-4 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-bold shadow-lg shadow-gray-200 transition-all",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>bi(),disabled:0===u.length,className:"flex-[2] py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all hover:scale-[1.02] disabled:opacity-50",children:["Update Order (‚Çπ",bb+aY,")"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>bj(),disabled:0===u.length,className:"flex-1 py-4 bg-yellow-400 hover:bg-yellow-500 text-yellow-900 rounded-xl font-bold shadow-lg shadow-yellow-200 transition-all disabled:opacity-50 disabled:shadow-none",children:"Pay Later"}),(0,b.jsxs)("button",{onClick:()=>L(!0),disabled:0===u.length,className:"flex-[2] py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-bold shadow-lg shadow-orange-200 transition-all disabled:opacity-50 disabled:shadow-none",children:["Charge ‚Çπ",bb]})]})})]})]})]}),(0,b.jsxs)("div",{className:"md:hidden bg-white border-t flex justify-around p-2 sticky bottom-0 z-30 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]",children:[(0,b.jsxs)("button",{onClick:()=>aD("menu"),className:`flex flex-col items-center p-2 rounded-lg transition-all ${"menu"===aC?"text-orange-500 bg-orange-50":"text-gray-400"}`,children:[(0,b.jsx)("span",{className:"text-xl",children:"üçî"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:"Menu"})]}),(0,b.jsxs)("button",{onClick:()=>aD("cart"),className:`flex flex-col items-center p-2 rounded-lg relative transition-all ${"cart"===aC?"text-orange-500 bg-orange-50":"text-gray-400"}`,children:[(0,b.jsx)("span",{className:"text-xl",children:"üõí"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:"Cart"}),u.length>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] font-bold w-4 h-4 rounded-full flex items-center justify-center animate-bounce shadow-sm",children:u.length})]})]}),(0,b.jsx)(f,{show:aQ,itemName:aS?.name||"",basePrice:aS?.price||0,modifiers:aS?.modifiers||[],onClose:()=>aR(!1),onConfirm:(a,b)=>{aS&&(a4(aS,a,b),aR(!1),aT(null))}}),(0,b.jsx)(g,{show:K,onClose:()=>L(!1),showSuccess:O,cartTotal:bb,cartCount:bc,subtotal:a8,discountAmount:a9,parcelAmount:ai.packing+ai.delivery,taxAmount:0,tipAmount:ak,paymentMethod:M,setPaymentMethod:N,amountTendered:aq,setAmountTendered:ar,changeAmount:bd,onConfirm:bi,onPayLater:bj}),(0,b.jsx)(h,{show:ay,onClose:()=>az(!1),totalRevenue:au.totalRevenue,cashAmount:au.cashAmount,upiAmount:au.upiAmount,totalOrders:au.totalOrders}),(0,b.jsx)(j,{show:aA,onClose:()=>aB(!1),orders:aw,onPrintReceipt:a=>{alert(`Printing receipt for Order #${a.id}`)},onSettlePayment:async(a,b)=>{try{await p(a,{paymentStatus:"Paid",paymentMethod:b,status:"Completed"}),alert(`Order #${a} marked as Paid via ${b}`),a_()}catch(a){alert("Failed to update order"),console.error(a)}}}),(0,b.jsx)(i,{show:aM,onClose:()=>aN(!1),customer:aO,setCustomer:aP,onStartOrder:()=>{H(aO.name),J(aO.phone),aN(!1),aL("pos"),aD("menu"),D("Delivery")}}),(0,b.jsx)(k,{show:aa,onClose:()=>ab(!1),customers:q,onSearch:r,onSelect:a=>{ad(a),H(a.name),J(a.phone),ab(!1)}})]}):null}a.s(["default",()=>m],62395)}];

//# sourceMappingURL=app_dashboard_pos_page_tsx_d66faada._.js.map