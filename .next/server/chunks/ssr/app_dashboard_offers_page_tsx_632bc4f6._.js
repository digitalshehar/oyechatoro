module.exports=[64367,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60824);function e(){let{offers:a,loading:e,saveOffer:f,updateOffer:g,deleteOffer:h}=(0,d.useDbOffers)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({code:"",discount:"",type:"Percentage",expiry:"",status:"Active",usage:0,description:"",bgColor:"from-orange-400 to-red-500"}),s=(0,c.useMemo)(()=>{let b=a.filter(a=>"Active"===a.status).length;return{active:b,totalRedemptions:a.reduce((a,b)=>a+(b.usage||0),0),topOffer:[...a].sort((a,b)=>(b.usage||0)-(a.usage||0))[0]}},[a]),t=()=>{r({code:"",discount:"",type:"Percentage",expiry:"",status:"Active",usage:0,description:"",bgColor:"from-orange-400 to-red-500"}),l(null),j(!1)},u=async()=>{if(!q.code||!q.discount||!q.expiry)return;let a={code:q.code.toUpperCase(),discount:q.discount,type:q.type,expiry:q.expiry,status:q.status,description:q.description,bgColor:q.bgColor};(k&&g?await g(k,a):await f(a))&&t()},v=async a=>{if(!g)return;let b="Active"===a.status?"Inactive":"Active";await g(a.id,{status:b})},w=({offer:a,preview:c=!1})=>(0,b.jsxs)("div",{className:`relative group w-full ${c?"scale-90 origin-top":""}`,children:[!c&&(0,b.jsx)("div",{className:`absolute -top-2 -right-2 z-20 px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider shadow-sm border border-white/20 ${"Active"===a.status?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:a.status}),(0,b.jsxs)("div",{className:`h-40 rounded-2xl bg-gradient-to-br ${a.bgColor} text-white relative overflow-hidden shadow-lg transition-transform hover:-translate-y-1`,children:[(0,b.jsx)("div",{className:"absolute -left-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-[var(--background)] rounded-full z-10"}),(0,b.jsx)("div",{className:"absolute -right-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-[var(--background)] rounded-full z-10"}),(0,b.jsx)("div",{className:"absolute top-1/2 left-4 right-4 h-px border-t-2 border-dashed border-white/30"}),(0,b.jsxs)("div",{className:"h-full flex flex-col justify-between p-5",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-md bg-white/20 text-[10px] font-bold uppercase tracking-wider backdrop-blur-sm mb-1",children:a.type}),(0,b.jsx)("div",{className:"font-black text-3xl",children:a.discount})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-white/80 text-xs font-medium",children:"Expires"}),(0,b.jsx)("div",{className:"font-bold text-sm",children:a.expiry})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-end pt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-white/80 mb-1 max-w-[150px] truncate",children:a.description||"Valid on all orders"}),(0,b.jsxs)("div",{onClick:()=>{var b;return!c&&(b=a.code,void navigator.clipboard.writeText(b))},className:`inline-flex items-center gap-2 bg-white text-gray-900 px-3 py-1.5 rounded-lg font-bold font-mono tracking-wider shadow-sm ${!c?"cursor-pointer hover:bg-gray-100 active:scale-95 transition-all":""}`,title:c?"":"Click to copy",children:[a.code,!c&&(0,b.jsx)("span",{className:"text-gray-400 text-[10px]",children:"ðŸ“‹"})]})]}),!c&&(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),p(o===a.id?null:a.id)},className:"w-8 h-8 flex items-center justify-center rounded-full bg-black/20 hover:bg-black/30 text-white transition-colors",children:"â‹®"}),o===a.id&&(0,b.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 w-32 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-30 animate-in fade-in zoom-in-95",children:[(0,b.jsx)("button",{onClick:()=>{r({...a}),l(a.id),j(!0),p(null)},className:"w-full text-left px-4 py-2text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 text-xs font-bold",children:"âœï¸ Edit"}),(0,b.jsx)("button",{onClick:()=>{v(a),p(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 text-xs font-bold",children:"Active"===a.status?"â¸ï¸ Pause":"â–¶ï¸ Activate"}),(0,b.jsx)("button",{onClick:()=>{n(a.id),p(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 text-xs font-bold border-t border-gray-100",children:"ðŸ—‘ï¸ Delete"})]})]})]})]})]}),m===a.id&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-sm w-full animate-in zoom-in-95",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Delete Coupon?"}),(0,b.jsxs)("p",{className:"text-gray-500 mb-6",children:["Are you sure you want to delete ",(0,b.jsx)("span",{className:"font-bold text-gray-800",children:a.code}),"? This action cannot be undone."]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>n(null),className:"px-4 py-2 text-gray-600 font-bold hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{h(a.id),n(null)},className:"px-4 py-2 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 shadow-lg shadow-red-200",children:"Yes, Delete"})]})]})})]});return e?(0,b.jsx)("div",{className:"p-12 text-center text-gray-500",children:"Loading offers..."}):(0,b.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-8",onClick:()=>p(null),children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4 animate-in",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-pink-600 bg-clip-text text-transparent",children:"Coupons & Offers"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage marketing campaigns"})]}),!i&&(0,b.jsxs)("button",{onClick:()=>{t(),j(!0)},className:"px-6 py-2.5 bg-gray-900 text-white rounded-xl font-bold shadow-lg hover:bg-gray-800 hover:shadow-xl transition-all flex items-center gap-2",children:[(0,b.jsx)("span",{children:"+"})," Create New Offer"]})]}),!i&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 animate-in slide-in-from-bottom-4",children:[(0,b.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider",children:"Active Coupons"}),(0,b.jsx)("div",{className:"text-3xl font-bold text-gray-800 mt-1",children:s.active})]}),(0,b.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider",children:"Total Redemptions"}),(0,b.jsx)("div",{className:"text-3xl font-bold text-green-600 mt-1",children:s.totalRedemptions})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-5 rounded-2xl shadow-lg text-white relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute right-0 top-0 p-4 opacity-10 text-5xl",children:"ðŸ†"}),(0,b.jsx)("span",{className:"text-white/80 text-xs font-bold uppercase tracking-wider relative z-10",children:"Best Performer"}),(0,b.jsx)("div",{className:"text-2xl font-bold mt-1 relative z-10",children:s.topOffer?.code||"N/A"}),(0,b.jsxs)("div",{className:"text-xs text-white/60 relative z-10",children:[s.topOffer?.usage||0," uses"]})]})]}),i&&(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-xl overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:k?"Edit Coupon":"Create New Coupon"}),(0,b.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Coupon Code"}),(0,b.jsx)("input",{type:"text",placeholder:"SUMMER20",value:q.code,onChange:a=>r({...q,code:a.target.value.toUpperCase()}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-indigo-500 outline-none transition-colors font-mono font-bold"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Expiry Date"}),(0,b.jsx)("input",{type:"date",value:q.expiry,onChange:a=>r({...q,expiry:a.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-indigo-500 outline-none transition-colors"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Discount Type"}),(0,b.jsxs)("select",{value:q.type,onChange:a=>r({...q,type:a.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-indigo-500 outline-none transition-colors",children:[(0,b.jsx)("option",{value:"Percentage",children:"Percentage Off (%)"}),(0,b.jsx)("option",{value:"Flat",children:"Flat Amount (â‚¹)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Value"}),(0,b.jsx)("input",{type:"text",placeholder:"e.g. 20% or â‚¹100",value:q.discount,onChange:a=>r({...q,discount:a.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-indigo-500 outline-none transition-colors font-bold"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Description"}),(0,b.jsx)("input",{type:"text",placeholder:"Valid on orders above â‚¹500",value:q.description,onChange:a=>r({...q,description:a.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-indigo-500 outline-none transition-colors"})]}),k&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Status"}),(0,b.jsxs)("select",{value:q.status,onChange:a=>r({...q,status:a.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-indigo-500 outline-none transition-colors",children:[(0,b.jsx)("option",{value:"Active",children:"Active"}),(0,b.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Theme"}),(0,b.jsx)("div",{className:"flex gap-3 flex-wrap",children:["from-orange-400 to-red-500","from-blue-400 to-indigo-500","from-emerald-400 to-teal-600","from-violet-400 to-fuchsia-600","from-gray-700 to-black","from-pink-500 to-rose-500"].map(a=>(0,b.jsx)("button",{onClick:()=>r({...q,bgColor:a}),className:`w-10 h-10 rounded-full bg-gradient-to-br ${a} ${q.bgColor===a?"ring-2 ring-offset-2 ring-gray-400 scale-110":""} transition-all`},a))})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 flex flex-col items-center justify-center border border-dashed border-gray-200",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Live Preview"}),(0,b.jsx)("div",{className:"w-full max-w-sm",children:(0,b.jsx)(w,{offer:q,preview:!0})})]})]}),(0,b.jsxs)("div",{className:"p-6 bg-gray-50 border-t border-gray-100 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:t,className:"px-5 py-2 text-gray-600 font-bold hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,b.jsx)("button",{onClick:u,className:"px-6 py-2 bg-gray-900 text-white font-bold rounded-lg hover:bg-black transition-transform active:scale-95",children:k?"Update Coupon":"Create Coupon"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:[a.map(a=>(0,b.jsx)(w,{offer:a},a.id)),0===a.length&&!i&&(0,b.jsxs)("button",{onClick:()=>{t(),j(!0)},className:"col-span-full py-20 text-center border-2 border-dashed border-gray-200 rounded-3xl hover:bg-gray-50 hover:border-gray-300 transition-all group cursor-pointer",children:[(0,b.jsx)("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:"ðŸŽŸï¸"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-400 group-hover:text-gray-600",children:"No coupons yet"}),(0,b.jsx)("p",{className:"text-gray-400 group-hover:text-gray-500",children:"Click to create your first offer!"})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_dashboard_offers_page_tsx_632bc4f6._.js.map