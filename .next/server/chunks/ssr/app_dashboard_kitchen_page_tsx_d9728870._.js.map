{"version":3,"sources":["../../../../app/dashboard/kitchen/page.tsx","../../../../app/components/chef/ChefHeader.tsx","../../../../app/components/chef/ItemTimer.tsx","../../../../app/components/chef/TicketCard.tsx","../../../../app/components/chef/ItemView.tsx","../../../../app/components/chef/PrepView.tsx","../../../../app/components/chef/ShiftLogView.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { useDbOrders, Order, useDbMenu } from '../../lib/db-hooks';\r\nimport { getSocket } from '../../lib/socket';\r\nimport { ChefHeader, TicketCard, ItemView, PrepView, ShiftLogView } from '../../components/chef';\r\n\r\nexport default function KitchenPage() {\r\n    const { orders: allOrders, updateOrder, refetch: refetchOrders } = useDbOrders();\r\n    const { items: menuItems, categories, updateItem } = useDbMenu();\r\n\r\n    const [viewMode, setViewMode] = useState<'new' | 'active' | 'history' | 'stats' | 'prep' | 'logs'>('new');\r\n    const [currentTime, setCurrentTime] = useState(Date.now());\r\n    const [isSoundEnabled, setIsSoundEnabled] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const saved = localStorage.getItem('chef_sound_enabled');\r\n        if (saved !== null) setIsSoundEnabled(saved === 'true');\r\n    }, []);\r\n\r\n    const toggleSound = (val: boolean) => {\r\n        setIsSoundEnabled(val);\r\n        localStorage.setItem('chef_sound_enabled', val.toString());\r\n    };\r\n    const [isTVMode, setIsTVMode] = useState(false);\r\n    const [orderTypeFilter, setOrderTypeFilter] = useState<'all' | 'dine-in' | 'takeaway'>('all');\r\n    const [stationFilter, setStationFilter] = useState<string>('all');\r\n\r\n    // History State\r\n    const [historyOrders, setHistoryOrders] = useState<Order[]>([]);\r\n    const [loadingHistory, setLoadingHistory] = useState(false);\r\n    const [updatedOrderIds, setUpdatedOrderIds] = useState<Set<number>>(new Set());\r\n\r\n    // Modals state (placeholders)\r\n    const [showPrepModal, setShowPrepModal] = useState(false);\r\n    const [showWasteModal, setShowWasteModal] = useState(false);\r\n\r\n    const prevOrderCountRef = useRef(0);\r\n\r\n    // Live Kitchen Polling (30s)\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (viewMode === 'active' || viewMode === 'new') refetchOrders();\r\n        }, 30000);\r\n        return () => clearInterval(interval);\r\n    }, [viewMode, refetchOrders]);\r\n\r\n    // Timer Logic\r\n    useEffect(() => {\r\n        const timer = setInterval(() => setCurrentTime(Date.now()), 10000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    // Fetch History when mode changes\r\n    useEffect(() => {\r\n        if (viewMode === 'history') {\r\n            setLoadingHistory(true);\r\n            fetch('/api/orders?status=Completed&limit=50')\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (Array.isArray(data)) setHistoryOrders(data);\r\n                })\r\n                .catch(err => console.error(err))\r\n                .finally(() => setLoadingHistory(false));\r\n        }\r\n    }, [viewMode]);\r\n\r\n    // Filter Logic\r\n    const filteredOrders = useMemo(() => {\r\n        // Source depends on mode\r\n        let source = allOrders;\r\n\r\n        if (viewMode === 'history') {\r\n            source = historyOrders;\r\n        } else if (viewMode === 'new') {\r\n            source = allOrders.filter(o => o.status === 'Pending' || updatedOrderIds.has(o.id));\r\n        } else if (viewMode === 'active') {\r\n            source = allOrders.filter(o => o.status === 'Cooking' || o.status === 'Ready');\r\n        } else {\r\n            // Other modes might not use this list, but safe fallback\r\n            source = allOrders.filter(o => o.status === 'Pending' || o.status === 'Cooking');\r\n        }\r\n\r\n        // Sorting: Active = Oldest First (FIFO), History = Newest First\r\n        source = source.sort((a, b) => {\r\n            const timeA = new Date(a.createdAt).getTime();\r\n            const timeB = new Date(b.createdAt).getTime();\r\n            return viewMode === 'history' ? timeB - timeA : timeA - timeB;\r\n        });\r\n\r\n        if (orderTypeFilter !== 'all') {\r\n            if (orderTypeFilter === 'dine-in') {\r\n                source = source.filter(o => o.type === 'DineIn');\r\n            } else {\r\n                source = source.filter(o => o.type === 'Takeaway' || o.type === 'Delivery');\r\n            }\r\n        }\r\n\r\n        // Dynamic Station Filtering\r\n        if (stationFilter !== 'all') {\r\n            const targetCatId = categories.find(c => c.name === stationFilter)?.id;\r\n            if (targetCatId) {\r\n                // Find all item names in this category\r\n                const validNames = new Set(\r\n                    menuItems\r\n                        .filter(i => i.categoryId === targetCatId)\r\n                        .map(i => i.name.toLowerCase())\r\n                );\r\n\r\n                source = source.filter(o => {\r\n                    const items = o.items as any[];\r\n                    // Keep order if ANY item belongs to this category\r\n                    return items.some(i => validNames.has(i.name.toLowerCase()));\r\n                });\r\n            }\r\n        }\r\n\r\n        return source;\r\n    }, [allOrders, historyOrders, viewMode, orderTypeFilter, stationFilter, categories, menuItems]);\r\n\r\n    // Enhanced Sound Helper with Voice\r\n    const playSound = (type: 'new' | 'update' = 'new') => {\r\n        if (!isSoundEnabledRef.current) return;\r\n\r\n        try {\r\n            // 1. Premium \"Ding-Dong\" Tone using AudioContext\r\n            const AudioContext = window.AudioContext || (window as any).webkitAudioContext;\r\n            if (AudioContext) {\r\n                const ctx = new AudioContext();\r\n\r\n                const playNote = (freq: number, start: number, duration: number) => {\r\n                    const osc = ctx.createOscillator();\r\n                    const gain = ctx.createGain();\r\n                    osc.type = 'sine';\r\n                    osc.frequency.setValueAtTime(freq, ctx.currentTime + start);\r\n                    gain.gain.setValueAtTime(0, ctx.currentTime + start);\r\n                    gain.gain.linearRampToValueAtTime(0.3, ctx.currentTime + start + 0.1);\r\n                    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + start + duration);\r\n                    osc.connect(gain);\r\n                    gain.connect(ctx.destination);\r\n                    osc.start(ctx.currentTime + start);\r\n                    osc.stop(ctx.currentTime + start + duration);\r\n                };\r\n\r\n                // Play a double chime for new orders\r\n                playNote(880, 0, 0.4); // A5\r\n                if (type === 'new') playNote(1108.73, 0.15, 0.6); // C#6\r\n            }\r\n\r\n            // 2. Voice Announcement (Hinglish / Brand Voice)\r\n            if ('speechSynthesis' in window) {\r\n                // Cancel any ongoing speech\r\n                window.speechSynthesis.cancel();\r\n\r\n                const text = type === 'new'\r\n                    ? \"Oye Chatoro! You have a new order.\"\r\n                    : \"Chef, an order has been updated.\";\r\n\r\n                const utterance = new SpeechSynthesisUtterance(text);\r\n                utterance.pitch = 1.1;\r\n                utterance.rate = 0.95;\r\n                utterance.volume = 1.0;\r\n\r\n                // Try to find a premium/clean voice\r\n                const voices = window.speechSynthesis.getVoices();\r\n                const preferredVoice = voices.find(v => (v.lang.includes('IN') || v.lang.includes('GB')) && v.name.includes('Google'))\r\n                    || voices.find(v => v.lang.includes('en'));\r\n\r\n                if (preferredVoice) utterance.voice = preferredVoice;\r\n\r\n                window.speechSynthesis.speak(utterance);\r\n            }\r\n        } catch (e) {\r\n            console.error('Audio notification failed:', e);\r\n        }\r\n    };\r\n\r\n    // Sound Logic for NEW Orders (Pending count increase)\r\n    useEffect(() => {\r\n        const activeCount = allOrders.filter(o => o.status === 'Pending').length;\r\n\r\n        if (activeCount > prevOrderCountRef.current) {\r\n            playSound('new');\r\n        }\r\n        prevOrderCountRef.current = activeCount;\r\n    }, [allOrders, isSoundEnabled]);\r\n\r\n    // Ref for sound enabled to access inside socket listener without re-binding\r\n    const isSoundEnabledRef = useRef(isSoundEnabled);\r\n    useEffect(() => {\r\n        isSoundEnabledRef.current = isSoundEnabled;\r\n    }, [isSoundEnabled]);\r\n\r\n    // Separate Socket Listener for Updates to avoid re-binding\r\n    useEffect(() => {\r\n        const socket = getSocket();\r\n\r\n        const handleOrderUpdate = (updatedOrder: Order) => {\r\n            // Add to updated set if it's an active order or pending\r\n            if (updatedOrder.status === 'Pending' || updatedOrder.status === 'Cooking' || updatedOrder.status === 'Ready') {\r\n                playSound('update');\r\n                setUpdatedOrderIds(prev => {\r\n                    const next = new Set(prev);\r\n                    next.add(updatedOrder.id);\r\n                    return next;\r\n                });\r\n            }\r\n        };\r\n\r\n        socket.on('order-updated', handleOrderUpdate);\r\n\r\n        return () => {\r\n            socket.off('order-updated', handleOrderUpdate);\r\n        };\r\n    }, []); // Empty dependency array = Single bind\r\n\r\n    // Sound effect for updates (derived from state change to avoid dependency in socket listener)\r\n    useEffect(() => {\r\n        if (updatedOrderIds.size > 0 && isSoundEnabled) {\r\n            // Play sound logic again? Or just make a playSound function accessible.\r\n            // We can just rely on the fact that adding to Set triggers re-render, \r\n            // but we want the sound to play ONCE on event.\r\n\r\n            // ALternative: Let the listener dispatch a custom event or use a Ref for isSoundEnabled.\r\n        }\r\n    }, [updatedOrderIds, isSoundEnabled]); // This might play on dismiss? No, only on add.\r\n\r\n    // We need 'playSound' available. Let's extract playSound to a helper or useCallback.\r\n\r\n\r\n    // Item Aggregation (Production View)\r\n    const aggregatedItems = useMemo(() => {\r\n        const activeOrders = allOrders.filter(o => o.status === 'Pending' || o.status === 'Cooking');\r\n\r\n        return activeOrders.reduce((acc: { [key: string]: number }, order) => {\r\n            const items = order.items as any[];\r\n            if (Array.isArray(items)) {\r\n                items.forEach((item) => {\r\n                    // Apply station filter if needed\r\n                    if (stationFilter !== 'all') {\r\n                        const targetCatId = categories.find(c => c.name === stationFilter)?.id;\r\n                        if (targetCatId) {\r\n                            const itemDef = menuItems.find(m => m.name.toLowerCase() === item.name.toLowerCase());\r\n                            if (!itemDef || itemDef.categoryId !== targetCatId) return;\r\n                        }\r\n                    }\r\n\r\n                    const name = item.name;\r\n                    const qty = item.quantity || 1;\r\n                    acc[name] = (acc[name] || 0) + qty;\r\n                });\r\n            }\r\n            return acc;\r\n        }, {});\r\n    }, [allOrders, stationFilter, categories, menuItems]);\r\n\r\n    const printKOT = (order: Order) => {\r\n        const time = new Date(order.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n        const itemsList = (order.items as any[]).map(i => `<div>‚ñ° ${i.quantity}x ${i.name}</div>`).join('');\r\n\r\n        const content = `\r\n            <html>\r\n            <head>\r\n                <title>KOT #${order.id}</title>\r\n                <style>\r\n                    body { font-family: monospace; padding: 20px; max-width: 300px; }\r\n                    .header { font-size: 20px; font-weight: bold; text-align: center; margin-bottom: 10px; }\r\n                    .meta { font-size: 14px; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }\r\n                    .item { font-size: 18px; font-weight: bold; margin-bottom: 10px; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"header\">KITCHEN TICKET</div>\r\n                <div class=\"meta\">\r\n                    #${order.id}<br>\r\n                    ${time}<br>\r\n                    ${order.type}\r\n                </div>\r\n                ${itemsList}\r\n                <script>window.print();</script>\r\n            </body>\r\n            </html>\r\n        `;\r\n        const win = window.open('', '', 'width=300,height=600');\r\n        if (win) {\r\n            win.document.write(content);\r\n            win.document.close();\r\n        }\r\n    };\r\n\r\n    // Helper for Stock Control\r\n    const handleUpdateItem = async (id: string, updates: any) => {\r\n        const item = menuItems.find(i => i.id === id);\r\n        if (!item) return;\r\n\r\n        // We need to pass the full item merged with updates, because saveItem expects a MenuItem object\r\n        // and uses its ID to determine route.\r\n        const updatedItem = { ...item, ...updates };\r\n        await updateItem(updatedItem);\r\n    };\r\n\r\n    return (\r\n        <div className={`h-full flex flex-col min-h-screen ${isTVMode ? 'bg-black text-white p-0' : 'bg-gray-50 p-4'}`}>\r\n            {!isTVMode && (\r\n                <ChefHeader\r\n                    {...{\r\n                        soundEnabled: isSoundEnabled, setSoundEnabled: toggleSound,\r\n                        setIsTVMode, setShowPrepModal, setShowWasteModal,\r\n                        viewMode, setViewMode, filter: orderTypeFilter, setFilter: setOrderTypeFilter,\r\n                        stationFilter, setStationFilter, displayedCount: filteredOrders.length,\r\n                        onLogout: () => console.log('logout'), categories: categories.map(c => c.name),\r\n                        newOrderCount: allOrders.filter(o => o.status === 'Pending' || updatedOrderIds.has(o.id)).length,\r\n                        onTestSound: () => playSound('new')\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {isTVMode && (\r\n                <div className=\"flex justify-between items-center p-4 bg-gray-900 border-b border-gray-800 sticky top-0 z-50\">\r\n                    <h1 className=\"text-4xl font-bold text-yellow-500\">\r\n                        {stationFilter === 'all' ? 'MASTER KITCHEN VIEW' : `${stationFilter.toUpperCase()} STATION`}\r\n                    </h1>\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"text-2xl font-mono text-gray-300\">\r\n                            {new Date(currentTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                        </div>\r\n                        <div className=\"text-xl font-bold bg-gray-800 px-4 py-2 rounded-lg\">\r\n                            PENDING: <span className=\"text-red-500\">{filteredOrders.length}</span>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setIsTVMode(false)}\r\n                            className=\"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded text-xl font-bold\"\r\n                        >\r\n                            EXIT TV MODE\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* NEW ORDER ALERT BOX */}\r\n            {!isTVMode && (\r\n                (() => {\r\n                    const alertOrders = allOrders.filter(o => o.status === 'Pending' || updatedOrderIds.has(o.id));\r\n\r\n                    if (alertOrders.length === 0) return null;\r\n\r\n                    return (\r\n                        <div className=\"bg-gradient-to-r from-yellow-100 to-orange-100 border-l-8 border-orange-500 rounded-r-xl p-4 mb-6 mx-4 md:mx-0 shadow-sm animate-pulse flex items-center justify-between\">\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"text-xl font-bold text-orange-800 flex items-center gap-2\">\r\n                                    ‚ö†Ô∏è NEW / UPDATED ORDERS\r\n                                    <span className=\"bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full\">{alertOrders.length}</span>\r\n                                </h3>\r\n                                <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                                    {alertOrders.map(o => (\r\n                                        <div key={o.id} className=\"inline-flex flex-col bg-white px-3 py-2 rounded-lg shadow-sm border border-orange-200 text-sm\">\r\n                                            <div className=\"flex justify-between items-center border-b border-gray-100 pb-1 mb-1\">\r\n                                                <span className=\"font-bold text-gray-600\">#{o.id}</span>\r\n                                                <span className={`text-[10px] font-bold px-1.5 py-0.5 rounded ${o.status === 'Pending' ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>\r\n                                                    {o.status === 'Pending' ? 'NEW' : 'UPDATED'}\r\n                                                </span>\r\n                                            </div>\r\n                                            <span className=\"font-bold text-gray-800\">\r\n                                                {(o.items as any[]).map(i => `${i.quantity}x ${i.name}`).join(', ')}\r\n                                            </span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-4xl ml-4\">üîî</div>\r\n                        </div>\r\n                    );\r\n                })()\r\n            )}\r\n\r\n            <div className={isTVMode ? \"p-4 grid grid-cols-4 gap-4\" : \"\"}>\r\n                {filteredOrders.length === 0 && (viewMode === 'active' || viewMode === 'new') ? (\r\n                    <div className=\"flex-1 flex flex-col items-center justify-center text-[var(--text-muted)] animate-in min-h-[50vh]\">\r\n                        <div className=\"text-8xl mb-6 opacity-20\">üë®‚Äçüç≥</div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-400\">All Caught Up!</h2>\r\n                        <p className=\"text-gray-400\">Kitchen is clear.</p>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        {(viewMode === 'active' || viewMode === 'history' || viewMode === 'new') && (\r\n                            <div className={isTVMode ? \"contents\" : \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in\"}>\r\n                                {filteredOrders.map(order => (\r\n                                    <TicketCard\r\n                                        key={order.id}\r\n                                        order={order}\r\n                                        onUpdateStatus={(id, updates) => updateOrder(id, updates)}\r\n                                        onPrintKOT={printKOT}\r\n                                        currentTime={currentTime}\r\n                                        isHistory={viewMode === 'history'}\r\n                                        tvMode={isTVMode}\r\n                                        stationFilter={stationFilter}\r\n                                        getItemCategory={(name: string) => {\r\n                                            const item = menuItems.find(i => i.name.toLowerCase() === name.toLowerCase());\r\n                                            const cat = categories.find(c => c.id === item?.categoryId);\r\n                                            return cat?.name || '';\r\n                                        }}\r\n                                        isUpdated={updatedOrderIds.has(order.id)}\r\n                                        onClearUpdate={(id) => setUpdatedOrderIds(prev => {\r\n                                            const next = new Set(prev);\r\n                                            next.delete(id);\r\n                                            return next;\r\n                                        })}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        {!isTVMode && viewMode === 'stats' && (\r\n                            <ItemView\r\n                                items={aggregatedItems}\r\n                                menuItems={menuItems}\r\n                                onUpdateItem={handleUpdateItem}\r\n                                categories={categories}\r\n                            />\r\n                        )}\r\n\r\n                        {!isTVMode && viewMode === 'prep' && (\r\n                            <PrepView />\r\n                        )}\r\n\r\n                        {!isTVMode && viewMode === 'logs' && (\r\n                            <ShiftLogView />\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\n\r\ninterface ChefHeaderProps {\r\n    soundEnabled: boolean;\r\n    setSoundEnabled: (v: boolean) => void;\r\n    setIsTVMode: (v: boolean) => void;\r\n    setShowPrepModal: (v: boolean) => void;\r\n    setShowWasteModal: (v: boolean) => void;\r\n    viewMode: 'new' | 'active' | 'history' | 'stats' | 'prep' | 'logs';\r\n    setViewMode: (mode: 'new' | 'active' | 'history' | 'stats' | 'prep' | 'logs') => void;\r\n    filter: 'all' | 'dine-in' | 'takeaway';\r\n    setFilter: (v: 'all' | 'dine-in' | 'takeaway') => void;\r\n    stationFilter: string;\r\n    setStationFilter: (v: string) => void;\r\n    displayedCount: number;\r\n    onLogout: () => void;\r\n    categories?: string[];\r\n    newOrderCount?: number;\r\n    onTestSound?: () => void;\r\n}\r\n\r\nexport default function ChefHeader({\r\n    soundEnabled, setSoundEnabled, setIsTVMode, setShowPrepModal, setShowWasteModal,\r\n    viewMode, setViewMode, filter, setFilter, stationFilter, setStationFilter, displayedCount, onLogout, categories = [], newOrderCount = 0, onTestSound\r\n}: ChefHeaderProps) {\r\n    return (\r\n        <div className=\"sticky top-0 z-20 bg-gray-50/95 backdrop-blur-sm pb-4 pt-2 -mx-2 px-2 md:mx-0 md:px-0 md:static md:bg-transparent md:p-0 md:mb-6\">\r\n            <div className=\"bg-white p-2 md:p-4 rounded-2xl border border-gray-200 shadow-sm flex flex-col md:flex-row justify-between gap-2 md:gap-4\">\r\n                <div className=\"flex justify-between items-center\">\r\n                    <div className=\"flex items-center gap-2 md:gap-3\">\r\n                        <div className=\"text-xl md:text-4xl bg-gray-700 p-1.5 md:p-2 rounded-xl flex items-center justify-center\">üë®‚Äçüç≥</div>\r\n                        <div>\r\n                            <h1 className=\"text-base md:text-2xl font-bold text-orange-500 leading-tight\">Chef Portal</h1>\r\n                            <div className=\"flex items-center gap-1 md:gap-2 mt-0.5\">\r\n                                <button onClick={() => setSoundEnabled(!soundEnabled)} className={`text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 rounded-full border ${soundEnabled ? 'bg-green-500/20 border-green-500 text-green-600' : 'bg-gray-100 border-gray-300 text-gray-400'}`}>{soundEnabled ? 'üîî' : 'üîï'}</button>\r\n                                {soundEnabled && onTestSound && (\r\n                                    <button onClick={onTestSound} className=\"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 rounded-full border bg-orange-500/10 border-orange-500 text-orange-600 font-bold hover:bg-orange-500 hover:text-white transition-colors\">TEST</button>\r\n                                )}\r\n                                <button onClick={() => setIsTVMode(true)} className=\"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 rounded-full border bg-purple-500/20 border-purple-500 text-purple-600\">üì∫ TV</button>\r\n                                <button onClick={() => setShowPrepModal(true)} className=\"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 rounded-full border bg-blue-500/20 border-blue-500 text-blue-600\">üìã Prep</button>\r\n                                <button onClick={() => setShowWasteModal(true)} className=\"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 rounded-full border bg-red-500/20 border-red-500 text-red-600\">üóëÔ∏è</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 md:hidden\">\r\n                        <span className=\"font-bold text-gray-700 text-base bg-gray-100 px-2.5 py-1 rounded-lg border border-gray-200\">{displayedCount}</span>\r\n                        <button onClick={onLogout} className=\"p-2 bg-red-50 text-red-600 rounded-lg border border-red-100\">üö™</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-2 w-full md:w-auto\">\r\n                    <div className=\"flex bg-gray-100 rounded-xl p-1 gap-1\">\r\n                        <button\r\n                            onClick={() => setViewMode('new')}\r\n                            className={`flex-1 md:flex-none flex items-center justify-center gap-2 px-3 md:px-6 py-2 rounded-lg font-bold transition-all text-xs md:text-sm ${viewMode === 'new' ? 'bg-yellow-500 text-white shadow-md' : 'text-gray-500 hover:bg-gray-200'}`}\r\n                        >\r\n                            NEW\r\n                            {newOrderCount > 0 && (\r\n                                <span className={`flex items-center justify-center w-4 h-4 md:w-5 md:h-5 rounded-full text-[10px] md:text-xs ${viewMode === 'new' ? 'bg-white text-yellow-600' : 'bg-red-500 text-white'}`}>\r\n                                    {newOrderCount}\r\n                                </span>\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('active')}\r\n                            className={`flex-1 md:flex-none px-3 md:px-6 py-2 rounded-lg font-bold transition-all text-xs md:text-sm ${viewMode === 'active' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-500 hover:bg-gray-200'}`}\r\n                        >\r\n                            COOKING\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('history')}\r\n                            className={`flex-1 md:flex-none px-3 md:px-6 py-2 rounded-lg font-bold transition-all text-xs md:text-sm ${viewMode === 'history' ? 'bg-gray-700 text-white shadow-md' : 'text-gray-500 hover:bg-gray-200'}`}\r\n                        >\r\n                            HISTORY\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"flex gap-2 overflow-x-auto pb-1 scrollbar-hide\">\r\n                        <select value={filter} onChange={(e) => setFilter(e.target.value as any)} className=\"bg-white text-gray-700 text-[10px] md:text-sm rounded-lg px-2 md:px-3 py-1.5 md:py-2 border border-gray-200 outline-none font-bold focus:ring-2 focus:ring-orange-500 shrink-0\">\r\n                            <option value=\"all\">Types</option>\r\n                            <option value=\"dine-in\">Dine-in</option>\r\n                            <option value=\"takeaway\">Takeaway</option>\r\n                        </select>\r\n                        <select value={stationFilter} onChange={(e) => setStationFilter(e.target.value as any)} className=\"bg-white text-gray-700 text-[10px] md:text-sm rounded-lg px-2 md:px-3 py-1.5 md:py-2 border border-gray-200 outline-none font-bold focus:ring-2 focus:ring-orange-500 shrink-0\">\r\n                            <option value=\"all\">Stations</option>\r\n                            {categories.map(cat => (\r\n                                <option key={cat} value={cat}>{cat}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div className=\"hidden md:flex items-center gap-4\">\r\n                    <div className=\"text-right\">\r\n                        <div className=\"text-2xl font-bold\">{displayedCount}</div>\r\n                        <div className=\"text-xs text-gray-400 uppercase\">Count</div>\r\n                    </div>\r\n                    <button onClick={onLogout} className=\"px-4 py-2 bg-red-500/20 text-red-400 rounded-xl font-bold text-sm\">Logout</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\ninterface ItemTimerProps {\r\n    id: string; // Unique key: orderId-itemIndex\r\n}\r\n\r\nexport default function ItemTimer({ id }: ItemTimerProps) {\r\n    const [targetTime, setTargetTime] = useState<number | null>(null);\r\n    const [timeLeft, setTimeLeft] = useState<string | null>(null);\r\n    const [isExpired, setIsExpired] = useState(false);\r\n    const [showPicker, setShowPicker] = useState(false);\r\n\r\n    // Load from storage on mount\r\n    useEffect(() => {\r\n        const key = `timer-${id}`;\r\n        const stored = localStorage.getItem(key);\r\n        if (stored) {\r\n            const target = parseInt(stored);\r\n            if (target > Date.now()) {\r\n                setTargetTime(target);\r\n            } else {\r\n                // Already done?\r\n                // Just clear it for now or mark expired if very recent?\r\n                // valid for 5 mins after expiry\r\n                if (Date.now() - target < 5 * 60000) {\r\n                    setIsExpired(true);\r\n                } else {\r\n                    localStorage.removeItem(key);\r\n                }\r\n            }\r\n        }\r\n    }, [id]);\r\n\r\n    // Timer Interval\r\n    useEffect(() => {\r\n        if (!targetTime) return;\r\n\r\n        const interval = setInterval(() => {\r\n            const now = Date.now();\r\n            const diff = targetTime - now;\r\n\r\n            if (diff <= 0) {\r\n                setIsExpired(true);\r\n                setTargetTime(null);\r\n                setTimeLeft(null);\r\n                localStorage.removeItem(`timer-${id}`);\r\n                // Play sound\r\n                try {\r\n                    const ctx = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n                    const osc = ctx.createOscillator();\r\n                    osc.connect(ctx.destination);\r\n                    osc.frequency.value = 800;\r\n                    osc.start();\r\n                    osc.stop(ctx.currentTime + 0.5);\r\n                } catch (e) { }\r\n            } else {\r\n                const mins = Math.floor(diff / 60000);\r\n                const secs = Math.floor((diff % 60000) / 1000);\r\n                setTimeLeft(`${mins}:${secs.toString().padStart(2, '0')}`);\r\n            }\r\n        }, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [targetTime, id]);\r\n\r\n    const startTimer = (minutes: number) => {\r\n        const target = Date.now() + minutes * 60000;\r\n        setTargetTime(target);\r\n        localStorage.setItem(`timer-${id}`, target.toString());\r\n        setShowPicker(false);\r\n        setIsExpired(false);\r\n    };\r\n\r\n    const stopTimer = () => {\r\n        setTargetTime(null);\r\n        setTimeLeft(null);\r\n        setIsExpired(false);\r\n        localStorage.removeItem(`timer-${id}`);\r\n    };\r\n\r\n    if (isExpired) {\r\n        return (\r\n            <button\r\n                onClick={stopTimer}\r\n                className=\"animate-pulse bg-red-500 text-white text-xs font-bold px-2 py-1 rounded shadow-lg\"\r\n            >\r\n                DONE! ‚úñ\r\n            </button>\r\n        );\r\n    }\r\n\r\n    if (targetTime) {\r\n        return (\r\n            <button\r\n                onClick={stopTimer}\r\n                className=\"bg-orange-100 text-orange-600 border border-orange-200 text-xs font-bold px-2 py-1 rounded flex items-center gap-1 hover:bg-red-50 hover:text-red-500\"\r\n            >\r\n                ‚è≥ {timeLeft} <span className=\"text-[10px] opacity-50 ml-1\">‚úñ</span>\r\n            </button>\r\n        );\r\n    }\r\n\r\n    if (showPicker) {\r\n        return (\r\n            <div className=\"flex items-center gap-1 bg-white shadow-lg border rounded-lg p-1 absolute z-20 mt-1\">\r\n                {[5, 10, 15, 20].map(m => (\r\n                    <button\r\n                        key={m}\r\n                        onClick={() => startTimer(m)}\r\n                        className=\"px-2 py-1 hover:bg-gray-100 rounded text-xs font-bold text-gray-700\"\r\n                    >\r\n                        {m}m\r\n                    </button>\r\n                ))}\r\n                <button onClick={() => setShowPicker(false)} className=\"text-gray-400 px-1 text-xs\">‚úï</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <button\r\n            onClick={() => setShowPicker(true)}\r\n            className=\"text-gray-300 hover:text-orange-500 transition-colors\"\r\n            title=\"Set Timer\"\r\n        >\r\n            ‚è±Ô∏è\r\n        </button>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Order } from '../../lib/db-hooks';\r\nimport ItemTimer from './ItemTimer';\r\n\r\ninterface TicketCardProps {\r\n    order: Order;\r\n    onUpdateStatus: (orderId: number, updates: Partial<Order>) => void;\r\n    onPrintKOT: (order: Order) => void;\r\n    currentTime: number;\r\n    isHistory?: boolean;\r\n    tvMode?: boolean;\r\n    stationFilter?: string;\r\n    getItemCategory?: (itemName: string) => string;\r\n    isUpdated?: boolean;\r\n    onClearUpdate?: (id: number) => void;\r\n}\r\n\r\nexport default function TicketCard({\r\n    order,\r\n    onUpdateStatus,\r\n    onPrintKOT,\r\n    currentTime,\r\n    isHistory = false,\r\n    tvMode = false,\r\n    stationFilter = 'all',\r\n    getItemCategory,\r\n    isUpdated = false,\r\n    onClearUpdate\r\n}: TicketCardProps) {\r\n    const [callingWaiter, setCallingWaiter] = useState(false);\r\n\r\n    const handleCallWaiter = async (method: 'portal' | 'whatsapp' = 'portal') => {\r\n        setCallingWaiter(true);\r\n        try {\r\n            await fetch('/api/kitchen/comms', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ orderId: order.id, action: 'call_waiter', message: method === 'whatsapp' ? 'Called via WhatsApp' : undefined })\r\n            });\r\n            onUpdateStatus(order.id, { waiterCalled: true });\r\n\r\n            if (method === 'whatsapp') {\r\n                const phone = '919509913792'; // Staff/Manager phone\r\n                const message = encodeURIComponent(`üë®‚Äçüç≥ *KITCHEN ALERT*\\nOrder: #${order.id}\\nTable: ${order.table || 'N/A'}\\nType: ${order.type}\\nStatus: ${order.status}\\n\\n*Please attend immediately!*`);\r\n                window.open(`https://wa.me/${phone}?text=${message}`, '_blank');\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            setCallingWaiter(false);\r\n        }\r\n    };\r\n\r\n    // Safety / Allergy Detection\r\n    const items = order.items as any[];\r\n    const itemNames = Array.isArray(items) ? items.map((i: any) => i.name).join(' ') : '';\r\n    const noteText = (order.notes || '') + ' ' + (Array.isArray(items) ? items.map((i: any) => i.note || '').join(' ') : '') + ' ' + itemNames;\r\n    const lowerNote = noteText.toLowerCase();\r\n\r\n    const isAllergy = lowerNote.includes('allergy') || lowerNote.includes('allergic') || lowerNote.includes('peanut') || lowerNote.includes('nuts');\r\n    const isJain = lowerNote.includes('jain') || (order.dietary && order.dietary.includes('Jain'));\r\n    const isVegan = lowerNote.includes('vegan') || (order.dietary && order.dietary.includes('Vegan'));\r\n    const isGlutenFree = lowerNote.includes('gluten free') || lowerNote.includes('gf');\r\n\r\n    const [aiSafety, setAiSafety] = useState<any>(null);\r\n\r\n    useEffect(() => {\r\n        if (isAllergy && noteText.length > 5) {\r\n            fetch('/api/kitchen/safety', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ note: noteText })\r\n            })\r\n                .then(res => res.json())\r\n                .then(data => setAiSafety(data))\r\n                .catch(console.error);\r\n        }\r\n    }, [isAllergy, noteText]);\r\n\r\n    const getElapsedTime = () => {\r\n        const created = new Date(order.createdAt).getTime();\r\n        if (order.status === 'Pending') {\r\n            const diff = currentTime - created;\r\n            return Math.floor(diff / 60000);\r\n        }\r\n        if (order.status === 'Cooking' && order.cookingStartedAt) {\r\n            const started = new Date(order.cookingStartedAt).getTime();\r\n            const diff = currentTime - started;\r\n            return Math.floor(diff / 60000);\r\n        }\r\n        const diff = currentTime - created;\r\n        return Math.floor(diff / 60000);\r\n    };\r\n\r\n    const getStatusColor = (minutes: number) => {\r\n        if (tvMode) {\r\n            if (minutes < 10) return 'bg-gray-800 text-white border-gray-700';\r\n            if (minutes < 20) return 'bg-yellow-900 text-yellow-100 border-yellow-700';\r\n            return 'bg-red-900 text-red-100 border-red-700 animate-pulse';\r\n        }\r\n        if (isHistory) return 'bg-gray-100 text-gray-600 border-gray-200';\r\n        if (minutes < 10) return 'bg-green-100 text-green-800 border-green-200';\r\n        if (minutes < 20) return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n        return 'bg-red-100 text-red-800 border-red-200 animate-pulse';\r\n    };\r\n\r\n    const getBorderColor = (status: Order['status']) => {\r\n        if (tvMode) {\r\n            if (status === 'Pending') return 'border-yellow-700';\r\n            if (status === 'Cooking') return 'border-blue-700';\r\n            if (status === 'Ready') return 'border-green-700';\r\n            return 'border-gray-700';\r\n        }\r\n        if (isHistory) return 'border-gray-200';\r\n        if (status === 'Pending') return 'border-yellow-400';\r\n        if (status === 'Cooking') return 'border-blue-500';\r\n        if (status === 'Ready') return 'border-green-500';\r\n        return 'border-gray-200';\r\n    };\r\n\r\n    const elapsed = getElapsedTime();\r\n    let statusColor = getStatusColor(elapsed);\r\n\r\n    if (isAllergy) {\r\n        statusColor = tvMode ? 'bg-purple-900 text-purple-100 border-purple-500 animate-pulse ring-4 ring-purple-500'\r\n            : 'bg-purple-100 text-purple-900 border-purple-500 animate-pulse ring-4 ring-purple-300';\r\n    } else if (isJain) {\r\n        statusColor = tvMode ? 'bg-green-900 text-green-100 border-green-500 border-l-8'\r\n            : 'bg-green-50 text-green-900 border-green-500 border-l-8';\r\n    }\r\n\r\n    const timeStr = new Date(order.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n\r\n    // Auto-clear update status after 1 minute of interaction or immediately on click?\r\n    // Let's provide a dismiss button or just clear on status change.\r\n    // Actually, user wants to see it on top.\r\n\r\n    return (\r\n        <div\r\n            className={`\r\n                relative flex flex-col rounded-xl overflow-hidden transition-all duration-300\r\n                ${tvMode ? 'bg-gray-800 text-white border-2 border-gray-700' : 'bg-white shadow-md border border-gray-100'}\r\n                ${isHistory ? 'opacity-80' : ''}\r\n                ${isUpdated ? 'ring-4 ring-blue-500 shadow-blue-200 scale-[1.02] z-10' : ''}\r\n            `}\r\n        >\r\n            {isUpdated && (\r\n                <div\r\n                    className=\"absolute top-0 left-0 right-0 bg-blue-600 text-white text-center text-sm font-bold py-1 animate-pulse cursor-pointer z-20\"\r\n                    onClick={() => onClearUpdate && onClearUpdate(order.id)}\r\n                >\r\n                    UPDATED - NEW ITEMS ADDED (Click to Dismiss)\r\n                </div>\r\n            )}\r\n\r\n            {/* Safety Banner */}\r\n            {isAllergy && (\r\n                <div className={`${tvMode ? 'py-4 text-3xl' : 'py-2 text-xl'} bg-purple-600 text-white text-center font-bold animate-pulse ring-4 ring-purple-300 ring-inset`}>\r\n                    ‚ö†Ô∏è ALLERGY ALERT ‚ö†Ô∏è\r\n                </div>\r\n            )}\r\n\r\n            {aiSafety?.detected && (\r\n                <div className={`text-white p-3 border-b text-center ${tvMode ? 'text-xl' : 'text-sm'} ${aiSafety.severity === 'High' ? 'bg-red-600 animate-pulse' : 'bg-purple-600'}`}>\r\n                    <div className=\"font-black flex items-center justify-center gap-2\">\r\n                        <span>üö© AI ALERT:</span>\r\n                        <span className=\"uppercase\">{aiSafety.summary}</span>\r\n                    </div>\r\n                    {aiSafety.allergies?.length > 0 && (\r\n                        <div className=\"mt-1 flex flex-wrap justify-center gap-2\">\r\n                            {aiSafety.allergies.map((a: string) => (\r\n                                <span key={a} className=\"bg-white/20 px-2 py-0.5 rounded text-[10px] font-bold\">üö´ {a}</span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Card Header */}\r\n            <div className={`p-4 flex justify-between items-start border-b ${statusColor} ${isUpdated ? 'pt-8' : ''}`}>\r\n                <div className={`${tvMode ? 'p-6' : 'p-4'} border-b flex justify-between items-start bg-gray-50/50`}>\r\n                    <div className=\"flex flex-col\">\r\n                        <span className={`${tvMode ? 'text-2xl' : 'text-lg'} font-black text-gray-900`}>#{order.id}</span>\r\n                        <span className={`${tvMode ? 'text-lg' : 'text-xs'} text-gray-500 font-bold uppercase tracking-widest`}>{order.type}</span>\r\n                    </div>\r\n                    {/* Nutritional/Safety Icons */}\r\n                    <div className=\"flex gap-1\">\r\n                        {isJain && <span className=\"text-xl\" title=\"Jain Food\">ü•¨</span>}\r\n                        {isVegan && <span className=\"text-xl\" title=\"Vegan\">üå±</span>}\r\n                        {isAllergy && <span className=\"text-xl\" title=\"Allergy Warning\">ü•ú</span>}\r\n                        {isGlutenFree && <span className=\"text-sm bg-orange-400 text-white px-1 rounded font-black\">GF</span>}\r\n                    </div>\r\n                </div>\r\n                <div className=\"text-right flex flex-col items-end gap-2\">\r\n                    <div className={`${tvMode ? 'text-4xl' : 'text-2xl'} font-bold leading-none`}>{elapsed}m</div>\r\n                    <div className=\"flex gap-1\">\r\n                        <button\r\n                            onClick={() => handleCallWaiter('portal')}\r\n                            disabled={callingWaiter || order.waiterCalled}\r\n                            className={`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all shadow-sm ${order.waiterCalled\r\n                                ? 'bg-orange-500 text-white cursor-default'\r\n                                : 'bg-white/80 hover:bg-orange-100 text-gray-700 hover:text-orange-700 border border-black/5 active:scale-95'\r\n                                }`}\r\n                        >\r\n                            {callingWaiter ? '...' : order.waiterCalled ? 'Server ‚úì' : 'üõéÔ∏è Call'}\r\n                        </button>\r\n                        {!tvMode && (\r\n                            <button\r\n                                onClick={() => handleCallWaiter('whatsapp')}\r\n                                disabled={callingWaiter}\r\n                                className=\"px-3 py-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg text-[10px] font-black uppercase transition-all shadow-sm active:scale-95\"\r\n                                title=\"Call via WhatsApp\"\r\n                            >\r\n                                üí¨ WA\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Items */}\r\n            <div className=\"p-4 flex-1 space-y-3\">\r\n                {Array.isArray(items) && items.map((item: any, idx: number) => {\r\n                    // Station Filtering Logic\r\n                    const itemCat = getItemCategory ? getItemCategory(item.name) : '';\r\n                    const isRelevant = stationFilter === 'all' || itemCat === stationFilter;\r\n                    const opacityClass = isRelevant ? 'opacity-100' : 'opacity-20 grayscale';\r\n\r\n                    return (\r\n                        <div key={idx} className={`${tvMode ? 'p-4' : 'p-3'} bg-white border border-gray-100 rounded-xl shadow-sm flex justify-between items-center group transition-all hover:border-indigo-200`}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <span className={`${tvMode ? 'w-10 h-10 text-xl' : 'w-7 h-7 text-xs'} flex items-center justify-center bg-indigo-600 text-white font-black rounded-lg shadow-indigo-100 shadow-md`}>\r\n                                    {item.quantity}\r\n                                </span>\r\n                                <span className={`${tvMode ? 'text-xl' : 'text-sm'} font-bold text-gray-800`}>{item.name}</span>\r\n                            </div>\r\n                            {!isHistory && !tvMode && (\r\n                                <span className=\"ml-2 relative inline-block align-middle\">\r\n                                    <ItemTimer id={`${order.id}-${idx}`} />\r\n                                </span>\r\n                            )}\r\n                            {item.modifiers && item.modifiers.length > 0 && (\r\n                                <div className={`text-sm font-normal ${tvMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                                    {item.modifiers.map((m: any) => `+ ${m.name}`).join(', ')}\r\n                                </div>\r\n                            )}\r\n                            {item.note && <div className=\"text-sm font-normal text-red-600 bg-red-50 px-2 py-1 rounded mt-1 italic\">Note: {item.note}</div>}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Actions (Hidden in TV Mode mostly) */}\r\n            {!tvMode && (\r\n                <div className=\"p-4 bg-gray-50 border-t flex gap-2\">\r\n                    <button\r\n                        onClick={() => onPrintKOT(order)}\r\n                        className=\"p-3 bg-white border border-gray-200 rounded-xl text-gray-500 hover:bg-gray-100\"\r\n                        title=\"Print KOT\"\r\n                    >\r\n                        üñ®Ô∏è\r\n                    </button>\r\n\r\n                    {!isHistory && (\r\n                        <>\r\n                            <button\r\n                                onClick={() => {\r\n                                    const msg = prompt('Enter message for waiter (optional):', 'Please attend table');\r\n                                    onUpdateStatus(order.id, {\r\n                                        waiterCalled: !order.waiterCalled,\r\n                                        notes: msg ? `${order.notes || ''}\\n[CHEF]: ${msg}` : order.notes\r\n                                    });\r\n                                }}\r\n                                className={`p-3 border rounded-xl transition-all ${order.waiterCalled ? 'bg-red-100 text-red-600 border-red-200 animate-pulse' : 'bg-white text-gray-500 border-gray-200 hover:bg-gray-100'}`}\r\n                                title=\"Call Waiter\"\r\n                            >\r\n                                {order.waiterCalled ? 'üîî' : 'üîï'}\r\n                            </button>\r\n\r\n                            {order.status === 'Pending' ? (\r\n                                <button\r\n                                    onClick={() => onUpdateStatus(order.id, { status: 'Cooking' })}\r\n                                    className=\"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all\"\r\n                                >\r\n                                    Start Cooking\r\n                                </button>\r\n                            ) : order.status === 'Cooking' ? (\r\n                                <button\r\n                                    onClick={() => onUpdateStatus(order.id, { status: 'Ready' })}\r\n                                    className=\"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-200 transition-all\"\r\n                                >\r\n                                    Mark Ready\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => onUpdateStatus(order.id, { status: 'Completed' })}\r\n                                    className=\"flex-1 py-3 bg-gray-800 hover:bg-gray-900 text-white rounded-xl font-bold shadow-lg transition-all\"\r\n                                >\r\n                                    Complete & Client Serve\r\n                                </button>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\nimport React, { useState } from 'react';\r\nimport { MenuItem } from '../../lib/db-hooks';\r\n\r\ninterface ItemViewProps {\r\n    items: { [key: string]: number }; // Keep for legacy props compatibility if needed, though we will ignore it for stock view\r\n    menuItems: MenuItem[];\r\n    onUpdateItem: (id: string, updates: Partial<MenuItem>) => void;\r\n    categories: any[];\r\n}\r\n\r\nexport default function ItemView({ menuItems, onUpdateItem, categories }: ItemViewProps) {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const filteredItems = menuItems.filter(item =>\r\n        item.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in\">\r\n            {/* Search */}\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Search Item to 86...\"\r\n                className=\"w-full p-4 rounded-2xl border border-gray-200 text-lg shadow-sm focus:ring-2 focus:ring-orange-500 outline-none\"\r\n                value={searchTerm}\r\n                onChange={e => setSearchTerm(e.target.value)}\r\n            />\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n                {filteredItems.map(item => (\r\n                    <div\r\n                        key={item.id}\r\n                        className={`p-4 rounded-xl border-2 flex justify-between items-center transition-all ${item.status === 'OutOfStock' ? 'bg-red-50 border-red-200 opacity-75' :\r\n                                item.status === 'LowStock' ? 'bg-yellow-50 border-yellow-200' :\r\n                                    'bg-white border-gray-100 hover:border-gray-300'\r\n                            }`}\r\n                    >\r\n                        <div>\r\n                            <h3 className=\"font-bold text-gray-800\">{item.name}</h3>\r\n                            <p className={`text-xs font-bold uppercase ${item.status === 'OutOfStock' ? 'text-red-500' :\r\n                                    item.status === 'LowStock' ? 'text-yellow-600' :\r\n                                        'text-green-500'\r\n                                }`}>\r\n                                {item.status === 'OutOfStock' ? 'SOLD OUT' : item.status === 'LowStock' ? 'LOW STOCK' : 'IN STOCK'}\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-1\">\r\n                            {/* In Stock Button */}\r\n                            <button\r\n                                onClick={() => onUpdateItem(item.id, { status: 'Active' })}\r\n                                className={`p-2 rounded-lg text-xs font-bold ${item.status === 'Active' ? 'bg-green-500 text-white shadow-md' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}\r\n                            >\r\n                                ‚úÖ\r\n                            </button>\r\n\r\n                            {/* Low Stock Button */}\r\n                            <button\r\n                                onClick={() => onUpdateItem(item.id, { status: 'LowStock' })}\r\n                                className={`p-2 rounded-lg text-xs font-bold ${item.status === 'LowStock' ? 'bg-yellow-400 text-white shadow-md' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}\r\n                            >\r\n                                ‚ö†Ô∏è\r\n                            </button>\r\n\r\n                            {/* 86 Button */}\r\n                            <button\r\n                                onClick={() => onUpdateItem(item.id, { status: 'OutOfStock' })}\r\n                                className={`p-2 rounded-lg text-xs font-bold ${item.status === 'OutOfStock' ? 'bg-red-500 text-white shadow-md' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}\r\n                            >\r\n                                ‚õî\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\n\r\ninterface PrepTask {\r\n    id: string;\r\n    text: string;\r\n    completed: boolean;\r\n}\r\n\r\nconst DEFAULT_TASKS = [\r\n    { id: '1', text: 'Chop Onions (5kg)', completed: false },\r\n    { id: '2', text: 'Chop Tomatoes (5kg)', completed: false },\r\n    { id: '3', text: 'Make Ginger Garlic Paste', completed: false },\r\n    { id: '4', text: 'Boil Potatoes (10kg)', completed: false },\r\n    { id: '5', text: 'Check Fryer Oil Level', completed: false },\r\n    { id: '6', text: 'Refresh Chutneys', completed: false },\r\n    { id: '7', text: 'Clean Workstations', completed: false },\r\n];\r\n\r\nexport default function PrepView() {\r\n    const [tasks, setTasks] = useState<PrepTask[]>([]);\r\n    const [newTask, setNewTask] = useState('');\r\n    const [isLoadingAi, setIsLoadingAi] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const saved = localStorage.getItem('chef_prep_list');\r\n        if (saved) {\r\n            setTasks(JSON.parse(saved));\r\n        } else {\r\n            setTasks(DEFAULT_TASKS);\r\n        }\r\n    }, []);\r\n\r\n    const saveTasks = (newTasks: PrepTask[]) => {\r\n        setTasks(newTasks);\r\n        localStorage.setItem('chef_prep_list', JSON.stringify(newTasks));\r\n    };\r\n\r\n    const toggleTask = (id: string) => {\r\n        const newTasks = tasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t);\r\n        saveTasks(newTasks);\r\n    };\r\n\r\n    const addTask = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newTask.trim()) return;\r\n        const task: PrepTask = {\r\n            id: Date.now().toString(),\r\n            text: newTask,\r\n            completed: false\r\n        };\r\n        saveTasks([...tasks, task]);\r\n        setNewTask('');\r\n    };\r\n\r\n    const deleteTask = (id: string) => {\r\n        if (confirm('Remove this task?')) {\r\n            saveTasks(tasks.filter(t => t.id !== id));\r\n        }\r\n    };\r\n\r\n    const resetDaily = () => {\r\n        if (confirm('Reset all tasks for a new day?')) {\r\n            const reset = tasks.map(t => ({ ...t, completed: false }));\r\n            saveTasks(reset);\r\n        }\r\n    };\r\n\r\n    const completedCount = tasks.filter(t => t.completed).length;\r\n    const progress = tasks.length > 0 ? Math.round((completedCount / tasks.length) * 100) : 0;\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto p-4 animate-in fade-in\">\r\n            {/* Header / Stats */}\r\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border mb-6\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-800\">üìã Daily Mise-en-place</h2>\r\n                        <p className=\"text-gray-500\">Get the kitchen ready for service!</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <div className=\"text-3xl font-bold text-[var(--brand-primary)]\">{progress}%</div>\r\n                        <div className=\"text-xs text-gray-400 font-bold uppercase\">Ready</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Progress Bar */}\r\n                <div className=\"w-full h-4 bg-gray-100 rounded-full overflow-hidden mb-4\">\r\n                    <div\r\n                        className=\"h-full bg-[var(--brand-primary)] transition-all duration-500 ease-out\"\r\n                        style={{ width: `${progress}%` }}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex gap-4 items-center\">\r\n                    <button\r\n                        onClick={async () => {\r\n                            setIsLoadingAi(true);\r\n                            try {\r\n                                const res = await fetch('/api/kitchen/prep');\r\n                                if (res.ok) {\r\n                                    const suggestions = await res.json();\r\n                                    if (Array.isArray(suggestions)) {\r\n                                        const aiTasks = suggestions.map((s: any) => ({\r\n                                            id: `ai-${Date.now()}-${Math.random()}`,\r\n                                            text: `‚ú® AI: ${s.task} (${s.qty}) - ${s.reason}`,\r\n                                            completed: false\r\n                                        }));\r\n                                        saveTasks([...tasks, ...aiTasks]);\r\n                                    }\r\n                                }\r\n                            } catch (e) {\r\n                                console.error(e);\r\n                            } finally {\r\n                                setIsLoadingAi(false);\r\n                            }\r\n                        }}\r\n                        className=\"text-sm font-bold bg-purple-50 text-purple-700 hover:bg-purple-100 px-4 py-2 rounded-lg flex items-center gap-2 border border-purple-100 shadow-sm disabled:opacity-50\"\r\n                        disabled={isLoadingAi}\r\n                    >\r\n                        {isLoadingAi ? 'üîÆ Forecasting...' : 'ü™Ñ AI Suggestions'}\r\n                    </button>\r\n                    <button\r\n                        onClick={resetDaily}\r\n                        className=\"text-sm font-bold text-[var(--brand-primary)] hover:bg-orange-50 px-3 py-1 rounded\"\r\n                    >\r\n                        üîÑ Reset for New Day\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Task List */}\r\n            <div className=\"space-y-3\">\r\n                {tasks.map(task => (\r\n                    <div\r\n                        key={task.id}\r\n                        className={`flex items-center gap-4 p-4 rounded-xl border transition-all ${task.completed\r\n                            ? 'bg-green-50 border-green-200 opacity-75'\r\n                            : 'bg-white border-gray-200 shadow-sm hover:shadow-md'\r\n                            }`}\r\n                    >\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={task.completed}\r\n                            onChange={() => toggleTask(task.id)}\r\n                            className=\"w-6 h-6 rounded border-gray-300 text-green-600 focus:ring-green-500 cursor-pointer\"\r\n                        />\r\n                        <span className={`flex-1 text-lg ${task.completed ? 'line-through text-gray-500' : 'font-bold text-gray-800'}`}>\r\n                            {task.text}\r\n                        </span>\r\n                        <button\r\n                            onClick={() => deleteTask(task.id)}\r\n                            className=\"p-2 text-gray-400 hover:text-red-500 rounded-lg hover:bg-red-50 transition-colors\"\r\n                        >\r\n                            ‚úï\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n\r\n                {/* Add New */}\r\n                <form onSubmit={addTask} className=\"flex gap-2 mt-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newTask}\r\n                        onChange={(e) => setNewTask(e.target.value)}\r\n                        placeholder=\"Add new prep task...\"\r\n                        className=\"flex-1 p-4 rounded-xl border border-gray-200 focus:border-[var(--brand-primary)] outline-none shadow-sm\"\r\n                    />\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={!newTask.trim()}\r\n                        className=\"px-6 bg-gray-800 text-white font-bold rounded-xl hover:bg-black disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        + Add\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\nimport React, { useState, useEffect } from 'react';\r\n\r\ninterface Log {\r\n    id: string;\r\n    content: string;\r\n    author: string;\r\n    type: 'Info' | 'Urgent';\r\n    createdAt: string;\r\n}\r\n\r\nexport default function ShiftLogView() {\r\n    const [logs, setLogs] = useState<Log[]>([]);\r\n    const [newLog, setNewLog] = useState('');\r\n    const [logType, setLogType] = useState<'Info' | 'Urgent'>('Info');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchLogs = async () => {\r\n        try {\r\n            const res = await fetch('/api/kitchen/logs');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setLogs(data);\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchLogs();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newLog.trim()) return;\r\n\r\n        try {\r\n            const res = await fetch('/api/kitchen/logs', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    content: newLog,\r\n                    type: logType,\r\n                    author: 'Staff' // Could be dynamic if we had auth context\r\n                })\r\n            });\r\n\r\n            if (res.ok) {\r\n                setNewLog('');\r\n                fetchLogs();\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto h-full flex flex-col gap-6 animate-in\">\r\n            {/* Header */}\r\n            <div className=\"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm\">\r\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">üìì Shift Handoff Log</h2>\r\n\r\n                <form onSubmit={handleSubmit} className=\"flex gap-4\">\r\n                    <div className=\"flex-1\">\r\n                        <textarea\r\n                            value={newLog}\r\n                            onChange={(e) => setNewLog(e.target.value)}\r\n                            placeholder=\"Write a note for next shift...\"\r\n                            className=\"w-full p-4 bg-gray-50 rounded-2xl border border-gray-200 focus:ring-2 focus:ring-[var(--brand-primary)] outline-none resize-none h-24\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setLogType('Info')}\r\n                            className={`px-4 py-2 rounded-xl text-sm font-bold transition-all ${logType === 'Info' ? 'bg-blue-100 text-blue-600 ring-2 ring-blue-400' : 'bg-gray-100 text-gray-400'}`}\r\n                        >\r\n                            ‚ÑπÔ∏è Info\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setLogType('Urgent')}\r\n                            className={`px-4 py-2 rounded-xl text-sm font-bold transition-all ${logType === 'Urgent' ? 'bg-red-100 text-red-600 ring-2 ring-red-400' : 'bg-gray-100 text-gray-400'}`}\r\n                        >\r\n                            üö® Urgent\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"mt-auto px-6 py-2 bg-[var(--brand-primary)] text-white font-bold rounded-xl hover:shadow-lg transition-all\"\r\n                        >\r\n                            Post Note\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n            {/* Logs List */}\r\n            <div className=\"flex-1 overflow-y-auto space-y-4 pr-2\">\r\n                {logs.length === 0 && !loading && (\r\n                    <div className=\"text-center text-gray-400 py-12\">\r\n                        <div className=\"text-4xl mb-2\">üìù</div>\r\n                        <p>No logs yet. Start the conversation!</p>\r\n                    </div>\r\n                )}\r\n\r\n                {logs.map(log => (\r\n                    <div\r\n                        key={log.id}\r\n                        className={`p-6 rounded-2xl border-l-4 shadow-sm bg-white ${log.type === 'Urgent' ? 'border-l-red-500 bg-red-50/50' : 'border-l-blue-500'}`}\r\n                    >\r\n                        <div className=\"flex justify-between items-start mb-2\">\r\n                            <span className={`text-xs font-bold uppercase tracking-wider px-2 py-1 rounded-lg ${log.type === 'Urgent' ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>\r\n                                {log.type}\r\n                            </span>\r\n                            <span className=\"text-xs text-gray-400\">\r\n                                {new Date(log.createdAt).toLocaleString()}\r\n                            </span>\r\n                        </div>\r\n                        <p className=\"text-gray-800 text-lg whitespace-pre-wrap\">{log.content}</p>\r\n                        <div className=\"mt-2 text-xs font-bold text-gray-400\">\r\n                            - {log.author}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}