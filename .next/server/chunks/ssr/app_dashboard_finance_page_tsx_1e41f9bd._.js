module.exports=[88570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60824);function e(){let[a,e]=(0,c.useState)("closing"),[f,g]=(0,c.useState)(new Date().toISOString().split("T")[0]),{expenses:h,loading:i,addExpense:j,deleteExpense:k}=(0,d.useDbFinance)(f),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)({category:"Ingredients",description:"",amount:""});(0,c.useEffect)(()=>{(async()=>{o(!0);try{let a=new Date(f);a.setHours(0,0,0,0);let b=new Date(f);b.setHours(23,59,59,999);let c=await fetch(`/api/orders?start=${a.toISOString()}&end=${b.toISOString()}`,{cache:"no-store"});if(c.ok){let a=await c.json();m(a)}}catch(a){console.error(a)}finally{o(!1)}})()},[f]);let r=l.filter(a=>"Cancelled"!==a.status),s=r.reduce((a,b)=>a+b.total,0),t=r.filter(a=>"Cash"===a.paymentMethod&&"Paid"===a.paymentStatus).reduce((a,b)=>a+b.total,0),u=r.filter(a=>"Cash"!==a.paymentMethod&&"Paid"===a.paymentStatus).reduce((a,b)=>a+b.total,0),v=h.reduce((a,b)=>a+b.amount,0),w=t-v,x=Math.round(.05*s/1.05),y=s-x,z=async()=>{p.description&&p.amount&&await j({date:f,category:p.category,description:p.description,amount:parseFloat(p.amount)})&&q({category:"Ingredients",description:"",amount:""})},A=async a=>{confirm("Delete this expense?")&&await k(a)};return n||i?(0,b.jsx)("div",{className:"p-8 text-center text-gray-400",children:"Loading finance data..."}):(0,b.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:"ðŸ’° Finance Management"}),(0,b.jsx)("p",{className:"text-[var(--text-muted)]",children:"Cash closing, expenses & tax reports"})]}),(0,b.jsx)("input",{type:"date",value:f,onChange:a=>g(a.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]"})]}),(0,b.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"closing",label:"ðŸ“Š Daily Closing"},{id:"expenses",label:"ðŸ’¸ Expenses"},{id:"gst",label:"ðŸ“„ GST Report"}].map(c=>(0,b.jsx)("button",{onClick:()=>e(c.id),className:`px-6 py-3 rounded-xl font-medium transition-all whitespace-nowrap ${a===c.id?"bg-[var(--brand-dark)] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:c.label},c.id))}),"closing"===a&&(0,b.jsxs)("div",{className:"space-y-6 animate-in",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-blue-50 border border-blue-100",children:[(0,b.jsx)("div",{className:"text-xs text-blue-600 mb-1",children:"Total Sales"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:["â‚¹",s]}),(0,b.jsxs)("div",{className:"text-xs text-blue-500",children:[r.length," orders"]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-green-50 border border-green-100",children:[(0,b.jsx)("div",{className:"text-xs text-green-600 mb-1",children:"ðŸ’µ Cash In"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:["â‚¹",t]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-purple-50 border border-purple-100",children:[(0,b.jsx)("div",{className:"text-xs text-purple-600 mb-1",children:"ðŸ’³ Online"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:["â‚¹",u]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-red-50 border border-red-100",children:[(0,b.jsx)("div",{className:"text-xs text-red-600 mb-1",children:"ðŸ’¸ Expenses"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-red-700",children:["â‚¹",v]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-yellow-50 border border-yellow-100",children:[(0,b.jsx)("div",{className:"text-xs text-yellow-600 mb-1",children:"ðŸ¦ Net Cash"}),(0,b.jsxs)("div",{className:`text-2xl font-bold ${w>=0?"text-green-700":"text-red-700"}`,children:["â‚¹",w]})]})]}),(0,b.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Day Closing Report"}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,b.jsxs)("p",{className:"text-gray-600",children:["Generate a report text file for ",f,"."]}),(0,b.jsx)("button",{onClick:()=>{let a=new Blob([`Day Closing Report - ${f}
--------------------------------
Total Sales:    â‚¹${s}
Orders Count:   ${r.length}
--------------------------------
Cash Sales:     â‚¹${t}
Online Sales:   â‚¹${u}
Total Expenses: â‚¹${v}
--------------------------------
NET CASH IN HAND: â‚¹${w}
--------------------------------`],{type:"text/plain"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`closing_report_${f}.txt`,c.click()},className:"px-6 py-3 bg-[var(--brand-primary)] text-white rounded-xl font-bold hover:bg-orange-600 transition-colors",children:"ðŸ”’ Generate Report"})]})]})]}),"expenses"===a&&(0,b.jsxs)("div",{className:"space-y-6 animate-in",children:[(0,b.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Add Expense"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("select",{value:p.category,onChange:a=>q({...p,category:a.target.value}),className:"px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]",children:[(0,b.jsx)("option",{children:"Ingredients"}),(0,b.jsx)("option",{children:"Salary"}),(0,b.jsx)("option",{children:"Rent"}),(0,b.jsx)("option",{children:"Utilities"}),(0,b.jsx)("option",{children:"Maintenance"}),(0,b.jsx)("option",{children:"Marketing"}),(0,b.jsx)("option",{children:"Other"})]}),(0,b.jsx)("input",{placeholder:"Description",value:p.description,onChange:a=>q({...p,description:a.target.value}),className:"px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]"}),(0,b.jsx)("input",{type:"number",placeholder:"Amount â‚¹",value:p.amount,onChange:a=>q({...p,amount:a.target.value}),className:"px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]"}),(0,b.jsx)("button",{onClick:z,className:"px-6 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors",children:"+ Add Expense"})]})]}),(0,b.jsxs)("div",{className:"glass-card rounded-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[(0,b.jsxs)("h3",{className:"font-bold",children:["Expenses for ",f]}),(0,b.jsxs)("span",{className:"text-red-600 font-bold",children:["Total: â‚¹",v]})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:0===h.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-400",children:"No expenses for this day"}):h.map(a=>(0,b.jsxs)("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded mr-2",children:a.category}),(0,b.jsx)("span",{className:"font-medium",children:a.description})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"font-bold text-red-600",children:["â‚¹",a.amount]}),(0,b.jsx)("button",{onClick:()=>A(a.id),className:"text-gray-400 hover:text-red-500",children:"ðŸ—‘ï¸"})]})]},a.id))})]})]}),"gst"===a&&(0,b.jsxs)("div",{className:"space-y-6 animate-in",children:[(0,b.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,b.jsxs)("h3",{className:"font-bold text-lg mb-4",children:["GST Summary for ",f]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[(0,b.jsx)("div",{className:"text-sm text-blue-600 mb-1",children:"Total Sales (incl. GST)"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-blue-700",children:["â‚¹",s]})]}),(0,b.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100",children:[(0,b.jsx)("div",{className:"text-sm text-green-600 mb-1",children:"Base Amount"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-green-700",children:["â‚¹",y]})]}),(0,b.jsxs)("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100",children:[(0,b.jsx)("div",{className:"text-sm text-orange-600 mb-1",children:"GST Amount (5%)"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-orange-700",children:["â‚¹",x]})]})]})]}),(0,b.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-4",children:"GST Breakup (CGST + SGST)"}),(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4 text-left",children:"Description"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"Rate"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"Amount"})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"p-4",children:"Taxable Value"}),(0,b.jsx)("td",{className:"p-4 text-right",children:"-"}),(0,b.jsxs)("td",{className:"p-4 text-right font-medium",children:["â‚¹",y]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"p-4",children:"CGST"}),(0,b.jsx)("td",{className:"p-4 text-right",children:"2.5%"}),(0,b.jsxs)("td",{className:"p-4 text-right font-medium",children:["â‚¹",Math.round(x/2)]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"p-4",children:"SGST"}),(0,b.jsx)("td",{className:"p-4 text-right",children:"2.5%"}),(0,b.jsxs)("td",{className:"p-4 text-right font-medium",children:["â‚¹",Math.round(x/2)]})]}),(0,b.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,b.jsx)("td",{className:"p-4",children:"Total Tax"}),(0,b.jsx)("td",{className:"p-4 text-right",children:"5%"}),(0,b.jsxs)("td",{className:"p-4 text-right",children:["â‚¹",x]})]})]})]})]}),(0,b.jsx)("button",{onClick:()=>{let a=new Blob([`GST Report - ${f}

Total Sales: â‚¹${s}
Base Amount: â‚¹${y}
CGST (2.5%): â‚¹${Math.round(x/2)}
SGST (2.5%): â‚¹${Math.round(x/2)}
Total GST: â‚¹${x}`],{type:"text/plain"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`gst_report_${f}.txt`,c.click()},className:"w-full md:w-auto px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:"ðŸ“¥ Download GST Report"})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_dashboard_finance_page_tsx_1e41f9bd._.js.map