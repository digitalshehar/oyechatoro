{"version":3,"sources":["../../../../app/dashboard/pos/page.tsx","../../../../app/components/pos/ModifierModal.tsx","../../../../app/components/pos/CheckoutModal.tsx","../../../../app/components/pos/SalesModal.tsx","../../../../app/components/pos/OnlineOrderModal.tsx","../../../../app/components/pos/RecentOrdersModal.tsx","../../../../app/components/pos/CustomerSearchModal.tsx"],"sourcesContent":["'use client';\r\nimport React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { useDbMenu, useDbOrders, useDbCustomers, MenuItem, Order, Customer } from '../../lib/db-hooks';\r\nimport { useDbSettings as useSettings } from '../../lib/db-hooks';\r\nimport ModifierModal from '../../components/pos/ModifierModal';\r\nimport CheckoutModal from '../../components/pos/CheckoutModal';\r\nimport SalesModal from '../../components/pos/SalesModal';\r\nimport OnlineOrderModal from '../../components/pos/OnlineOrderModal';\r\nimport RecentOrdersModal from '../../components/pos/RecentOrdersModal';\r\nimport CustomerSearchModal from '../../components/pos/CustomerSearchModal';\r\n\r\ninterface CartItem {\r\n    id: string;\r\n    menuItemId: string; // Original database ID\r\n    name: string;\r\n    price: number;\r\n    quantity: number;\r\n    veg: boolean;\r\n    image?: string;\r\n    note?: string; // Special instructions\r\n    modifiers?: { name: string; price: number }[];\r\n}\r\n\r\ninterface HeldOrder {\r\n    id: string;\r\n    name: string;\r\n    cart: CartItem[];\r\n    tableNumber: string;\r\n    orderType: 'Dine In' | 'Takeaway' | 'Delivery';\r\n    timestamp: number;\r\n}\r\n\r\n// Customer interface imported from db-hooks\r\n\r\ninterface TodaySales {\r\n    totalOrders: number;\r\n    totalRevenue: number;\r\n    cashAmount: number;\r\n    upiAmount: number;\r\n}\r\n\r\nconst STAFF_LIST = ['Rahul', 'Amit', 'Vijay', 'Priya', 'Neha'];\r\nconst PARCEL_CHARGE = 20;\r\nconst TOTAL_TABLES = 10; // Configure number of tables\r\n\r\ntype TableStatus = 'free' | 'occupied' | 'billing';\r\n\r\nexport default function POSPage() {\r\n    const { categories, items } = useDbMenu();\r\n    const { orders: dbOrders, createOrder: createDbOrder, updateOrder } = useDbOrders();\r\n    const { customers, fetchCustomers, upsertCustomer: upsertDbCustomer } = useDbCustomers();\r\n    const { settings } = useSettings();\r\n    const [cart, setCart] = useState<CartItem[]>([]);\r\n    const [activeCategory, setActiveCategory] = useState('all');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [mounted, setMounted] = useState(false);\r\n    const [orderType, setOrderType] = useState<'Dine In' | 'Takeaway' | 'Delivery'>('Dine In');\r\n    const [tableNumber, setTableNumber] = useState('');\r\n    const [customerName, setCustomerName] = useState('');\r\n    const [customerPhone, setCustomerPhone] = useState('');\r\n    const [showCheckout, setShowCheckout] = useState(false);\r\n    const [paymentMethod, setPaymentMethod] = useState<'Cash' | 'Online'>('Cash');\r\n    const [showSuccess, setShowSuccess] = useState(false);\r\n\r\n    // Existing Features State\r\n    const [discountType, setDiscountType] = useState<'percent' | 'flat'>('percent');\r\n    const [discountValue, setDiscountValue] = useState(0);\r\n    const [heldOrders, setHeldOrders] = useState<HeldOrder[]>([]);\r\n    const [showHeldOrders, setShowHeldOrders] = useState(false);\r\n    const [showSplitBill, setShowSplitBill] = useState(false);\r\n    const [splitPayments, setSplitPayments] = useState<{ method: string; amount: number }[]>([]);\r\n    // const [customers, setCustomers] = useState<Customer[]>([]); // Using DB hook now\r\n    const [showCustomerSearch, setShowCustomerSearch] = useState(false);\r\n    const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\r\n    const [showQuickKeys, setShowQuickKeys] = useState(true);\r\n    const [quickKeyItems, setQuickKeyItems] = useState<string[]>([]);\r\n\r\n    // NEW: Enhanced Features State\r\n    const [charges, setCharges] = useState({ packing: 0, delivery: 0 });\r\n    const [tipAmount, setTipAmount] = useState(0);\r\n    const [orderNotes, setOrderNotes] = useState('');\r\n    const [selectedStaff, setSelectedStaff] = useState('');\r\n    const [amountTendered, setAmountTendered] = useState(0);\r\n    const [showLastOrders, setShowLastOrders] = useState(false);\r\n    const [todaySales, setTodaySales] = useState<TodaySales>({ totalOrders: 0, totalRevenue: 0, cashAmount: 0, upiAmount: 0 });\r\n    const [lastOrders, setLastOrders] = useState<Order[]>([]);\r\n    const [showSalesModal, setShowSalesModal] = useState(false);\r\n    const [showRecentModal, setShowRecentModal] = useState(false);\r\n    const [activeTab, setActiveTab] = useState<'menu' | 'cart'>('menu'); // New Mobile Tab State\r\n    const [editingNoteId, setEditingNoteId] = useState<string | null>(null);\r\n    const [showConfirmClear, setShowConfirmClear] = useState(false);\r\n    const [kotPrinted, setKotPrinted] = useState(false);\r\n    const [viewMode, setViewMode] = useState<'floor' | 'pos'>('floor'); // Floor View toggle\r\n    const [showOnlineModal, setShowOnlineModal] = useState(false); // Online order modal\r\n    const [onlineCustomer, setOnlineCustomer] = useState({ name: '', phone: '', address: '' });\r\n\r\n    // Modifiers State\r\n    const [showModifierModal, setShowModifierModal] = useState(false);\r\n    const [selectedItemForMods, setSelectedItemForMods] = useState<MenuItem | null>(null);\r\n\r\n    // Add to Order Feature State\r\n    const [activeOrderId, setActiveOrderId] = useState<number | null>(null);\r\n    const [existingItems, setExistingItems] = useState<any[]>([]);\r\n    const [existingTotal, setExistingTotal] = useState(0);\r\n\r\n    const searchRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Load saved data\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        if (typeof window !== 'undefined') {\r\n            const savedHeldOrders = localStorage.getItem('pos_held_orders');\r\n            if (savedHeldOrders) setHeldOrders(JSON.parse(savedHeldOrders));\r\n\r\n            // Removed localStorage customers load\r\n\r\n            const savedQuickKeys = localStorage.getItem('pos_quick_keys');\r\n            if (savedQuickKeys) setQuickKeyItems(JSON.parse(savedQuickKeys));\r\n\r\n            const savedStaff = localStorage.getItem('pos_selected_staff'); // Load Staff\r\n            if (savedStaff) setSelectedStaff(savedStaff);\r\n        }\r\n    }, []);\r\n\r\n    // Save held orders\r\n    useEffect(() => {\r\n        if (mounted) {\r\n            localStorage.setItem('pos_held_orders', JSON.stringify(heldOrders));\r\n        }\r\n    }, [heldOrders, mounted]);\r\n\r\n    // Keyboard shortcuts\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            // F1 - Focus Search\r\n            if (e.key === 'F1') {\r\n                e.preventDefault();\r\n                searchRef.current?.focus();\r\n            }\r\n            // F2 - Hold Order\r\n            if (e.key === 'F2') {\r\n                e.preventDefault();\r\n                holdCurrentOrder();\r\n            }\r\n            // F3 - Show Held Orders\r\n            if (e.key === 'F3') {\r\n                e.preventDefault();\r\n                setShowHeldOrders(true);\r\n            }\r\n            // F4 - Clear Cart\r\n            if (e.key === 'F4') {\r\n                e.preventDefault();\r\n                clearCart();\r\n            }\r\n            // F5 - Toggle Quick Keys\r\n            if (e.key === 'F5') {\r\n                e.preventDefault();\r\n                setShowQuickKeys(prev => !prev);\r\n            }\r\n            // F8 - Proceed to Payment\r\n            if (e.key === 'F8' && cart.length > 0) {\r\n                e.preventDefault();\r\n                setShowCheckout(true);\r\n            }\r\n            // F12 - Print Last Receipt\r\n            if (e.key === 'F12') {\r\n                e.preventDefault();\r\n                printLastReceipt();\r\n            }\r\n            // Escape - Close modals\r\n            if (e.key === 'Escape') {\r\n                setShowCheckout(false);\r\n                setShowHeldOrders(false);\r\n                setShowSplitBill(false);\r\n                setShowCustomerSearch(false);\r\n                setShowModifierModal(false);\r\n            }\r\n            // Number keys 1-9 for quick add (when not in input)\r\n            if (e.key >= '1' && e.key <= '9' && !(e.target instanceof HTMLInputElement)) {\r\n                const index = parseInt(e.key) - 1;\r\n                if (quickKeyItems[index]) {\r\n                    const item = items.find(i => i.id === quickKeyItems[index]);\r\n                    if (item) addToCart(item);\r\n                }\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [cart, items, quickKeyItems]);\r\n\r\n    // Refresh Stats & Recent Orders\r\n    const refreshData = () => {\r\n        // Calculate daily stats from dbOrders\r\n        const now = new Date();\r\n        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\r\n        const todayOrders = dbOrders.filter(o =>\r\n            new Date(o.createdAt) >= today &&\r\n            o.status !== 'Cancelled'\r\n        );\r\n\r\n        const stats = {\r\n            totalOrders: todayOrders.length,\r\n            totalSales: todayOrders.reduce((sum, o) => sum + Number(o.total), 0),\r\n            cashSales: todayOrders.filter(o => o.paymentMethod === 'Cash').reduce((sum, o) => sum + Number(o.total), 0),\r\n            onlineSales: todayOrders.filter(o => o.paymentMethod === 'Online' || o.paymentMethod === 'UPI' || o.paymentMethod === 'Card').reduce((sum, o) => sum + Number(o.total), 0),\r\n        };\r\n\r\n        setTodaySales({\r\n            totalOrders: stats.totalOrders,\r\n            totalRevenue: stats.totalSales,\r\n            cashAmount: stats.cashSales,\r\n            upiAmount: stats.onlineSales\r\n        });\r\n\r\n        // Sort by date desc\r\n        const sortedOrders = [...dbOrders].sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\r\n        setLastOrders(sortedOrders.slice(0, 10)); // Get last 10\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (showSalesModal || showRecentModal) {\r\n            refreshData();\r\n        }\r\n    }, [showSalesModal, showRecentModal]);\r\n\r\n    // Get table statuses from active orders\r\n    const getTableStatus = useCallback((tableNum: string): { status: TableStatus; order?: Order } => {\r\n        const activeOrders = dbOrders.filter(\r\n            o => o.type === 'DineIn' && // Note: DB uses 'DineIn', POS state used 'Dine In'\r\n                o.table === tableNum &&\r\n                o.status !== 'Completed' &&\r\n                o.status !== 'Cancelled'\r\n        );\r\n        if (activeOrders.length === 0) return { status: 'free' };\r\n        const order = activeOrders[0];\r\n        if (order.status === 'Ready') return { status: 'billing', order };\r\n        return { status: 'occupied', order };\r\n    }, [dbOrders]);\r\n\r\n    // Handle table click\r\n    const handleTableClick = (tableNum: string) => {\r\n        const { status, order } = getTableStatus(tableNum);\r\n        setTableNumber(tableNum);\r\n        setOrderType('Dine In');\r\n\r\n        if (status === 'occupied' && order) {\r\n            // Load Active Order for \"Add to Order\"\r\n            setActiveOrderId(order.id);\r\n            setExistingItems(order.items);\r\n            setExistingTotal(order.total);\r\n            setCustomerName(order.customer);\r\n            setCustomerPhone(order.mobile || '');\r\n            if (order.mobile) fetchCustomers(order.mobile); // Try to load customer details\r\n            setCart([]); // Start with empty NEW cart\r\n        } else {\r\n            // New Order\r\n            setActiveOrderId(null);\r\n            setExistingItems([]);\r\n            setExistingTotal(0);\r\n            setCart([]);\r\n            setCustomerName('');\r\n            setCustomerPhone('');\r\n            setSelectedCustomer(null);\r\n        }\r\n\r\n        setViewMode('pos');\r\n        setActiveTab('menu');\r\n    };\r\n\r\n    const activeItems = useMemo(() => {\r\n        return items.filter(item => item.status === 'Active');\r\n    }, [items]);\r\n\r\n    const filteredItems = useMemo(() => {\r\n        let result = activeItems;\r\n        if (activeCategory !== 'all') {\r\n            result = result.filter(item => item.categoryId === activeCategory);\r\n        }\r\n        if (searchQuery) {\r\n            const lowerQuery = searchQuery.toLowerCase();\r\n            result = result.filter(item =>\r\n                item.name.toLowerCase().includes(lowerQuery) ||\r\n                (item.description || '').toLowerCase().includes(lowerQuery)\r\n            );\r\n        }\r\n        return result.sort((a, b) => a.price - b.price);\r\n    }, [activeItems, activeCategory, searchQuery]);\r\n\r\n    const addToCart = useCallback((item: MenuItem) => {\r\n        // Check for modifiers\r\n        if (item.modifiers && item.modifiers.length > 0) {\r\n            setSelectedItemForMods(item);\r\n            setShowModifierModal(true);\r\n            return;\r\n        }\r\n\r\n        // Direct Add\r\n        addItemToCart(item, [], '');\r\n    }, []);\r\n\r\n    const addItemToCart = (item: MenuItem, modifiers: { name: string; price: number }[], note: string) => {\r\n        const modifierTotal = modifiers.reduce((sum, m) => sum + m.price, 0);\r\n        const finalPrice = item.price + modifierTotal;\r\n\r\n        // Create a unique ID based on modifiers to separate same items with different mods\r\n        const cartItemId = modifiers.length > 0\r\n            ? `${item.id}-${Date.now()}`\r\n            : item.id;\r\n\r\n        setCart(prev => {\r\n            // Only merge if exactly same item (same modifiers)\r\n            if (modifiers.length === 0) {\r\n                const existing = prev.find(i => i.id === item.id && (!i.modifiers || i.modifiers.length === 0));\r\n                if (existing) {\r\n                    return prev.map(i => i.id === item.id && (!i.modifiers || i.modifiers.length === 0) ? { ...i, quantity: i.quantity + 1 } : i);\r\n                }\r\n            }\r\n\r\n            return [...prev, {\r\n                id: cartItemId,\r\n                menuItemId: item.id,\r\n                name: item.name,\r\n                price: finalPrice,\r\n                quantity: 1,\r\n                veg: item.veg,\r\n                image: item.image,\r\n                modifiers,\r\n                note\r\n            }];\r\n        });\r\n    };\r\n\r\n    const handleModifierConfirm = (modifiers: { name: string; price: number }[], note: string) => {\r\n        if (selectedItemForMods) {\r\n            addItemToCart(selectedItemForMods, modifiers, note);\r\n            setShowModifierModal(false);\r\n            setSelectedItemForMods(null);\r\n        }\r\n    };\r\n\r\n    const removeFromCart = (itemId: string) => {\r\n        setCart(prev => {\r\n            const existing = prev.find(i => i.id === itemId);\r\n            if (existing && existing.quantity > 1) {\r\n                return prev.map(i => i.id === itemId ? { ...i, quantity: i.quantity - 1 } : i);\r\n            }\r\n            return prev.filter(i => i.id !== itemId);\r\n        });\r\n    };\r\n\r\n    const clearCart = () => {\r\n        if (cart.length > 0 && !showConfirmClear) {\r\n            setShowConfirmClear(true);\r\n            return;\r\n        }\r\n        setCart([]);\r\n        // Don't reset Active Order here, only cart. \r\n        // If user wants to exit active order mode, they go back to floor or click \"New Order\" (helper needed)\r\n        // But for consistency, let's reset if they are clearing everything or if checking out.\r\n        // Actually, \"Clear Cart\" usually means \"Clear Current Selection\". \r\n        // To Exit \"Add Mode\", we should have a \"Cancel / Back\" button.\r\n        // For now, let's keep activeOrder state until they leave the POS view or checkout.\r\n\r\n        setDiscountValue(0);\r\n        setDiscountValue(0);\r\n        setSelectedCustomer(null);\r\n        setCharges({ packing: 0, delivery: 0 });\r\n        setTipAmount(0);\r\n        setOrderNotes('');\r\n        setSelectedStaff('');\r\n        setAmountTendered(0);\r\n        setKotPrinted(false);\r\n        setShowConfirmClear(false);\r\n    };\r\n\r\n    const confirmClear = () => {\r\n        setCart([]);\r\n        setDiscountValue(0);\r\n        setSelectedCustomer(null);\r\n        setCharges({ packing: 0, delivery: 0 });\r\n        setTipAmount(0);\r\n        setOrderNotes('');\r\n        setSelectedStaff('');\r\n        setAmountTendered(0);\r\n        setKotPrinted(false);\r\n        setShowConfirmClear(false);\r\n    };\r\n\r\n    const updateItemNote = (itemId: string, note: string) => {\r\n        setCart(prev => prev.map(item =>\r\n            item.id === itemId ? { ...item, note } : item\r\n        ));\r\n        setEditingNoteId(null);\r\n    };\r\n\r\n    const getItemQty = (itemId: string) => cart.find(i => i.id === itemId)?.quantity || 0;\r\n\r\n    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    const discountAmount = discountType === 'percent'\r\n        ? Math.round(subtotal * discountValue / 100)\r\n        : discountValue;\r\n    const parcelAmount = charges.packing + charges.delivery;\r\n    const taxableAmount = subtotal - discountAmount + parcelAmount;\r\n    const taxAmount = 0; // Removed 5% GST as requested\r\n    const cartTotal = taxableAmount + taxAmount + tipAmount;\r\n    const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n    const changeAmount = amountTendered > cartTotal ? amountTendered - cartTotal : 0;\r\n\r\n    // Hold Order\r\n    const holdCurrentOrder = () => {\r\n        if (cart.length === 0) return;\r\n        const held: HeldOrder = {\r\n            id: Date.now().toString(),\r\n            name: tableNumber ? `Table ${tableNumber}` : `Order ${heldOrders.length + 1}`,\r\n            cart: [...cart],\r\n            tableNumber,\r\n            orderType,\r\n            timestamp: Date.now()\r\n        };\r\n        setHeldOrders(prev => [...prev, held]);\r\n        clearCart();\r\n        setTableNumber('');\r\n    };\r\n\r\n    // Resume Held Order\r\n    const resumeHeldOrder = (order: HeldOrder) => {\r\n        setCart(order.cart);\r\n        setTableNumber(order.tableNumber);\r\n        setOrderType(order.orderType);\r\n        setHeldOrders(prev => prev.filter(o => o.id !== order.id));\r\n        setShowHeldOrders(false);\r\n    };\r\n\r\n    // Delete Held Order\r\n    const deleteHeldOrder = (orderId: string) => {\r\n        setHeldOrders(prev => prev.filter(o => o.id !== orderId));\r\n    };\r\n\r\n    // Add to Quick Keys\r\n    const addToQuickKeys = (itemId: string) => {\r\n        if (quickKeyItems.includes(itemId)) {\r\n            setQuickKeyItems(prev => prev.filter(id => id !== itemId));\r\n        } else if (quickKeyItems.length < 9) {\r\n            setQuickKeyItems(prev => [...prev, itemId]);\r\n        }\r\n        localStorage.setItem('pos_quick_keys', JSON.stringify(quickKeyItems));\r\n    };\r\n\r\n    // Print Receipt\r\n    const printReceipt = (status: 'Paid' | 'Unpaid' = 'Paid', method: 'Cash' | 'Online' = paymentMethod) => {\r\n        const receiptWindow = window.open('', '_blank', 'width=300,height=600');\r\n        if (!receiptWindow) return;\r\n\r\n        const receiptHTML = `\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <title>Receipt</title>\r\n                <style>\r\n                    body { font-family: 'Courier New', monospace; font-size: 12px; padding: 10px; max-width: 280px; margin: 0 auto; }\r\n                    .center { text-align: center; }\r\n                    .bold { font-weight: bold; }\r\n                    .line { border-top: 1px dashed #000; margin: 10px 0; }\r\n                    .row { display: flex; justify-content: space-between; margin: 3px 0; }\r\n                    .note { font-size: 10px; color: #666; margin-left: 15px; }\r\n                    h1 { font-size: 18px; margin: 5px 0; }\r\n                    h2 { font-size: 14px; margin: 5px 0; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"center\">\r\n                    <h1>OYE CHATORO</h1>\r\n                    <p>Abu Road, Rajasthan</p>\r\n                    <p>Ph: 9509913792</p>\r\n                </div>\r\n                <div class=\"line\"></div>\r\n                <div class=\"row\"><span>Date:</span><span>${new Date().toLocaleDateString()}</span></div>\r\n                <div class=\"row\"><span>Time:</span><span>${new Date().toLocaleTimeString()}</span></div>\r\n                <div class=\"row\"><span>Type:</span><span>${orderType}</span></div>\r\n                ${tableNumber ? `<div class=\"row\"><span>Table:</span><span>${tableNumber}</span></div>` : ''}\r\n                ${selectedStaff ? `<div class=\"row\"><span>Staff:</span><span>${selectedStaff}</span></div>` : ''}\r\n                ${customerName ? `<div class=\"row\"><span>Customer:</span><span>${customerName}</span></div>` : ''}\r\n                <div class=\"line\"></div>\r\n                ${cart.map(item => `\r\n                    <div class=\"row\">\r\n                        <span>${item.quantity}x ${item.name}</span>\r\n                        <span>‚Çπ${item.price * item.quantity}</span>\r\n                    </div>\r\n                    ${item.modifiers ? item.modifiers.map(m => `<div class=\"note\"> + ${m.name}</div>`).join('') : ''}\r\n                    ${item.note ? `<div class=\"note\">‚Ü≥ ${item.note}</div>` : ''}\r\n                `).join('')}\r\n                <div class=\"line\"></div>\r\n                <div class=\"row\"><span>Subtotal:</span><span>‚Çπ${subtotal}</span></div>\r\n                ${discountAmount > 0 ? `<div class=\"row\"><span>Discount:</span><span>-‚Çπ${discountAmount}</span></div>` : ''}\r\n                ${parcelAmount > 0 ? `<div class=\"row\"><span>Parcel Charge:</span><span>‚Çπ${parcelAmount}</span></div>` : ''}\r\n                ${parcelAmount > 0 ? `<div class=\"row\"><span>Parcel Charge:</span><span>‚Çπ${parcelAmount}</span></div>` : ''}\r\n                <div class=\"line\"></div>\r\n                <div class=\"row bold\"><span>TOTAL:</span><span>‚Çπ${cartTotal}</span></div>\r\n                ${status === 'Unpaid' ? `\r\n                    <div class=\"line\"></div>\r\n                    <div class=\"center bold\" style=\"background: #000; color: #fff; padding: 5px;\">PAY LATER / DUE</div>\r\n                    <div class=\"row\"><span>Payment:</span><span>NOT PAID</span></div>\r\n                ` : `\r\n                    ${method === 'Cash' && amountTendered > 0 ? `\r\n                        <div class=\"row\"><span>Tendered:</span><span>‚Çπ${amountTendered}</span></div>\r\n                        <div class=\"row bold\"><span>Change:</span><span>‚Çπ${changeAmount}</span></div>\r\n                    ` : ''}\r\n                    <div class=\"row\"><span>Payment:</span><span>${method}</span></div>\r\n                `}\r\n                ${orderNotes ? `<div class=\"line\"></div><p><b>Notes:</b> ${orderNotes}</p>` : ''}\r\n                <div class=\"line\"></div>\r\n                <div class=\"center\">\r\n                    <p>Thank you for visiting!</p>\r\n                    <p>Please come again üôè</p>\r\n                </div>\r\n                <!-- <script>window.print(); window.close();</script> -->\r\n            </body>\r\n            </html>\r\n        `;\r\n        receiptWindow.document.write(receiptHTML);\r\n    };\r\n\r\n    // Print KOT (Kitchen Order Ticket)\r\n    const printKOT = () => {\r\n        const kotWindow = window.open('', '_blank', 'width=300,height=400');\r\n        if (!kotWindow) return;\r\n\r\n        const kotHTML = `\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <title>KOT</title>\r\n                <style>\r\n                    body { font-family: 'Courier New', monospace; font-size: 14px; padding: 10px; max-width: 280px; margin: 0 auto; }\r\n                    .center { text-align: center; }\r\n                    .bold { font-weight: bold; font-size: 16px; }\r\n                    .line { border-top: 2px dashed #000; margin: 8px 0; }\r\n                    .item { margin: 8px 0; padding: 5px; background: #f5f5f5; }\r\n                    .qty { font-size: 20px; font-weight: bold; }\r\n                    .note { color: red; font-weight: bold; }\r\n                    h1 { font-size: 22px; margin: 5px 0; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"center\">\r\n                    <h1>üç≥ KITCHEN ORDER</h1>\r\n                    <p class=\"bold\">${new Date().toLocaleTimeString()}</p>\r\n                    ${activeOrderId ? '<p>(ADD TO ORDER)</p>' : ''}\r\n                </div>\r\n                <div class=\"line\"></div>\r\n                <div class=\"bold\">${orderType} ${tableNumber ? '‚Ä¢ Table ' + tableNumber : ''}</div>\r\n                <div class=\"line\"></div>\r\n                ${cart.map(item => `\r\n                    <div class=\"item\">\r\n                        <span class=\"qty\">${item.quantity}x</span> ${item.name}\r\n                        ${item.modifiers ? item.modifiers.map(m => `<div class=\"note\">+ ${m.name}</div>`).join('') : ''}\r\n                        ${item.note ? `<div class=\"note\">‚ö†Ô∏è ${item.note}</div>` : ''}\r\n                    </div>\r\n                `).join('')}\r\n                ${orderNotes ? `<div class=\"line\"></div><div class=\"note\">üìù ${orderNotes}</div>` : ''}\r\n                <div class=\"line\"></div>\r\n                <div class=\"center bold\">--- END OF KOT ---</div>\r\n                <!-- <script>window.print(); window.close();</script> -->\r\n            </body>\r\n            </html>\r\n        `;\r\n        kotWindow.document.write(kotHTML);\r\n        setKotPrinted(true);\r\n    };\r\n\r\n    const printLastReceipt = () => {\r\n        // In real implementation, would print last order\r\n        alert('No recent order to print');\r\n    };\r\n\r\n    // Save Customer\r\n    const saveCustomer = async () => {\r\n        if (!customerPhone) return;\r\n\r\n        // Use upsertDbCustomer from hook\r\n        await upsertDbCustomer({\r\n            name: customerName || 'Unknown',\r\n            phone: customerPhone,\r\n            totalOrders: 1, // Will be incremented by API\r\n            totalSpent: cartTotal\r\n        });\r\n    };\r\n\r\n    // Search Customer\r\n    const searchCustomer = (phone: string) => {\r\n        // Trigger fetch with search param\r\n        fetchCustomers(phone);\r\n        // Note: The hook will update 'customers' state. We can try to find from there if already loaded, \r\n        // but since fetch is async, we might rely on the user seeing the result in a dropdown or similar.\r\n        // For this simple implementation, let's assume if we find it in the current list (which might be filtered by fetch)\r\n        const found = customers.find(c => c.phone.includes(phone));\r\n        if (found && found.phone === phone) {\r\n            setSelectedCustomer(found);\r\n            setCustomerName(found.name);\r\n            setCustomerPhone(found.phone);\r\n        } else {\r\n            // If not exact match yet, just set phone\r\n            setCustomerPhone(phone);\r\n        }\r\n    };\r\n\r\n    // Handle Checkout\r\n    const handleCheckout = async () => {\r\n        if (cart.length === 0) return;\r\n\r\n        await saveCustomer();\r\n\r\n        // Map orderType to Order type format\r\n        const typeMap: { [key: string]: 'DineIn' | 'Takeaway' | 'Delivery' } = {\r\n            'Dine In': 'DineIn',\r\n            'Takeaway': 'Takeaway',\r\n            'Delivery': 'Delivery'\r\n        };\r\n\r\n        const orderData = {\r\n            items: cart.map(item => ({\r\n                id: item.menuItemId,\r\n                name: item.name,\r\n                quantity: item.quantity,\r\n                price: item.price,\r\n                note: item.note,\r\n                modifiers: item.modifiers // Pass modifiers\r\n            })),\r\n            total: cartTotal,\r\n            type: typeMap[orderType],\r\n            table: orderType === 'Dine In' ? tableNumber : undefined,\r\n            customer: customerName || 'Walk-in Customer',\r\n            mobile: customerPhone || undefined,\r\n            paymentMethod,\r\n            paymentStatus: 'Paid' as const,\r\n            discount: discountAmount > 0 ? {\r\n                type: discountType === 'percent' ? 'percent' as const : 'amount' as const,\r\n                value: discountValue,\r\n                amount: discountAmount\r\n            } : undefined,\r\n            tip: tipAmount,\r\n            waiterName: selectedStaff,\r\n            waiterCalled: false,\r\n            notes: orderNotes,\r\n            dietary: (() => {\r\n                const tags: string[] = [];\r\n                const combinedNotes = (orderNotes + ' ' + cart.map(i => i.note || '').join(' ')).toLowerCase();\r\n                if (combinedNotes.includes('jain')) tags.push('Jain');\r\n                if (combinedNotes.includes('vegan')) tags.push('Vegan');\r\n                if (combinedNotes.includes('allergy') || combinedNotes.includes('allergic')) tags.push('Allergy');\r\n                return tags;\r\n            })(),\r\n        };\r\n\r\n\r\n        if (activeOrderId) {\r\n            // UPDATE EXISTING ORDER\r\n            const newItems = cart.map(item => ({\r\n                id: item.menuItemId,\r\n                name: item.name,\r\n                quantity: item.quantity,\r\n                price: item.price,\r\n                note: item.note,\r\n                modifiers: item.modifiers\r\n            }));\r\n\r\n            // Merge items?? Ideally we append, but backend just replaces \"items\" if we send it in body??\r\n            // Wait, my backend implementation of \"items\" replace entire list or merge?\r\n            // \"items: body.items\" REPLACES the field in Prisma update if JSON.\r\n            // So we MUST send [ ...existing, ...new ].\r\n\r\n            // NOTE: existingItems is just the JSON.\r\n            const updatedItems = [...existingItems, ...newItems];\r\n\r\n            await updateOrder(activeOrderId, {\r\n                items: updatedItems,\r\n                total: existingTotal + cartTotal,\r\n                status: 'Cooking', // Reset status to Cooking if adding new items? Or keep 'Cooking'?\r\n                // If it was 'Ready', we should probably set back to 'Cooking' or 'Pending' so kitchen sees it?\r\n                // Visual Indicator: \"Cooking\" is best.\r\n                // Also append notes if needed\r\n            });\r\n\r\n            // We should print KOT for NEW items only - done by printKOT manually called before checkout usually?\r\n            // User flow: Print KOT -> Checkout/Update.\r\n            // If they didn't print KOT, we can do it here optionally.\r\n\r\n            setShowSuccess(true);\r\n            setTimeout(() => {\r\n                setShowSuccess(false);\r\n                setShowCheckout(false);\r\n                clearCart();\r\n                setTableNumber('');\r\n                setCustomerName('');\r\n                setCustomerPhone('');\r\n                setSelectedCustomer(null);\r\n                setActiveOrderId(null);\r\n                setExistingItems([]);\r\n                setViewMode('floor'); // Go back to floor\r\n            }, 1000);\r\n\r\n            return;\r\n        }\r\n\r\n        // CREATE NEW ORDER\r\n        createDbOrder(orderData).catch(console.error); // Async create\r\n        printReceipt('Paid', paymentMethod);\r\n\r\n        setShowSuccess(true);\r\n        setTimeout(() => {\r\n            setShowSuccess(false);\r\n            setShowCheckout(false);\r\n            clearCart();\r\n            setTableNumber('');\r\n            setCustomerName('');\r\n            setCustomerPhone('');\r\n            setSelectedCustomer(null);\r\n        }, 2000);\r\n    };\r\n\r\n    const handlePayLater = async () => {\r\n        if (cart.length === 0) return;\r\n        await saveCustomer();\r\n\r\n        const typeMap: { [key: string]: 'DineIn' | 'Takeaway' | 'Delivery' } = {\r\n            'Dine In': 'DineIn',\r\n            'Takeaway': 'Takeaway',\r\n            'Delivery': 'Delivery'\r\n        };\r\n\r\n        const orderData = {\r\n            items: cart.map(item => ({\r\n                id: item.menuItemId,\r\n                name: item.name,\r\n                quantity: item.quantity,\r\n                price: item.price,\r\n                note: item.note,\r\n                modifiers: item.modifiers\r\n            })),\r\n            total: cartTotal,\r\n            type: typeMap[orderType],\r\n            table: orderType === 'Dine In' ? tableNumber : undefined,\r\n            customer: customerName || 'Walk-in Customer',\r\n            mobile: customerPhone || undefined,\r\n            paymentMethod: 'Cash' as const, // Default for record, but status is Unpaid\r\n            paymentStatus: 'Unpaid' as const,\r\n            discount: discountAmount > 0 ? {\r\n                type: discountType === 'percent' ? 'percent' as const : 'amount' as const,\r\n                value: discountValue,\r\n                amount: discountAmount\r\n            } : undefined,\r\n            tip: tipAmount,\r\n            waiterName: selectedStaff,\r\n            dietary: (() => {\r\n                const tags: string[] = [];\r\n                const combinedNotes = (orderNotes + ' ' + cart.map(i => i.note || '').join(' ')).toLowerCase();\r\n                if (combinedNotes.includes('jain')) tags.push('Jain');\r\n                if (combinedNotes.includes('vegan')) tags.push('Vegan');\r\n                if (combinedNotes.includes('allergy') || combinedNotes.includes('allergic')) tags.push('Allergy');\r\n                return tags;\r\n            })(),\r\n        };\r\n\r\n        createDbOrder(orderData).catch(console.error);\r\n        printReceipt('Unpaid', 'Cash'); // Optional: might want to print bill without 'Paid' stamp\r\n\r\n        setShowSuccess(true);\r\n        setTimeout(() => {\r\n            setShowSuccess(false);\r\n            setShowCheckout(false);\r\n            clearCart();\r\n            setTableNumber('');\r\n            setCustomerName('');\r\n            setCustomerPhone('');\r\n            setSelectedCustomer(null);\r\n        }, 2000);\r\n    };\r\n\r\n    // Split Bill Payment\r\n    const addSplitPayment = () => {\r\n        const remaining = cartTotal - splitPayments.reduce((s, p) => s + p.amount, 0);\r\n        if (remaining > 0) {\r\n            setSplitPayments(prev => [...prev, { method: 'Cash', amount: remaining }]);\r\n        }\r\n    };\r\n\r\n    const updateSplitPayment = (index: number, field: 'method' | 'amount', value: any) => {\r\n        setSplitPayments(prev => prev.map((p, i) => i === index ? { ...p, [field]: value } : p));\r\n    };\r\n\r\n    const removeSplitPayment = (index: number) => {\r\n        setSplitPayments(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    if (!mounted) return null;\r\n\r\n    const handleStaffChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const staff = e.target.value;\r\n        setSelectedStaff(staff);\r\n        localStorage.setItem('pos_selected_staff', staff);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex-1 flex flex-col bg-gray-100 overflow-hidden\">\r\n            {/* Floor View - Table Layout */}\r\n            {viewMode === 'floor' && (\r\n                <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n                    {/* Floor Header */}\r\n                    <div className=\"bg-gradient-to-r from-orange-500 to-red-500 p-4\">\r\n                        <div className=\"flex items-center justify-between gap-4\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Link href=\"/dashboard/overview\" className=\"p-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-all font-bold text-xs flex items-center gap-1\">\r\n                                    ‚Üê EXIT\r\n                                </Link>\r\n                                <div>\r\n                                    <h1 className=\"text-xl md:text-2xl font-bold text-white\">ü™ë Table Floor</h1>\r\n                                    <p className=\"text-white/80 text-[10px] md:text-sm\">Select a table to take order</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setShowSalesModal(true)}\r\n                                    className=\"px-4 py-2 bg-white/20 text-white rounded-lg font-semibold text-sm hover:bg-white/30\"\r\n                                >\r\n                                    üìä Sales\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setShowRecentModal(true)}\r\n                                    className=\"px-4 py-2 bg-white/20 text-white rounded-lg font-semibold text-sm hover:bg-white/30\"\r\n                                >\r\n                                    üïí Recent\r\n                                </button>\r\n                                <select\r\n                                    value={selectedStaff}\r\n                                    onChange={handleStaffChange}\r\n                                    className={`px-3 py-2 rounded-lg font-semibold text-sm ${!selectedStaff ? 'bg-red-100 text-red-600 animate-pulse' : 'bg-white/20 text-white'}`}\r\n                                >\r\n                                    <option value=\"\">üë§ Staff</option>\r\n                                    {STAFF_LIST.map(s => <option key={s} value={s}>{s}</option>)}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Legend */}\r\n                    <div className=\"bg-white border-b px-4 py-2 flex gap-4 text-xs\">\r\n                        <div className=\"flex items-center gap-1\"><span className=\"w-3 h-3 rounded bg-green-500\"></span> Free</div>\r\n                        <div className=\"flex items-center gap-1\"><span className=\"w-3 h-3 rounded bg-orange-500\"></span> Occupied</div>\r\n                        <div className=\"flex items-center gap-1\"><span className=\"w-3 h-3 rounded bg-red-500\"></span> Bill Ready</div>\r\n                    </div>\r\n\r\n                    {/* Table Grid */}\r\n                    <div className=\"flex-1 overflow-y-auto p-4\">\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n                            {Array.from({ length: TOTAL_TABLES }, (_, i) => {\r\n                                const tableNum = `T-${i + 1}`;\r\n                                const { status, order } = getTableStatus(tableNum);\r\n                                const bgColor = status === 'free' ? 'bg-green-50 border-green-500 hover:bg-green-100' :\r\n                                    status === 'occupied' ? 'bg-orange-50 border-orange-500 hover:bg-orange-100' :\r\n                                        'bg-red-50 border-red-500 hover:bg-red-100';\r\n                                const iconColor = status === 'free' ? 'text-green-500' :\r\n                                    status === 'occupied' ? 'text-orange-500' : 'text-red-500';\r\n\r\n                                return (\r\n                                    <button\r\n                                        key={tableNum}\r\n                                        onClick={() => handleTableClick(tableNum)}\r\n                                        className={`p-4 rounded-2xl border-2 ${bgColor} transition-all hover:scale-105 active:scale-95 text-left`}\r\n                                    >\r\n                                        <div className=\"flex items-center justify-between mb-2\">\r\n                                            <span className={`text-3xl ${iconColor}`}>ü™ë</span>\r\n                                            <span className={`text-xs font-bold px-2 py-1 rounded ${status === 'free' ? 'bg-green-500 text-white' : status === 'occupied' ? 'bg-orange-500 text-white' : 'bg-red-500 text-white'}`}>\r\n                                                {status === 'free' ? 'FREE' : status === 'occupied' ? 'BUSY' : 'BILL'}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"text-xl font-bold text-gray-800\">{tableNum}</div>\r\n                                        {order && (\r\n                                            <div className=\"mt-2 text-sm\">\r\n                                                <div className=\"text-gray-500 truncate\">{order.items.slice(0, 2).map((i: any) => i.name).join(', ')}</div>\r\n                                                <div className=\"font-bold text-orange-600\">‚Çπ{order.total}</div>\r\n                                            </div>\r\n                                        )}\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                            {/* Takeaway Button */}\r\n                            <button\r\n                                onClick={() => { setOrderType('Takeaway'); setTableNumber(''); setViewMode('pos'); setActiveTab('menu'); }}\r\n                                className=\"p-4 rounded-2xl border-2 bg-blue-50 border-blue-500 hover:bg-blue-100 transition-all hover:scale-105 active:scale-95 text-left\"\r\n                            >\r\n                                <span className=\"text-3xl\">üì¶</span>\r\n                                <div className=\"text-xl font-bold text-gray-800 mt-2\">Takeaway</div>\r\n                                <div className=\"text-sm text-gray-500\">New parcel order</div>\r\n                            </button>\r\n                            {/* Delivery Button */}\r\n                            <button\r\n                                onClick={() => { setOrderType('Delivery'); setTableNumber(''); setViewMode('pos'); setActiveTab('menu'); }}\r\n                                className=\"p-4 rounded-2xl border-2 bg-purple-50 border-purple-500 hover:bg-purple-100 transition-all hover:scale-105 active:scale-95 text-left\"\r\n                            >\r\n                                <span className=\"text-3xl\">üöó</span>\r\n                                <div className=\"text-xl font-bold text-gray-800 mt-2\">Delivery</div>\r\n                                <div className=\"text-sm text-gray-500\">New delivery order</div>\r\n                            </button>\r\n                            {/* Online/Phone Order Button */}\r\n                            <button\r\n                                onClick={() => setShowOnlineModal(true)}\r\n                                className=\"p-4 rounded-2xl border-2 bg-teal-50 border-teal-500 hover:bg-teal-100 transition-all hover:scale-105 active:scale-95 text-left\"\r\n                            >\r\n                                <span className=\"text-3xl\">üìû</span>\r\n                                <div className=\"text-xl font-bold text-gray-800 mt-2\">Phone/Online</div>\r\n                                <div className=\"text-sm text-gray-500\">Customer call order</div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* POS View - Menu & Cart */}\r\n            {viewMode === 'pos' && (\r\n                <div className=\"flex-1 flex flex-col md:flex-row overflow-hidden\">\r\n                    {/* Left Side - Menu */}\r\n                    <div className={`flex-1 flex flex-col overflow-hidden ${activeTab === 'cart' ? 'hidden md:flex' : 'flex'}`}>\r\n                        {/* Header */}\r\n                        <div className=\"bg-white border-b p-2 md:p-3 flex flex-col md:flex-row gap-2\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <button\r\n                                    onClick={() => setViewMode('floor')}\r\n                                    className=\"px-4 py-2.5 rounded-xl bg-gray-800 text-white font-bold text-xs flex items-center gap-1 shrink-0 shadow-lg shadow-gray-200\"\r\n                                >\r\n                                    ‚Üê Floor\r\n                                </button>\r\n                                {tableNumber && (\r\n                                    <div className=\"px-3 py-2.5 bg-orange-100 text-orange-600 rounded-xl font-bold text-xs shrink-0 border border-orange-200\">\r\n                                        ü™ë {tableNumber}\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"flex-1 relative\">\r\n                                    <input\r\n                                        ref={searchRef}\r\n                                        type=\"text\"\r\n                                        placeholder=\"üîç Search items...\"\r\n                                        value={searchQuery}\r\n                                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                                        className=\"w-full pl-4 pr-10 py-2.5 rounded-xl border border-gray-100 focus:border-orange-500 focus:ring-4 focus:ring-orange-50 outline-none transition-all text-sm bg-gray-50/50\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-1 overflow-x-auto pb-1 md:pb-0 scrollbar-hide\">\r\n                                {['Dine In', 'Takeaway', 'Delivery'].map(type => (\r\n                                    <button\r\n                                        key={type}\r\n                                        onClick={() => setOrderType(type as any)}\r\n                                        className={`px-4 py-2 rounded-xl font-bold text-[10px] md:text-xs transition-all whitespace-nowrap flex items-center gap-1.5 border ${orderType === type ? 'bg-orange-500 text-white border-orange-600 shadow-md shadow-orange-100' : 'bg-white text-gray-500 border-gray-100 hover:border-gray-200'}`}\r\n                                    >\r\n                                        <span>{type === 'Dine In' ? 'ü™ë' : type === 'Takeaway' ? 'üì¶' : 'üöó'}</span> {type}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Categories */}\r\n                        <div className=\"bg-gray-50 p-2 flex gap-2 overflow-x-auto scrollbar-hide\">\r\n                            <button\r\n                                onClick={() => setActiveCategory('all')}\r\n                                className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${activeCategory === 'all'\r\n                                    ? 'bg-gray-800 text-white shadow-lg'\r\n                                    : 'bg-white text-gray-600 hover:bg-gray-200'\r\n                                    }`}\r\n                            >\r\n                                All Items\r\n                            </button>\r\n                            {categories.map(cat => (\r\n                                <button\r\n                                    key={cat.id}\r\n                                    onClick={() => setActiveCategory(cat.id)}\r\n                                    className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${activeCategory === cat.id\r\n                                        ? 'bg-gray-800 text-white shadow-lg'\r\n                                        : 'bg-white text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    {cat.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Menu Items Grid */}\r\n                        <div className=\"flex-1 overflow-y-auto p-3\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\r\n                                {filteredItems.map(item => (\r\n                                    <button\r\n                                        key={item.id}\r\n                                        onClick={() => addToCart(item)}\r\n                                        className=\"bg-white p-3 rounded-xl border hover:border-orange-500 hover:shadow-lg transition-all text-left group relative overflow-hidden\"\r\n                                    >\r\n                                        <div className=\"absolute top-2 right-2 flex flex-col gap-1 items-end\">\r\n                                            <span className={`w-3 h-3 rounded-full ${item.veg ? 'bg-green-500' : 'bg-red-500'}`} />\r\n                                            {getItemQty(item.id) > 0 && (\r\n                                                <span className=\"bg-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm\">\r\n                                                    {getItemQty(item.id)}\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"font-bold text-gray-800 text-sm mb-1 pr-4\">{item.name}</div>\r\n                                        <div className=\"text-orange-600 font-bold text-sm\">‚Çπ{item.price}</div>\r\n                                        {item.modifiers && item.modifiers.length > 0 && <span className=\"text-[10px] text-gray-400\">Customizable</span>}\r\n                                        <div className=\"absolute inset-0 bg-orange-50 opacity-0 group-hover:opacity-10 transition-opacity\" />\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Side - Cart */}\r\n                    <div className={`w-full md:w-[400px] bg-white border-l flex flex-col ${activeTab === 'menu' ? 'hidden md:flex' : 'flex'}`}>\r\n                        {/* Use CartView Component if extracted, or keep inline. For now, maintaining inline structure from original but mostly complete */}\r\n                        <div className=\"bg-gray-900 text-white p-3 md:p-4 border-b border-white/5 shadow-xl\">\r\n                            <div className=\"flex justify-between items-center mb-3\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-sm shadow-lg shadow-orange-900/20\">üõí</div>\r\n                                    <div>\r\n                                        <h2 className=\"font-bold text-sm\">Review Order</h2>\r\n                                        <p className=\"text-[10px] text-gray-500 uppercase font-black tracking-widest\">{tableNumber || orderType}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <button onClick={() => setActiveTab('menu')} className=\"md:hidden p-2 bg-white/5 rounded-xl text-xs font-bold border border-white/10 hover:bg-white/10 transition-colors flex items-center gap-1\">‚Üê BACK</button>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-2\">\r\n                                <div className=\"flex-1 relative\">\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        placeholder=\"üì± Mobile No\"\r\n                                        value={customerPhone}\r\n                                        onChange={(e) => {\r\n                                            const val = e.target.value;\r\n                                            setCustomerPhone(val);\r\n                                            if (val.length === 10) searchCustomer(val);\r\n                                        }}\r\n                                        className=\"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-gray-500 outline-none focus:border-orange-500 focus:bg-white/10 transition-all font-bold\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex-1 relative\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"üë§ Name\"\r\n                                        value={customerName}\r\n                                        onChange={(e) => setCustomerName(e.target.value)}\r\n                                        className=\"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-gray-500 outline-none focus:border-orange-500 focus:bg-white/10 transition-all font-bold\"\r\n                                    />\r\n                                    {selectedCustomer && (\r\n                                        <div className=\"absolute top-1/2 -translate-y-1/2 right-2 flex items-center gap-1 bg-orange-600 px-1.5 py-0.5 rounded text-[8px] font-black uppercase shadow-lg shadow-orange-900/40\">VIP</div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Cart Items List */}\r\n                        <div className=\"flex-1 overflow-y-auto p-2 space-y-2\">\r\n                            {/* DISPLAY EXISTING ITEMS (ReadOnly) */}\r\n                            {activeOrderId && existingItems.length > 0 && (\r\n                                <div className=\"mb-4 bg-orange-50 p-3 rounded-xl border border-orange-100\">\r\n                                    <div className=\"text-xs font-bold text-orange-600 mb-2 uppercase tracking-wide\">Existing Items</div>\r\n                                    {existingItems.map((item: any, idx: number) => (\r\n                                        <div key={`existing-${idx}`} className=\"flex justify-between items-center py-1 opacity-70\">\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"text-sm font-medium text-gray-800\">{item.quantity}x {item.name}</div>\r\n                                                {item.note && <div className=\"text-xs text-gray-500 italic\">{item.note}</div>}\r\n                                            </div>\r\n                                            <div className=\"font-bold text-gray-600\">‚Çπ{item.price * item.quantity}</div>\r\n                                        </div>\r\n                                    ))}\r\n                                    <div className=\"mt-2 pt-2 border-t border-orange-200 flex justify-between text-sm font-bold text-orange-800\">\r\n                                        <span>Previous Total</span>\r\n                                        <span>‚Çπ{existingTotal}</span>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {cart.length === 0 ? (\r\n                                <div className=\"h-full flex flex-col items-center justify-center text-gray-400 opacity-50\">\r\n                                    <span className=\"text-4xl mb-2\">üõí</span>\r\n                                    <p>Cart is empty</p>\r\n                                </div>\r\n                            ) : (\r\n                                cart.map(item => (\r\n                                    <div key={item.id} className=\"bg-gray-50 p-3 rounded-xl border border-gray-100 flex gap-3 group relative\">\r\n                                        <div className=\"flex-1\">\r\n                                            <div className=\"flex justify-between items-start mb-1\">\r\n                                                <span className=\"font-bold text-sm text-gray-800\">{item.name}</span>\r\n                                                <span className=\"font-bold text-gray-800\">‚Çπ{item.price * item.quantity}</span>\r\n                                            </div>\r\n                                            {item.modifiers && item.modifiers.length > 0 && (\r\n                                                <div className=\"text-xs text-gray-500 mb-1 flex flex-wrap gap-1\">\r\n                                                    {item.modifiers.map((m, idx) => (\r\n                                                        <span key={idx} className=\"bg-white border px-1 rounded\">{m.name}</span>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n                                            {item.note && <div className=\"text-xs text-orange-600 italic mb-1\">Note: {item.note}</div>}\r\n                                            {editingNoteId === item.id ? (\r\n                                                <div className=\"flex gap-2 mt-1\">\r\n                                                    <input\r\n                                                        autoFocus\r\n                                                        type=\"text\"\r\n                                                        className=\"flex-1 text-xs border rounded px-1 py-0.5\"\r\n                                                        defaultValue={item.note}\r\n                                                        onBlur={(e) => updateItemNote(item.id, e.target.value)}\r\n                                                        onKeyDown={(e) => e.key === 'Enter' && updateItemNote(item.id, e.currentTarget.value)}\r\n                                                    />\r\n                                                </div>\r\n                                            ) : (\r\n                                                <button onClick={() => setEditingNoteId(item.id)} className=\"text-[10px] text-blue-500 hover:underline\">\r\n                                                    + {item.note ? 'Edit Note' : 'Add Note'}\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex flex-col items-center justify-between gap-2\">\r\n                                            <div className=\"flex items-center gap-2 bg-white rounded-lg border shadow-sm px-1 py-0.5\">\r\n                                                <button onClick={() => removeFromCart(item.id)} className=\"w-6 h-6 flex items-center justify-center text-red-500 hover:bg-red-50 rounded\">-</button>\r\n                                                <span className=\"font-bold text-sm w-4 text-center\">{item.quantity}</span>\r\n                                                <button onClick={() => addToCart({ ...item, modifiers: item.modifiers } as any)} className=\"w-6 h-6 flex items-center justify-center text-green-500 hover:bg-green-50 rounded\">+</button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Cart Summary/Footer */}\r\n                        <div className=\"bg-white border-t p-4 shadow-[0_-5px_15px_rgba(0,0,0,0.05)]\">\r\n                            <div className=\"space-y-1 mb-3 text-sm\">\r\n                                <div className=\"flex justify-between text-gray-500\"><span>Subtotal</span><span>‚Çπ{subtotal}</span></div>\r\n\r\n                                {/* Discount Control */}\r\n                                <div className=\"flex justify-between items-center text-green-600\">\r\n                                    <div className=\"flex items-center gap-1 cursor-pointer hover:bg-green-50 px-1 rounded\" onClick={() => setDiscountType(prev => prev === 'percent' ? 'flat' : 'percent')}>\r\n                                        <span>Discount ({discountType === 'percent' ? '%' : '‚Çπ'})</span>\r\n                                    </div>\r\n                                    {discountValue > 0 ? (\r\n                                        <div className=\"flex items-center gap-1\">\r\n                                            <span>-‚Çπ{discountAmount}</span>\r\n                                            <button onClick={() => setDiscountValue(0)} className=\"text-xs bg-red-100 text-red-500 rounded px-1\">‚úï</button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <button onClick={() => {\r\n                                            const val = prompt('Enter Discount ' + (discountType === 'percent' ? '%' : 'Amount'));\r\n                                            if (val) setDiscountValue(Number(val));\r\n                                        }} className=\"text-xs bg-green-100 px-2 rounded\">+ Add</button>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Extra Charges Control */}\r\n                                <div className=\"flex justify-between items-center text-blue-600\">\r\n                                    <div className=\"flex gap-2\">\r\n                                        <span>Extra Charges</span>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                const p = prompt('Enter Packing Charge (‚Çπ)', charges.packing.toString());\r\n                                                const d = prompt('Enter Delivery Charge (‚Çπ)', charges.delivery.toString());\r\n                                                if (p !== null) setCharges(prev => ({ ...prev, packing: Number(p) }));\r\n                                                if (d !== null) setCharges(prev => ({ ...prev, delivery: Number(d) }));\r\n                                            }}\r\n                                            className=\"text-xs bg-blue-100 px-2 rounded hover:bg-blue-200\"\r\n                                        >\r\n                                            ‚úèÔ∏è Edit\r\n                                        </button>\r\n                                    </div>\r\n                                    <div className=\"text-right text-xs\">\r\n                                        {charges.packing > 0 && <div>Packing: ‚Çπ{charges.packing}</div>}\r\n                                        {charges.delivery > 0 && <div>Delivery: ‚Çπ{charges.delivery}</div>}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* GST Removed logic */}\r\n\r\n                                {/* Tip Control Removed */}\r\n                                <div className=\"flex justify-between font-bold text-lg pt-2 border-t text-gray-900\"><span>Total</span><span>‚Çπ{cartTotal}</span></div>\r\n                            </div>\r\n\r\n                            <textarea\r\n                                placeholder=\"üìù Order Notes...\"\r\n                                value={orderNotes}\r\n                                onChange={e => setOrderNotes(e.target.value)}\r\n                                className=\"w-full text-xs p-2 bg-gray-50 rounded-lg mb-3 border-0 focus:ring-1 focus:ring-orange-500 resize-none h-8\"\r\n                            />\r\n\r\n                            <div className=\"grid grid-cols-4 gap-2 mb-3\">\r\n                                <button onClick={() => setShowSalesModal(true)} className=\"col-span-1 py-3 rounded-xl font-bold text-gray-600 bg-gray-100 hover:bg-gray-200\">üìä</button>\r\n                                <button onClick={holdCurrentOrder} className=\"col-span-1 py-3 rounded-xl font-bold text-blue-600 bg-blue-50 hover:bg-blue-100\">‚è∏ Hold</button>\r\n                                <button onClick={printKOT} className=\"col-span-1 py-3 rounded-xl font-bold text-purple-600 bg-purple-50 hover:bg-purple-100\">üë®‚Äçüç≥ KOT</button>\r\n                                <button onClick={clearCart} className=\"col-span-1 py-3 rounded-xl font-bold text-red-600 bg-red-50 hover:bg-red-100\">üóë</button>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-2\">\r\n                                {activeOrderId ? (\r\n                                    <>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                setActiveOrderId(null);\r\n                                                setExistingItems([]);\r\n                                                setCart([]);\r\n                                                setViewMode('floor');\r\n                                            }}\r\n                                            className=\"flex-1 py-4 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-bold shadow-lg shadow-gray-200 transition-all\"\r\n                                        >\r\n                                            Cancel\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleCheckout()}\r\n                                            disabled={cart.length === 0}\r\n                                            className=\"flex-[2] py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all hover:scale-[1.02] disabled:opacity-50\"\r\n                                        >\r\n                                            Update Order (‚Çπ{cartTotal + existingTotal})\r\n                                        </button>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <button\r\n                                            onClick={() => handlePayLater()}\r\n                                            disabled={cart.length === 0}\r\n                                            className=\"flex-1 py-4 bg-yellow-400 hover:bg-yellow-500 text-yellow-900 rounded-xl font-bold shadow-lg shadow-yellow-200 transition-all disabled:opacity-50 disabled:shadow-none\"\r\n                                        >\r\n                                            Pay Later\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => setShowCheckout(true)}\r\n                                            disabled={cart.length === 0}\r\n                                            className=\"flex-[2] py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-bold shadow-lg shadow-orange-200 transition-all disabled:opacity-50 disabled:shadow-none\"\r\n                                        >\r\n                                            Charge ‚Çπ{cartTotal}\r\n                                        </button>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* Mobile Tab Bar */}\r\n            <div className=\"md:hidden bg-white border-t flex justify-around p-2 sticky bottom-0 z-30 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]\">\r\n                <button onClick={() => setActiveTab('menu')} className={`flex flex-col items-center p-2 rounded-lg transition-all ${activeTab === 'menu' ? 'text-orange-500 bg-orange-50' : 'text-gray-400'}`}>\r\n                    <span className=\"text-xl\">üçî</span>\r\n                    <span className=\"text-[10px] font-bold\">Menu</span>\r\n                </button>\r\n                <button onClick={() => setActiveTab('cart')} className={`flex flex-col items-center p-2 rounded-lg relative transition-all ${activeTab === 'cart' ? 'text-orange-500 bg-orange-50' : 'text-gray-400'}`}>\r\n                    <span className=\"text-xl\">üõí</span>\r\n                    <span className=\"text-[10px] font-bold\">Cart</span>\r\n                    {cart.length > 0 && (\r\n                        <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] font-bold w-4 h-4 rounded-full flex items-center justify-center animate-bounce shadow-sm\">\r\n                            {cart.length}\r\n                        </span>\r\n                    )}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Modals */}\r\n            <ModifierModal\r\n                show={showModifierModal}\r\n                itemName={selectedItemForMods?.name || ''}\r\n                basePrice={selectedItemForMods?.price || 0}\r\n                modifiers={selectedItemForMods?.modifiers || []}\r\n                onClose={() => setShowModifierModal(false)}\r\n                onConfirm={handleModifierConfirm}\r\n            />\r\n\r\n            <CheckoutModal\r\n                show={showCheckout}\r\n                onClose={() => setShowCheckout(false)}\r\n                showSuccess={showSuccess}\r\n                cartTotal={cartTotal}\r\n                cartCount={cartCount}\r\n                subtotal={subtotal}\r\n                discountAmount={discountAmount}\r\n                parcelAmount={charges.packing + charges.delivery}\r\n                taxAmount={taxAmount}\r\n                tipAmount={tipAmount}\r\n                paymentMethod={paymentMethod}\r\n                setPaymentMethod={setPaymentMethod}\r\n                amountTendered={amountTendered}\r\n                setAmountTendered={setAmountTendered}\r\n                changeAmount={changeAmount}\r\n                onConfirm={handleCheckout}\r\n                onPayLater={handlePayLater}\r\n            />\r\n\r\n            <SalesModal\r\n                show={showSalesModal}\r\n                onClose={() => setShowSalesModal(false)}\r\n                totalRevenue={todaySales.totalRevenue}\r\n                cashAmount={todaySales.cashAmount}\r\n                upiAmount={todaySales.upiAmount}\r\n                totalOrders={todaySales.totalOrders}\r\n            />\r\n\r\n            <RecentOrdersModal\r\n                show={showRecentModal}\r\n                onClose={() => setShowRecentModal(false)}\r\n                orders={lastOrders}\r\n                onPrintReceipt={(order) => {\r\n                    alert(`Printing receipt for Order #${order.id}`);\r\n                }}\r\n                onSettlePayment={async (orderId, method) => {\r\n                    try {\r\n                        await updateOrder(orderId, {\r\n                            paymentStatus: 'Paid',\r\n                            paymentMethod: method,\r\n                            status: 'Completed' // Optionally mark as completed if just waiting for payment? Or keep as is. Let's just update payment.\r\n                            // Actually user said \"update ka option hona chahiye\".\r\n                        });\r\n                        alert(`Order #${orderId} marked as Paid via ${method}`);\r\n                        refreshData(); // Refresh local list\r\n                    } catch (e) {\r\n                        alert('Failed to update order');\r\n                        console.error(e);\r\n                    }\r\n                }}\r\n            />\r\n\r\n            <OnlineOrderModal\r\n                show={showOnlineModal}\r\n                onClose={() => setShowOnlineModal(false)}\r\n                customer={onlineCustomer}\r\n                setCustomer={setOnlineCustomer}\r\n                onStartOrder={() => {\r\n                    setCustomerName(onlineCustomer.name);\r\n                    setCustomerPhone(onlineCustomer.phone);\r\n                    setShowOnlineModal(false);\r\n                    // Open menu\r\n                    setViewMode('pos');\r\n                    setActiveTab('menu');\r\n                    setOrderType('Delivery'); // Default to delivery/phone\r\n                }}\r\n            />\r\n\r\n            <CustomerSearchModal\r\n                show={showCustomerSearch}\r\n                onClose={() => setShowCustomerSearch(false)}\r\n                customers={customers}\r\n                onSearch={fetchCustomers}\r\n                onSelect={(customer) => {\r\n                    setSelectedCustomer(customer);\r\n                    setCustomerName(customer.name);\r\n                    setCustomerPhone(customer.phone);\r\n                    setShowCustomerSearch(false);\r\n                }}\r\n            />\r\n        </div >\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React, { useState } from 'react';\r\n\r\ninterface ModifierOption {\r\n    name: string;\r\n    price: number;\r\n}\r\n\r\ninterface ModifierGroup {\r\n    name: string;\r\n    price: number; // Base price for the group if applicable (usually 0 if using options)\r\n    type?: 'one' | 'many';\r\n    options?: ModifierOption[];\r\n}\r\n\r\ninterface ModifierModalProps {\r\n    show: boolean;\r\n    itemName: string;\r\n    basePrice: number;\r\n    modifiers: ModifierGroup[];\r\n    onClose: () => void;\r\n    onConfirm: (selectedModifiers: { name: string; price: number }[], notes: string) => void;\r\n}\r\n\r\nexport default function ModifierModal({ show, itemName, basePrice, modifiers, onClose, onConfirm }: ModifierModalProps) {\r\n    const [selectedMods, setSelectedMods] = useState<{ [groupName: string]: ModifierOption[] }>({});\r\n    const [notes, setNotes] = useState('');\r\n\r\n    if (!show) return null;\r\n\r\n    const handleToggle = (group: ModifierGroup, option: ModifierOption) => {\r\n        setSelectedMods(prev => {\r\n            const current = prev[group.name] || [];\r\n\r\n            if (group.type === 'one') {\r\n                // Radio behavior: Replace existing\r\n                return { ...prev, [group.name]: [option] };\r\n            } else {\r\n                // Checkbox behavior: Toggle\r\n                const exists = current.find(o => o.name === option.name);\r\n                if (exists) {\r\n                    return { ...prev, [group.name]: current.filter(o => o.name !== option.name) };\r\n                } else {\r\n                    return { ...prev, [group.name]: [...current, option] };\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    const getSelectedList = () => {\r\n        return Object.values(selectedMods).flat();\r\n    };\r\n\r\n    const calculateTotal = () => {\r\n        const modsTotal = getSelectedList().reduce((sum, m) => sum + m.price, 0);\r\n        return basePrice + modsTotal;\r\n    };\r\n\r\n    const handleConfirm = () => {\r\n        onConfirm(getSelectedList(), notes);\r\n        setSelectedMods({});\r\n        setNotes('');\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl flex flex-col max-h-[80vh]\" onClick={e => e.stopPropagation()}>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h3 className=\"text-xl font-bold\">{itemName}</h3>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">‚úï</button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto space-y-6 pr-2\">\r\n                    {modifiers.map((group, idx) => (\r\n                        <div key={idx} className=\"border-b pb-4 last:border-0\">\r\n                            <h4 className=\"font-bold text-gray-700 mb-2 flex justify-between\">\r\n                                {group.name}\r\n                                <span className=\"text-xs font-normal bg-gray-100 px-2 py-1 rounded text-gray-500\">\r\n                                    {group.type === 'one' ? 'Select 1' : 'Select Any'}\r\n                                </span>\r\n                            </h4>\r\n                            <div className=\"space-y-2\">\r\n                                {group.options?.map((opt, optIdx) => {\r\n                                    const isSelected = (selectedMods[group.name] || []).some(o => o.name === opt.name);\r\n                                    return (\r\n                                        <label key={optIdx} className={`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${isSelected ? 'border-orange-500 bg-orange-50' : 'border-gray-100 hover:bg-gray-50'}`}>\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className={`w-5 h-5 rounded-full border flex items-center justify-center ${isSelected ? 'border-orange-500 bg-orange-500' : 'border-gray-300'}`}>\r\n                                                    {isSelected && <div className=\"w-2 h-2 rounded-full bg-white\" />}\r\n                                                </div>\r\n                                                <span className={`${isSelected ? 'font-bold text-gray-800' : 'text-gray-600'}`}>{opt.name}</span>\r\n                                            </div>\r\n                                            {opt.price > 0 && <span className=\"text-sm font-semibold text-gray-600\">+‚Çπ{opt.price}</span>}\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                className=\"hidden\"\r\n                                                checked={isSelected}\r\n                                                onChange={() => handleToggle(group, opt)}\r\n                                            />\r\n                                        </label>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n\r\n                    <div>\r\n                        <h4 className=\"font-bold text-gray-700 mb-2\">Special Instructions</h4>\r\n                        <textarea\r\n                            value={notes}\r\n                            onChange={e => setNotes(e.target.value)}\r\n                            placeholder=\"e.g., Less spicy, no onions...\"\r\n                            className=\"w-full border rounded-xl p-3 text-sm focus:border-orange-500 outline-none resize-none\"\r\n                            rows={3}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 pt-4 border-t\">\r\n                    <button\r\n                        onClick={handleConfirm}\r\n                        className=\"w-full py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-bold flex justify-between px-6 shadow-lg shadow-orange-200\"\r\n                    >\r\n                        <span>Add Item</span>\r\n                        <span>‚Çπ{calculateTotal()}</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\n\r\ninterface CheckoutModalProps {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    showSuccess: boolean;\r\n    cartTotal: number;\r\n    cartCount: number;\r\n    subtotal: number;\r\n    discountAmount: number;\r\n    parcelAmount: number;\r\n    taxAmount: number;\r\n    tipAmount: number;\r\n    paymentMethod: 'Cash' | 'Online';\r\n    setPaymentMethod: (v: 'Cash' | 'Online') => void;\r\n    amountTendered: number;\r\n    setAmountTendered: (v: number) => void;\r\n    changeAmount: number;\r\n    onConfirm: () => void;\r\n    onPayLater: () => void;\r\n}\r\n\r\nexport default function CheckoutModal({\r\n    show, onClose, showSuccess, cartTotal, cartCount, subtotal, discountAmount, parcelAmount, taxAmount, tipAmount,\r\n    paymentMethod, setPaymentMethod, amountTendered, setAmountTendered, changeAmount, onConfirm, onPayLater\r\n}: CheckoutModalProps) {\r\n    if (!show) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl\" onClick={e => e.stopPropagation()}>\r\n                {showSuccess ? (\r\n                    <div className=\"text-center py-8\">\r\n                        <div className=\"text-6xl mb-4\">‚úÖ</div>\r\n                        <h3 className=\"text-2xl font-bold text-green-600 mb-2\">Order Placed!</h3>\r\n                        <p className=\"text-gray-500\">Printing receipt...</p>\r\n                        {changeAmount > 0 && (\r\n                            <div className=\"mt-4 p-4 bg-green-50 rounded-xl\">\r\n                                <div className=\"text-lg\">Return Change</div>\r\n                                <div className=\"text-3xl font-bold text-green-600\">‚Çπ{changeAmount}</div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <h3 className=\"text-xl font-bold mb-4\">üí≥ Payment</h3>\r\n                        <div className=\"bg-gray-50 rounded-xl p-3 mb-4 text-sm space-y-1\">\r\n                            <div className=\"flex justify-between\"><span>Items ({cartCount})</span><span>‚Çπ{subtotal}</span></div>\r\n                            {discountAmount > 0 && <div className=\"flex justify-between text-green-600\"><span>Discount</span><span>-‚Çπ{discountAmount}</span></div>}\r\n                            {parcelAmount > 0 && <div className=\"flex justify-between text-blue-600\"><span>Parcel</span><span>+‚Çπ{parcelAmount}</span></div>}\r\n                            <div className=\"flex justify-between\"><span>GST</span><span>‚Çπ{taxAmount}</span></div>\r\n                            {tipAmount > 0 && <div className=\"flex justify-between text-pink-600\"><span>Tip</span><span>+‚Çπ{tipAmount}</span></div>}\r\n                        </div>\r\n                        <div className=\"bg-orange-50 rounded-xl p-4 mb-4\">\r\n                            <div className=\"flex justify-between text-2xl font-bold\">\r\n                                <span>Total</span>\r\n                                <span className=\"text-orange-600\">‚Çπ{cartTotal}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                            {(['Cash', 'Online'] as const).map(m => (\r\n                                <button key={m} onClick={() => setPaymentMethod(m)} className={`py-3 rounded-xl font-semibold transition-all ${paymentMethod === m ? 'bg-orange-500 text-white' : 'bg-gray-100'}`}>\r\n                                    {m === 'Cash' && 'üíµ'} {m === 'Online' && 'üåê'} {m}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                        <button onClick={onPayLater} className=\"w-full py-3 mb-4 rounded-xl font-bold text-sm bg-yellow-100 text-yellow-700 border border-yellow-300\">üïí Pay Later</button>\r\n                        {paymentMethod === 'Cash' && (\r\n                            <div className=\"mb-4 p-3 bg-yellow-50 rounded-xl\">\r\n                                <label className=\"text-sm font-semibold text-gray-600 mb-2 block\">üíµ Amount Received:</label>\r\n                                <div className=\"flex gap-2 mb-2\">\r\n                                    {[cartTotal, Math.ceil(cartTotal / 100) * 100, Math.ceil(cartTotal / 500) * 500].map(amt => (\r\n                                        <button key={amt} onClick={() => setAmountTendered(amt)} className={`px-3 py-2 rounded-lg text-sm font-semibold ${amountTendered === amt ? 'bg-green-500 text-white' : 'bg-white border'}`}>‚Çπ{amt}</button>\r\n                                    ))}\r\n                                </div>\r\n                                <input type=\"number\" value={amountTendered || ''} onChange={(e) => setAmountTendered(Number(e.target.value))} placeholder=\"Enter amount...\" className=\"w-full px-4 py-3 rounded-xl border text-xl font-bold text-center\" />\r\n                                {amountTendered >= cartTotal && <div className=\"mt-3 p-3 bg-green-100 rounded-lg text-center\"><div className=\"text-sm text-green-600\">Change Due</div><div className=\"text-3xl font-bold text-green-700\">‚Çπ{changeAmount}</div></div>}\r\n                                {amountTendered > 0 && amountTendered < cartTotal && <div className=\"mt-3 p-3 bg-red-100 rounded-lg text-center\"><div className=\"text-sm text-red-600\">Amount Short</div><div className=\"text-xl font-bold text-red-700\">‚Çπ{cartTotal - amountTendered}</div></div>}\r\n                            </div>\r\n                        )}\r\n                        <div className=\"flex gap-3\">\r\n                            <button onClick={onClose} className=\"flex-1 py-3 rounded-xl font-semibold bg-gray-100\">Cancel</button>\r\n                            <button onClick={onConfirm} disabled={paymentMethod === 'Cash' && amountTendered < cartTotal && amountTendered > 0} className=\"flex-1 py-3 rounded-xl font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white disabled:opacity-50\">‚úì Confirm</button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\n\r\ninterface SalesModalProps {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    totalRevenue: number;\r\n    cashAmount: number;\r\n    upiAmount: number;\r\n    totalOrders: number;\r\n}\r\n\r\nexport default function SalesModal({ show, onClose, totalRevenue, cashAmount, upiAmount, totalOrders }: SalesModalProps) {\r\n    if (!show) return null;\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl\" onClick={e => e.stopPropagation()}>\r\n                <h3 className=\"text-xl font-bold mb-6\">üìä Today's Sales</h3>\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"bg-orange-50 p-4 rounded-xl flex justify-between items-center\">\r\n                        <span className=\"text-gray-600\">Total Revenue</span>\r\n                        <span className=\"text-2xl font-bold text-orange-600\">‚Çπ{totalRevenue}</span>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"bg-green-50 p-3 rounded-xl\">\r\n                            <div className=\"text-xs text-gray-500 mb-1\">Cash</div>\r\n                            <div className=\"text-lg font-bold text-green-600\">‚Çπ{cashAmount}</div>\r\n                        </div>\r\n                        <div className=\"bg-blue-50 p-3 rounded-xl\">\r\n                            <div className=\"text-xs text-gray-500 mb-1\">Online/UPI</div>\r\n                            <div className=\"text-lg font-bold text-blue-600\">‚Çπ{upiAmount}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"p-3 bg-gray-50 rounded-xl flex justify-between\">\r\n                        <span className=\"text-gray-600\">Total Orders</span>\r\n                        <span className=\"font-bold\">{totalOrders}</span>\r\n                    </div>\r\n                </div>\r\n                <button onClick={onClose} className=\"w-full mt-6 py-3 rounded-xl font-semibold bg-gray-100\">Close</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\n\r\ninterface OnlineOrderModalProps {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    customer: { name: string; phone: string; address: string };\r\n    setCustomer: (v: { name: string; phone: string; address: string }) => void;\r\n    onStartOrder: () => void;\r\n}\r\n\r\nexport default function OnlineOrderModal({ show, onClose, customer, setCustomer, onStartOrder }: OnlineOrderModalProps) {\r\n    if (!show) return null;\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl\" onClick={e => e.stopPropagation()}>\r\n                <h3 className=\"text-xl font-bold mb-4\">üìû Online/Phone Order</h3>\r\n                <p className=\"text-sm text-gray-500 mb-4\">Customer details for delivery/pickup</p>\r\n                <div className=\"space-y-3\">\r\n                    <input type=\"text\" placeholder=\"üë§ Customer Name *\" value={customer.name} onChange={(e) => setCustomer({ ...customer, name: e.target.value })} className=\"w-full px-4 py-3 rounded-xl border focus:border-orange-500 outline-none\" />\r\n                    <input type=\"tel\" placeholder=\"üì± Phone Number *\" value={customer.phone} onChange={(e) => setCustomer({ ...customer, phone: e.target.value })} className=\"w-full px-4 py-3 rounded-xl border focus:border-orange-500 outline-none\" />\r\n                    <textarea placeholder=\"üè† Delivery Address (if delivery)\" value={customer.address} onChange={(e) => setCustomer({ ...customer, address: e.target.value })} className=\"w-full px-4 py-3 rounded-xl border focus:border-orange-500 outline-none resize-none\" rows={3} />\r\n                </div>\r\n                <div className=\"flex gap-3 mt-6\">\r\n                    <button onClick={onClose} className=\"flex-1 py-3 rounded-xl font-semibold bg-gray-100\">Cancel</button>\r\n                    <button onClick={onStartOrder} className=\"flex-1 py-3 rounded-xl font-semibold bg-gradient-to-r from-teal-500 to-green-500 text-white\">Start Order ‚Üí</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport { Order } from '../../lib/db-hooks';\r\n\r\ninterface RecentOrdersModalProps {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    orders: Order[];\r\n    onPrintReceipt: (order: Order) => void;\r\n    onSettlePayment: (orderId: number, method: 'Cash' | 'Online') => void;\r\n}\r\n\r\nexport default function RecentOrdersModal({ show, onClose, orders, onPrintReceipt, onSettlePayment }: RecentOrdersModalProps) {\r\n    if (!show) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-2xl p-6 w-full max-w-lg shadow-2xl h-[80vh] flex flex-col\" onClick={e => e.stopPropagation()}>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h3 className=\"text-xl font-bold\">üïí Recent Orders</h3>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">‚úï</button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto space-y-3\">\r\n                    {orders.length === 0 ? (\r\n                        <div className=\"text-center text-gray-500 py-10\">No recent orders today.</div>\r\n                    ) : (\r\n                        orders.map(order => (\r\n                            <div key={order.id} className=\"border rounded-xl p-3 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition-colors\">\r\n                                <div>\r\n                                    <div className=\"flex gap-2 items-center mb-1\">\r\n                                        <span className=\"font-bold text-gray-800\">#{order.id}</span>\r\n                                        <span className={`text-[10px] px-2 py-0.5 rounded-full ${order.status === 'Completed' ? 'bg-green-100 text-green-700' :\r\n                                            order.status === 'Cancelled' ? 'bg-red-100 text-red-700' : 'bg-orange-100 text-orange-700'\r\n                                            }`}>{order.status}</span>\r\n                                        <span className=\"text-xs text-gray-500\">{new Date(order.createdAt).toLocaleTimeString()}</span>\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-600\">\r\n                                        {order.table && <span className=\"mr-2\">ü™ë {order.table}</span>}\r\n                                        {order.type}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-500 truncate max-w-[200px]\">\r\n                                        {/* @ts-ignore */}\r\n                                        {order.items?.map((i: any) => `${i.quantity}x ${i.name}`).join(', ')}\r\n                                    </div>\r\n                                    {/* Unpaid Badge */}\r\n                                    {order.paymentStatus === 'Unpaid' && (\r\n                                        <div className=\"mt-1\">\r\n                                            <span className=\"bg-red-100 text-red-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase\">Unpaid (Pay Later)</span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"flex flex-col items-end gap-2\">\r\n                                    <div className=\"font-bold text-lg\">‚Çπ{order.total}</div>\r\n                                    <div className=\"flex gap-2\">\r\n                                        {order.paymentStatus === 'Unpaid' && order.status !== 'Cancelled' && (\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    const method = prompt(\"Settle Payment via: Cash or Online?\", \"Cash\");\r\n                                                    if (method) {\r\n                                                        // Normalize input slightly\r\n                                                        const cleanMethod = method.toLowerCase().includes('online') || method.toLowerCase().includes('upi') ? 'Online' : 'Cash';\r\n                                                        onSettlePayment(order.id, cleanMethod as 'Cash' | 'Online');\r\n                                                    }\r\n                                                }}\r\n                                                className=\"px-3 py-1 bg-green-500 text-white shadow-sm rounded-lg text-xs font-semibold hover:bg-green-600 animate-pulse\"\r\n                                            >\r\n                                                ‚úÖ Settle\r\n                                            </button>\r\n                                        )}\r\n                                        <button\r\n                                            onClick={() => onPrintReceipt(order)}\r\n                                            className=\"px-3 py-1 bg-white border shadow-sm rounded-lg text-xs font-semibold hover:bg-gray-50\"\r\n                                        >\r\n                                            üñ® Print\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Customer } from '../../lib/db-hooks';\r\n\r\ninterface CustomerSearchModalProps {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    customers: Customer[];\r\n    onSearch: (query: string) => void;\r\n    onSelect: (customer: Customer) => void;\r\n}\r\n\r\nexport default function CustomerSearchModal({ show, onClose, customers, onSearch, onSelect }: CustomerSearchModalProps) {\r\n    const [search, setSearch] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            setSearch('');\r\n            // Optional: trigger initial fetch?\r\n        }\r\n    }, [show]);\r\n\r\n    const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value;\r\n        setSearch(val);\r\n        onSearch(val);\r\n    };\r\n\r\n    if (!show) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl h-[80vh] flex flex-col\" onClick={e => e.stopPropagation()}>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h3 className=\"text-xl font-bold\">üë§ Search Customer</h3>\r\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700 text-xl\">‚úï</button>\r\n                </div>\r\n\r\n                <div className=\"relative mb-4\">\r\n                    <input\r\n                        autoFocus\r\n                        type=\"text\"\r\n                        placeholder=\"Search by Name or Phone...\"\r\n                        value={search}\r\n                        onChange={handleSearch}\r\n                        className=\"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 outline-none transition-all\"\r\n                    />\r\n                    <span className=\"absolute left-3 top-3.5 text-gray-400\">üîç</span>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto space-y-2 pr-1\">\r\n                    {customers.length === 0 ? (\r\n                        <div className=\"text-center text-gray-400 py-10\">\r\n                            {search ? 'No customers found' : 'Type to search...'}\r\n                        </div>\r\n                    ) : (\r\n                        customers.map(c => (\r\n                            <button\r\n                                key={c.id}\r\n                                onClick={() => onSelect(c)}\r\n                                className=\"w-full text-left p-3 rounded-xl hover:bg-orange-50 border border-transparent hover:border-orange-200 transition-all group\"\r\n                            >\r\n                                <div className=\"flex justify-between items-start\">\r\n                                    <div className=\"font-bold text-gray-800\">{c.name}</div>\r\n                                    <div className=\"text-xs font-bold text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full\">\r\n                                        {c.loyaltyPoints} pts\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center mt-1\">\r\n                                    <div className=\"text-sm text-gray-500\">üìû {c.phone}</div>\r\n                                    <div className=\"text-xs text-gray-400\">\r\n                                        Last: {new Date(c.lastVisit).toLocaleDateString()}\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}