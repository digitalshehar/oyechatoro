module.exports=[4577,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60824),e=a.i(72813);let f=a=>"string"==typeof a?a:"object"==typeof a&&null!==a?`${a.name} (${a.quantity||1})`:String(a);a.s(["default",0,()=>{let{orders:a,updateOrder:g,loading:h}=(0,d.useDbOrders)(),[i,j]=(0,c.useState)("live"),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!0),o=(0,c.useRef)(a.length),[p,q]=(0,c.useState)("all"),r=(0,c.useRef)(!0);(0,c.useEffect)(()=>{if(!h){if(r.current){r.current=!1,o.current=a.length;return}a.length>o.current&&m&&(()=>{try{new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3").play().catch(()=>{})}catch{}})(),o.current=a.length}},[a.length,m,h]);let s=a.reduce((a,b)=>"Cancelled"!==b.status?a+Number(b.total):a,0),t=a.length,u=a.filter(a=>"Pending"===a.status).length,v=a.filter(a=>"Cooking"===a.status).length,w=a.filter(a=>"Paid"===a.paymentStatus&&"Cancelled"!==a.status),x=a.filter(a=>"Unpaid"===a.paymentStatus&&"Cancelled"!==a.status),y=w.filter(a=>"Cash"===a.paymentMethod).reduce((a,b)=>a+Number(b.total),0),z=w.filter(a=>"UPI"===a.paymentMethod).reduce((a,b)=>a+Number(b.total),0),A=w.filter(a=>"Online"===a.paymentMethod||"Card"===a.paymentMethod).reduce((a,b)=>a+Number(b.total),0),B=y+z+A,C=x.reduce((a,b)=>a+Number(b.total),0),D=a.filter(a=>{let b=new Date(a.createdAt||Date.now()),c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=new Date(d.getTime()-6048e5),f=new Date(d.getTime()-2592e6),g="today"===p?b>=d:"week"===p?b>=e:"month"!==p||b>=f,h=!0;"live"===i?h=["Pending","Cooking","Ready"].includes(a.status):"completed"===i?h="Completed"===a.status:"cancelled"===i?h="Cancelled"===a.status:"train"===i&&(h=!!a.trainDetails);let j=k.toLowerCase(),l=a.id.toString().includes(j)||a.customer.toLowerCase().includes(j)||(a.trainDetails?.pnr||"").includes(j)||(a.mobile||"").includes(j);return g&&h&&l}).sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime());return h&&0===a.length?(0,b.jsx)("div",{className:"p-12 flex justify-center",children:(0,b.jsx)(e.default,{})}):(0,b.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8 animate-in w-full",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:["Order Management ",(0,b.jsx)("span",{className:"text-sm font-normal text-gray-400 bg-gray-100 px-2 py-1 rounded-full ml-2",children:"Live Database"})]}),(0,b.jsxs)("div",{className:"flex gap-3 w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 w-full md:w-64",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"ðŸ”"}),(0,b.jsx)("input",{placeholder:"Search ID, Name, PNR...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]",value:k,onChange:a=>l(a.target.value)})]}),(0,b.jsx)("button",{onClick:()=>n(!m),className:`p-2 rounded-xl border transition-colors ${m?"bg-white text-[var(--brand-primary)] border-[var(--brand-primary)]":"bg-gray-100 text-gray-400 border-gray-200"}`,title:m?"Sound On":"Sound Off",children:m?"ðŸ””":"ðŸ”•"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 w-full",children:[(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl shrink-0",children:"ðŸ’°"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Total Revenue"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-[var(--brand-dark)]",children:["â‚¹",s.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-2xl shrink-0",children:"ðŸ“¦"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Total Orders"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-[var(--brand-dark)]",children:t})]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl shrink-0",children:"â³"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Pending"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:u})]})]}),(0,b.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-2xl shrink-0",children:"ðŸ”¥"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Cooking"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:v})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 glass-card p-4 rounded-xl bg-gradient-to-r from-green-50 to-blue-50 border border-green-100",children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center gap-2",children:[(0,b.jsx)("span",{children:"ðŸ’³"})," Payment Summary (Today)"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,b.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-green-100",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸ’µ Cash"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["â‚¹",y.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-purple-100",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸ“± UPI"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:["â‚¹",z.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-blue-100",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸ’³ Online"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:["â‚¹",A.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-gray-200",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"âœ… Total Collected"}),(0,b.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["â‚¹",B.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-orange-100",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["â³ Pending (",x.length,")"]}),(0,b.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:["â‚¹",C.toLocaleString()]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"ðŸ—“ï¸ Period:"}),[{id:"today",label:"Today"},{id:"week",label:"This Week"},{id:"month",label:"This Month"},{id:"all",label:"All Time"}].map(a=>(0,b.jsx)("button",{onClick:()=>q(a.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${p===a.id?"bg-[var(--brand-dark)] text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:a.label},a.id)),(0,b.jsx)("button",{onClick:()=>{let a=new Blob([["Order ID,Customer,Mobile,Items,Total,Payment Method,Payment Status,Order Status,Date",...D.map(a=>[a.id,`"${a.customer}"`,a.mobile||"",`"${a.items.map(a=>f(a)).join(", ")}"`,a.total,a.paymentMethod||"",a.paymentStatus||"",a.status,new Date(a.createdAt||Date.now()).toLocaleString()].join(","))].join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`orders_${p}_${new Date().toISOString().split("T")[0]}.csv`,c.click()},className:"ml-auto px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 transition-colors flex items-center gap-2",children:"ðŸ“¥ Export CSV"})]}),(0,b.jsx)("div",{className:"flex flex-row overflow-x-auto pb-2 mb-6 gap-2 no-scrollbar w-full",children:[{id:"live",label:"ðŸ”´ Live Orders",count:a.filter(a=>["Pending","Cooking","Ready"].includes(a.status)).length},{id:"train",label:"ðŸš† Train Orders",count:a.filter(a=>!!a.trainDetails).length},{id:"completed",label:"âœ… Completed",count:a.filter(a=>"Completed"===a.status).length},{id:"cancelled",label:"âŒ Cancelled",count:a.filter(a=>"Cancelled"===a.status).length},{id:"all",label:"ðŸ“‚ All Orders",count:a.length}].map(a=>(0,b.jsxs)("button",{onClick:()=>j(a.id),className:`px-6 py-3 rounded-xl font-medium transition-all flex items-center gap-2 ${i===a.id?"bg-[var(--brand-dark)] text-white shadow-lg scale-105":"bg-white text-[var(--text-muted)] hover:bg-gray-50"} whitespace-nowrap flex-shrink-0`,children:[a.label,(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${i===a.id?"bg-white/20":"bg-gray-100"}`,children:a.count})]},a.id))}),(0,b.jsx)("div",{className:"grid gap-4 animate-in pb-24",children:0===D.length?(0,b.jsxs)("div",{className:"text-center py-12 text-[var(--text-muted)]",children:[(0,b.jsx)("div",{className:"text-6xl mb-4 opacity-30",children:"ðŸ“­"}),(0,b.jsx)("p",{children:"No orders found matching your search."})]}):D.map(a=>{let c,d,e;return(0,b.jsxs)("div",{className:`glass-card p-4 md:p-6 rounded-2xl flex flex-col md:flex-row items-start md:items-center justify-between gap-4 transition-all border-l-4 ${"Pending"===a.status?"border-l-yellow-400 bg-yellow-50/30":"Cooking"===a.status?"border-l-blue-400 bg-blue-50/30":"Ready"===a.status?"border-l-green-400 bg-green-50/30":"Cancelled"===a.status?"border-l-red-400 bg-red-50/30":"border-l-gray-400"}`,children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,b.jsxs)("span",{className:"font-bold text-lg text-[var(--brand-dark)] shrink-0",children:["#",a.id]}),(0,b.jsx)("span",{className:"text-sm text-[var(--text-muted)] bg-white px-2 py-1 rounded border shrink-0",children:new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shrink-0 ${"Pending"===a.status?"bg-yellow-100 text-yellow-700":"Cooking"===a.status?"bg-blue-100 text-blue-700":"Ready"===a.status?"bg-green-100 text-green-700":"Completed"===a.status?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:a.status}),a.trainDetails&&(0,b.jsx)("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold",children:"ðŸš† Train"}),(0,b.jsxs)("select",{value:a.paymentMethod||"Cash",onChange:b=>g(a.id,{paymentMethod:b.target.value}),className:`px-2 py-1 rounded text-xs font-bold border-0 cursor-pointer ${"Cash"===a.paymentMethod?"bg-yellow-100 text-yellow-700":"UPI"===a.paymentMethod?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:[(0,b.jsx)("option",{value:"Cash",children:"ðŸ’µ Cash"}),(0,b.jsx)("option",{value:"UPI",children:"ðŸ“± UPI"}),(0,b.jsx)("option",{value:"Online",children:"ðŸ’³ Online"}),(0,b.jsx)("option",{value:"Card",children:"ðŸ’³ Card"})]}),a.paymentStatus&&(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-bold ${"Paid"===a.paymentStatus?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:"Paid"===a.paymentStatus?"âœ… Paid":"â³ Unpaid"})]}),(0,b.jsx)("h3",{className:"font-bold text-[var(--text-main)] mb-1 text-lg truncate",children:a.customer||"Guest"}),a.mobile&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["ðŸ“± ",a.mobile]}),"Ready"===a.status&&(0,b.jsx)("a",{href:`https://wa.me/91${a.mobile}?text=${encodeURIComponent(`ðŸŽ‰ Hi ${a.customer}! Your order #${a.id} is READY!

Items: ${a.items.map(a=>f(a)).join(", ")}
Total: â‚¹${a.total}

Thank you from Oye Chatoro! ðŸ½ï¸`)}`,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded hover:bg-green-600",children:"ðŸ“² Notify"})]}),a.trainDetails&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-100 rounded-lg p-2 mb-2 text-sm text-red-800 grid grid-cols-3 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"block text-[10px] text-red-400 uppercase",children:"PNR"}),(0,b.jsx)("span",{className:"font-bold",children:a.trainDetails.pnr})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"block text-[10px] text-red-400 uppercase",children:"Train"}),(0,b.jsx)("span",{className:"font-bold",children:a.trainDetails.trainNo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"block text-[10px] text-red-400 uppercase",children:"Seat"}),(0,b.jsx)("span",{className:"font-bold",children:a.trainDetails.coachSeat||"N/A"})]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:a.items.map((a,c)=>(0,b.jsx)("span",{className:"text-sm bg-white px-3 py-1 rounded-full border border-gray-100 text-gray-600",children:f(a)},c))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 w-full md:w-auto justify-between md:justify-end border-t md:border-t-0 pt-4 md:pt-0 mt-2 md:mt-0",children:[(0,b.jsxs)("div",{className:"text-right min-w-[100px]",children:[(c=a.discount,d=Number(a.discountAmount||c?.amount||0),e=a.discountCode||c?.code,d>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"text-xs text-[var(--text-muted)] line-through",children:["â‚¹",Number(a.total)+d]}),(0,b.jsxs)("div",{className:"text-xs font-bold text-green-600 mb-1",children:["ðŸŽ ",e," (-â‚¹",d,")"]}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Total Pay"})]}):(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Total Amount"})),(0,b.jsxs)("div",{className:"font-bold text-xl md:text-2xl text-[var(--brand-primary)]",children:["â‚¹",a.total]})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-1 md:flex-none justify-end",children:[(0,b.jsx)("button",{onClick:()=>{let b,c;return b=`<html><head><title>Bill #${a.id}</title><style>body{font-family:monospace;padding:20px;max-width:300px;margin:0 auto;}.header{text-align:center;margin-bottom:20px;border-bottom:1px dashed #000;padding-bottom:10px;}.item{display:flex;justify-content:space-between;margin-bottom:5px;}.total{border-top:1px dashed #000;margin-top:10px;padding-top:10px;display:flex;justify-content:space-between;font-weight:bold;}.footer{text-align:center;margin-top:20px;font-size:12px;}</style></head><body><div class="header"><h2>Oye Chatoro</h2><p>Abu Road, Rajasthan</p><p>Order #${a.id}</p><p>${new Date().toLocaleString()}</p></div><div class="items">${a.items.map(a=>`<div class="item"><span>${f(a)}</span></div>`).join("")}</div><div class="total"><span>TOTAL</span><span>â‚¹${a.total}</span></div><div class="footer"><p>Thank you for dining with us!</p></div><script>window.print();</script></body></html>`,void((c=window.open("","","width=400,height=600"))&&(c.document.write(b),c.document.close()))},className:"p-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors",title:"Print Bill",children:"ðŸ–¨ï¸"}),"Unpaid"===a.paymentStatus&&(0,b.jsx)("button",{onClick:()=>g(a.id,{paymentStatus:"Paid"}),className:"p-3 bg-green-100 hover:bg-green-200 text-green-700 rounded-xl font-medium",title:"Mark as Paid",children:"ðŸ’°"}),"Paid"===a.paymentStatus&&(0,b.jsx)("button",{onClick:()=>g(a.id,{paymentStatus:"Unpaid"}),className:"p-3 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded-xl font-medium",title:"Mark as Unpaid",children:"â†©ï¸"}),"Pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>g(a.id,{status:"Cooking"}),className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all text-sm md:text-base",children:"Accept & Cook"}),(0,b.jsx)("button",{onClick:()=>g(a.id,{status:"Cancelled"}),className:"px-3 md:px-4 py-2 md:py-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl font-bold text-sm md:text-base",children:"Reject"})]}),"Cooking"===a.status&&(0,b.jsx)("button",{onClick:()=>g(a.id,{status:"Ready"}),className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-bold shadow-lg shadow-orange-200 text-sm md:text-base",children:"Mark Ready"}),"Ready"===a.status&&(0,b.jsxs)(b.Fragment,{children:[a.mobile&&(0,b.jsx)("a",{href:`https://wa.me/91${a.mobile.replace(/\D/g,"")}?text=${encodeURIComponent(`ðŸŽ‰ Hi ${a.customer}!

Your Order #${a.id} is READY! ðŸ”

Please collect from the counter.

Thank you!
- Oye Chatoro ðŸ™`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold shadow-lg shadow-green-200 text-sm md:text-base flex items-center gap-2",children:"ðŸ“² WhatsApp"}),(0,b.jsx)("button",{onClick:()=>g(a.id,{status:"Completed"}),className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 text-sm md:text-base",children:"Complete âœ“"})]})]})]})]},a.id)})})]})}])}];

//# sourceMappingURL=app_dashboard_orders_page_tsx_755865e5._.js.map