module.exports=[67409,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30801);function e(){let{orders:a,updateStatus:e}=(0,d.useOrders)(),[f,g]=(0,c.useState)("tickets"),[h,i]=(0,c.useState)(Date.now()),[j,k]=(0,c.useState)(!0),l=(0,c.useRef)(0);(0,c.useRef)(null);let m=a.filter(a=>"Pending"===a.status||"Cooking"===a.status).sort((a,b)=>a.id-b.id);(0,c.useEffect)(()=>{let a=setInterval(()=>i(Date.now()),1e4);return()=>clearInterval(a)},[]),(0,c.useEffect)(()=>{m.length>l.current&&j&&(()=>{try{let a=window.AudioContext||window.webkitAudioContext;if(!a)return;let b=new a,c=b.createOscillator(),d=b.createGain();c.connect(d),d.connect(b.destination),c.type="square",c.frequency.setValueAtTime(600,b.currentTime),c.frequency.exponentialRampToValueAtTime(300,b.currentTime+.5),d.gain.setValueAtTime(.3,b.currentTime),d.gain.exponentialRampToValueAtTime(.01,b.currentTime+.5),c.start(),c.stop(b.currentTime+.5)}catch(a){console.error(a)}})(),l.current=m.length},[m.length,j]);let n=m.reduce((a,b)=>(b.items.forEach(b=>{a[b]=(a[b]||0)+1}),a),{});return(0,b.jsxs)("div",{className:"p-4 h-full flex flex-col min-h-screen bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 animate-in",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:"ðŸ‘¨â€ðŸ³ Kitchen Display"}),(0,b.jsx)("p",{className:"text-[var(--text-muted)]",children:"Live Order Tracking"})]}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsxs)("div",{className:"bg-white p-1 rounded-xl border border-gray-200 flex",children:[(0,b.jsx)("button",{onClick:()=>g("tickets"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${"tickets"===f?"bg-[var(--brand-primary)] text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"ðŸŽ« Tickets"}),(0,b.jsx)("button",{onClick:()=>g("items"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${"items"===f?"bg-[var(--brand-primary)] text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"ðŸ” Items"})]}),(0,b.jsx)("button",{onClick:()=>k(!j),className:`p-3 rounded-xl border transition-colors ${j?"bg-white text-[var(--brand-primary)] border-[var(--brand-primary)]":"bg-gray-100 text-gray-400 border-gray-200"}`,children:j?"ðŸ””":"ðŸ”•"}),(0,b.jsxs)("div",{className:"bg-[var(--brand-dark)] text-white px-6 py-2 rounded-xl text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold leading-none",children:m.length}),(0,b.jsx)("div",{className:"text-[10px] uppercase tracking-wider opacity-80",children:"Pending"})]})]})]}),0===m.length?(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-[var(--text-muted)] animate-in",children:[(0,b.jsx)("div",{className:"text-8xl mb-6 opacity-20",children:"ðŸ‘¨â€ðŸ³"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-400",children:"All Caught Up!"}),(0,b.jsx)("p",{className:"text-gray-400",children:"Kitchen is clear."})]}):(0,b.jsx)(b.Fragment,{children:"tickets"===f?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in",children:m.map(a=>{let c="Pending"===a.status?Math.floor((h-a.id)/6e4):"Cooking"===a.status&&a.cookingStartedAt?Math.floor((h-a.cookingStartedAt)/6e4):0,d=c<10?"bg-green-100 text-green-800 border-green-200":c<20?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200 animate-pulse";return(0,b.jsxs)("div",{className:`bg-white rounded-2xl shadow-sm border-2 flex flex-col overflow-hidden transition-all hover:shadow-md ${"Pending"===a.status?"border-yellow-400":"border-blue-500"}`,children:[(0,b.jsxs)("div",{className:`p-4 flex justify-between items-start border-b ${d}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsxs)("span",{className:"font-bold text-lg",children:["#",a.id.toString().slice(-4)]}),(0,b.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 bg-white/50 rounded",children:a.type})]}),(0,b.jsx)("div",{className:"text-xs font-mono opacity-80",children:a.time})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold leading-none",children:[c,"m"]}),(0,b.jsx)("div",{className:"text-[10px] uppercase font-bold opacity-80",children:"Cooking"===a.status?"Cooking":"Waiting"})]})]}),(0,b.jsx)("div",{className:"p-4 flex-1 space-y-3",children:a.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-3 text-lg font-bold text-gray-800",children:[(0,b.jsx)("span",{className:"mt-1.5 w-2 h-2 rounded-full bg-gray-300 shrink-0"}),(0,b.jsx)("span",{className:"leading-tight",children:a})]},c))}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{let b,c;return b=`
            <html>
            <head>
                <title>KOT #${a.id}</title>
                <style>
                    body { font-family: monospace; padding: 20px; max-width: 300px; }
                    .header { font-size: 20px; font-weight: bold; text-align: center; margin-bottom: 10px; }
                    .meta { font-size: 14px; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
                    .item { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
                </style>
            </head>
            <body>
                <div class="header">KITCHEN TICKET</div>
                <div class="meta">
                    #${a.id}<br>
                    ${a.time}<br>
                    ${a.type}
                </div>
                ${a.items.map(a=>`<div class="item">â–¡ ${a}</div>`).join("")}
                <script>window.print();</script>
            </body>
            </html>
        `,void((c=window.open("","","width=300,height=600"))&&(c.document.write(b),c.document.close()))},className:"p-3 bg-white border border-gray-200 rounded-xl text-gray-500 hover:bg-gray-100",title:"Print KOT",children:"ðŸ–¨ï¸"}),"Pending"===a.status?(0,b.jsx)("button",{onClick:()=>e(a.id,"Cooking"),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all",children:"Start Cooking"}):(0,b.jsx)("button",{onClick:()=>e(a.id,"Ready"),className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-200 transition-all",children:"Mark Ready"})]})]},a.id)})}):(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 animate-in",children:Object.entries(n).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center text-center hover:shadow-md transition-all",children:[(0,b.jsx)("div",{className:"text-5xl font-bold text-[var(--brand-primary)] mb-2",children:c}),(0,b.jsx)("div",{className:"text-lg font-bold text-gray-800 leading-tight",children:a}),(0,b.jsx)("div",{className:"mt-4 text-xs text-gray-400 uppercase tracking-wider font-bold",children:"To Prepare"})]},a))})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_dashboard_kitchen_page_tsx_d9728870._.js.map