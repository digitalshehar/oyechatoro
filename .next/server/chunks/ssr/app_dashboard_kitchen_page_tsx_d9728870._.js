module.exports=[67409,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60824);function e({soundEnabled:a,setSoundEnabled:c,setIsTVMode:d,setShowPrepModal:e,setShowWasteModal:f,viewMode:g,setViewMode:h,filter:i,setFilter:j,stationFilter:k,setStationFilter:l,displayedCount:m,onLogout:n}){return(0,b.jsx)("div",{className:"sticky top-0 z-20 bg-gray-900/95 backdrop-blur-sm pb-4 pt-2 -mx-2 px-2 md:mx-0 md:px-0 md:static md:bg-transparent md:p-0 md:mb-8",children:(0,b.jsxs)("div",{className:"bg-gray-800 p-3 md:p-4 rounded-2xl border border-gray-700 shadow-xl flex flex-col md:flex-row justify-between gap-3 md:gap-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-2xl md:text-4xl bg-gray-700 p-1.5 md:p-2 rounded-xl",children:"ðŸ‘¨â€ðŸ³"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg md:text-2xl font-bold text-orange-500 leading-tight",children:"Chef Portal"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>c(!a),className:`text-xs px-2 py-0.5 rounded-full border ${a?"bg-green-500/20 border-green-500 text-green-400":"bg-gray-700 border-gray-600 text-gray-400"}`,children:a?"ðŸ””":"ðŸ”•"}),(0,b.jsx)("button",{onClick:()=>d(!0),className:"text-xs px-2 py-0.5 rounded-full border bg-purple-500/20 border-purple-500 text-purple-400",children:"ðŸ“º TV"}),(0,b.jsx)("button",{onClick:()=>e(!0),className:"text-xs px-2 py-0.5 rounded-full border bg-blue-500/20 border-blue-500 text-blue-400",children:"ðŸ“‹ Prep"}),(0,b.jsx)("button",{onClick:()=>f(!0),className:"text-xs px-2 py-0.5 rounded-full border bg-red-500/20 border-red-500 text-red-400",children:"ðŸ—‘ï¸"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 md:hidden",children:[(0,b.jsx)("span",{className:"font-bold text-white text-lg bg-gray-700 px-3 py-1.5 rounded-lg",children:m}),(0,b.jsx)("button",{onClick:n,className:"p-2 bg-red-500/10 text-red-400 rounded-lg",children:"ðŸšª"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[(0,b.jsx)("div",{className:"flex bg-gray-700 p-1 rounded-xl w-full",children:["active","history","stats"].map(a=>(0,b.jsx)("button",{onClick:()=>h(a),className:`flex-1 px-3 py-1.5 rounded-lg text-xs md:text-sm font-bold capitalize ${g===a?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:a},a))}),(0,b.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:[(0,b.jsxs)("select",{value:i,onChange:a=>j(a.target.value),className:"bg-gray-700 text-white text-xs md:text-sm rounded-lg px-3 py-2 border-none outline-none font-bold",children:[(0,b.jsx)("option",{value:"all",children:"All Types"}),(0,b.jsx)("option",{value:"dine-in",children:"Dine-in"}),(0,b.jsx)("option",{value:"takeaway",children:"Takeaway"})]}),(0,b.jsxs)("select",{value:k,onChange:a=>l(a.target.value),className:"bg-gray-700 text-white text-xs md:text-sm rounded-lg px-3 py-2 border-none outline-none font-bold",children:[(0,b.jsx)("option",{value:"all",children:"All Stations"}),(0,b.jsx)("option",{value:"tandoor",children:"Tandoor ðŸ”¥"}),(0,b.jsx)("option",{value:"chinese",children:"Chinese ðŸ¥¢"}),(0,b.jsx)("option",{value:"curry",children:"Curry ðŸ¥˜"})]})]})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:m}),(0,b.jsx)("div",{className:"text-xs text-gray-400 uppercase",children:"Count"})]}),(0,b.jsx)("button",{onClick:n,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-xl font-bold text-sm",children:"Logout"})]})]})})}function f({order:a,onUpdateStatus:c,onPrintKOT:d,currentTime:e}){let f,g=(f=new Date(a.createdAt).getTime(),"Pending"===a.status?Math.floor((e-f)/6e4):"Cooking"===a.status&&a.cookingStartedAt?Math.floor((e-new Date(a.cookingStartedAt).getTime())/6e4):Math.floor((e-f)/6e4)),h=g<10?"bg-green-100 text-green-800 border-green-200":g<20?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200 animate-pulse",i=new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),j=a.items;return(0,b.jsxs)("div",{className:`bg-white rounded-2xl shadow-sm border-2 flex flex-col overflow-hidden transition-all hover:shadow-md ${"Pending"===a.status?"border-yellow-400":"border-blue-500"}`,children:[(0,b.jsxs)("div",{className:`p-4 flex justify-between items-start border-b ${h}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsxs)("span",{className:"font-bold text-lg",children:["#",a.id]}),(0,b.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 bg-white/50 rounded",children:a.type})]}),(0,b.jsx)("div",{className:"text-xs font-mono opacity-80",children:i})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold leading-none",children:[g,"m"]}),(0,b.jsx)("div",{className:"text-[10px] uppercase font-bold opacity-80",children:"Cooking"===a.status?"Cooking":"Waiting"})]})]}),(0,b.jsx)("div",{className:"p-4 flex-1 space-y-3",children:Array.isArray(j)&&j.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-3 text-lg font-bold text-gray-800",children:[(0,b.jsx)("span",{className:"mt-1.5 w-2 h-2 rounded-full bg-gray-300 shrink-0"}),(0,b.jsxs)("span",{className:"leading-tight",children:[a.quantity,"x ",a.name,a.modifiers&&a.modifiers.length>0&&(0,b.jsx)("div",{className:"text-sm font-normal text-gray-500",children:a.modifiers.map(a=>`+ ${a.name}`).join(", ")}),a.note&&(0,b.jsxs)("div",{className:"text-sm font-normal text-red-500 italic",children:["Note: ",a.note]})]})]},c))}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>d(a),className:"p-3 bg-white border border-gray-200 rounded-xl text-gray-500 hover:bg-gray-100",title:"Print KOT",children:"ðŸ–¨ï¸"}),"Pending"===a.status?(0,b.jsx)("button",{onClick:()=>c(a.id,"Cooking"),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all",children:"Start Cooking"}):(0,b.jsx)("button",{onClick:()=>c(a.id,"Ready"),className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-200 transition-all",children:"Mark Ready"})]})]})}function g({items:a}){return 0===Object.keys(a).length?null:(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 animate-in",children:Object.entries(a).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center text-center hover:shadow-md transition-all",children:[(0,b.jsx)("div",{className:"text-5xl font-bold text-[var(--brand-primary)] mb-2",children:c}),(0,b.jsx)("div",{className:"text-lg font-bold text-gray-800 leading-tight",children:a}),(0,b.jsx)("div",{className:"mt-4 text-xs text-gray-400 uppercase tracking-wider font-bold",children:"To Prepare"})]},a))})}function h(){let{orders:a,updateOrder:h}=(0,d.useDbOrders)(),[i,j]=(0,c.useState)("active"),[k,l]=(0,c.useState)(Date.now()),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)("all"),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(0),z=(0,c.useMemo)(()=>{let b=a.filter(a=>"Pending"===a.status||"Cooking"===a.status);if("all"!==q&&(b="dine-in"===q?b.filter(a=>"DineIn"===a.type):b.filter(a=>"Takeaway"===a.type||"Delivery"===a.type)),"all"!==s){let a={tandoor:["tandoor","tikka","naan","roti","kebab"],chinese:["noodles","manchurian","rice","soup","chilli"],curry:["paneer","dal","kofta","masala","curry"]}[s]||[];b=b.filter(b=>b.items.some(b=>a.some(a=>b.name.toLowerCase().includes(a))))}return b.sort((a,b)=>new Date(a.createdAt).getTime()-new Date(b.createdAt).getTime())},[a,q,s]);(0,c.useEffect)(()=>{let a=setInterval(()=>l(Date.now()),1e4);return()=>clearInterval(a)},[]),(0,c.useEffect)(()=>{z.length>y.current&&m&&(()=>{try{let a=window.AudioContext||window.webkitAudioContext;if(!a)return;let b=new a,c=b.createOscillator(),d=b.createGain();c.connect(d),d.connect(b.destination),c.type="square",c.frequency.setValueAtTime(600,b.currentTime),c.frequency.exponentialRampToValueAtTime(300,b.currentTime+.5),d.gain.setValueAtTime(.3,b.currentTime),d.gain.exponentialRampToValueAtTime(.01,b.currentTime+.5),c.start(),c.stop(b.currentTime+.5)}catch(a){console.error(a)}})(),y.current=z.length},[z.length,m]);let A=(0,c.useMemo)(()=>z.reduce((a,b)=>{let c=b.items;return Array.isArray(c)&&c.forEach(b=>{if("all"!==s&&!(({tandoor:["tandoor","tikka","naan","roti","kebab"],chinese:["noodles","manchurian","rice","soup","chilli"],curry:["paneer","dal","kofta","masala","curry"]})[s]||[]).some(a=>b.name.toLowerCase().includes(a)))return;let c=b.name,d=b.quantity||1;a[c]=(a[c]||0)+d}),a},{}),[z,s]),B=a=>{let b=new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c=a.items.map(a=>`<div>â–¡ ${a.quantity}x ${a.name}</div>`).join(""),d=`
            <html>
            <head>
                <title>KOT #${a.id}</title>
                <style>
                    body { font-family: monospace; padding: 20px; max-width: 300px; }
                    .header { font-size: 20px; font-weight: bold; text-align: center; margin-bottom: 10px; }
                    .meta { font-size: 14px; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
                    .item { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
                </style>
            </head>
            <body>
                <div class="header">KITCHEN TICKET</div>
                <div class="meta">
                    #${a.id}<br>
                    ${b}<br>
                    ${a.type}
                </div>
                ${c}
                <script>window.print();</script>
            </body>
            </html>
        `,e=window.open("","","width=300,height=600");e&&(e.document.write(d),e.document.close())};return(0,b.jsxs)("div",{className:"p-4 h-full flex flex-col min-h-screen bg-gray-50",children:[(0,b.jsx)(e,{soundEnabled:m,setSoundEnabled:n,setIsTVMode:p,setShowPrepModal:v,setShowWasteModal:x,viewMode:i,setViewMode:j,filter:q,setFilter:r,stationFilter:s,setStationFilter:t,displayedCount:z.length,onLogout:()=>{}}),0===z.length&&"active"===i?(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-[var(--text-muted)] animate-in",children:[(0,b.jsx)("div",{className:"text-8xl mb-6 opacity-20",children:"ðŸ‘¨â€ðŸ³"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-400",children:"All Caught Up!"}),(0,b.jsx)("p",{className:"text-gray-400",children:"Kitchen is clear."})]}):(0,b.jsxs)(b.Fragment,{children:["active"===i&&(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in",children:z.map(a=>(0,b.jsx)(f,{order:a,onUpdateStatus:(a,b)=>h(a,{status:b}),onPrintKOT:B,currentTime:k},a.id))}),"stats"===i&&(0,b.jsx)(g,{items:A}),"history"===i&&(0,b.jsx)("div",{className:"text-center text-gray-500 mt-20",children:"History view coming soon..."})]})]})}a.s(["default",()=>h],67409)}];

//# sourceMappingURL=app_dashboard_kitchen_page_tsx_d9728870._.js.map