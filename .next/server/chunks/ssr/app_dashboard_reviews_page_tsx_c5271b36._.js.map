{"version":3,"sources":["../../../../app/dashboard/reviews/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useDbReviews, Review } from '../../lib/db-hooks';\r\n\r\nconst FALLBACK_REVIEWS: Review[] = [\r\n    {\r\n        id: '1',\r\n        name: \"Narsingh Ranga\",\r\n        avatar: null,\r\n        rating: 5,\r\n        date: \"4 days ago\",\r\n        comment: \"Fast, friendly, and efficient‚ÄîOye Chattore of Abu Road stands out. The staff ensures you're well taken care of.\"\r\n    },\r\n    {\r\n        id: '2',\r\n        name: \"Sagar Sachan 7173\",\r\n        avatar: null,\r\n        rating: 5,\r\n        date: \"5 days ago\",\r\n        comment: \"Very tasty pizza in Abu road like dominos pizza. Must visit place.\"\r\n    }\r\n];\r\n\r\nexport default function ReviewsPage() {\r\n    const { reviews, loading } = useDbReviews(FALLBACK_REVIEWS);\r\n    const [analyzing, setAnalyzing] = useState(false);\r\n    const [sentiment, setSentiment] = useState<any>(null);\r\n    const [replies, setReplies] = useState<Record<string, { text: string; loading: boolean }>>({});\r\n\r\n    const runSentiment = async () => {\r\n        setAnalyzing(true);\r\n        try {\r\n            const res = await fetch('/api/seo/ai/sentiment', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ reviews })\r\n            });\r\n            const data = await res.json();\r\n            setSentiment(data);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            setAnalyzing(false);\r\n        }\r\n    };\r\n\r\n    const generateReply = async (review: Review) => {\r\n        setReplies(prev => ({ ...prev, [review.id]: { text: '', loading: true } }));\r\n        try {\r\n            const res = await fetch('/api/seo/ai/reviews', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ reviewText: review.comment, rating: review.rating })\r\n            });\r\n            const data = await res.json();\r\n            setReplies(prev => ({ ...prev, [review.id]: { text: data.response, loading: false } }));\r\n        } catch (e) {\r\n            console.error(e);\r\n            setReplies(prev => ({ ...prev, [review.id]: { text: 'Failed to generate reply.', loading: false } }));\r\n        }\r\n    };\r\n\r\n    const avgRating = reviews.length > 0\r\n        ? (reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length).toFixed(1)\r\n        : '5.0';\r\n\r\n    if (loading) return <div className=\"p-8 text-center text-gray-500\">Loading Reviews...</div>;\r\n\r\n    return (\r\n        <div className=\"p-4 md:p-8 max-w-6xl mx-auto space-y-8\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 animate-in\">\r\n                <div>\r\n                    <h1 className=\"text-4xl font-black text-[var(--brand-dark)] tracking-tight\">Customer Intelligence</h1>\r\n                    <p className=\"text-[var(--text-muted)] font-medium\">Real-time feedback & AI-powered sentiment extraction.</p>\r\n                </div>\r\n                <div className=\"flex gap-4 items-center\">\r\n                    <div className=\"glass-card bg-white px-8 py-4 rounded-3xl flex items-center gap-4 shadow-xl border border-gray-100\">\r\n                        <span className=\"text-4xl font-black text-[var(--brand-dark)]\">{avgRating}</span>\r\n                        <div className=\"flex flex-col\">\r\n                            <span className=\"text-yellow-400 text-sm\">{'‚òÖ'.repeat(Math.round(Number(avgRating)))}</span>\r\n                            <span className=\"text-[var(--text-muted)] text-[10px] font-black uppercase tracking-widest\">Global Rating</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Sentiment Summary */}\r\n            <div className={`glass-card p-8 rounded-[40px] bg-black text-white relative overflow-hidden transition-all ${sentiment ? 'scale-100' : 'hover:scale-[1.02]'}`}>\r\n                <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n                    <span className=\"text-8xl\">ü§ñ</span>\r\n                </div>\r\n                <div className=\"relative z-10\">\r\n                    <h2 className=\"text-2xl font-black mb-2\">Market Sentiment Insight</h2>\r\n                    {!sentiment ? (\r\n                        <div className=\"space-y-4\">\r\n                            <p className=\"text-gray-400 text-sm max-w-lg mb-6 leading-relaxed\">Let AI analyze all current reviews to find hidden trends, common complaints, and areas of excellence.</p>\r\n                            <button\r\n                                onClick={runSentiment}\r\n                                disabled={analyzing}\r\n                                className=\"px-8 py-4 bg-white text-black rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-[var(--brand-secondary)] transition-all disabled:opacity-50\"\r\n                            >\r\n                                {analyzing ? 'üîç Deciphering Feedback...' : 'Analyze Market Sentiment'}\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid md:grid-cols-3 gap-8 mt-8 animate-in slide-in-from-bottom-5\">\r\n                            <div className=\"space-y-4\">\r\n                                <p className=\"text-[10px] font-black text-gray-500 uppercase tracking-widest\">Overall Score</p>\r\n                                <div className=\"text-3xl font-black text-green-400\">{sentiment.overallSentiment}</div>\r\n                            </div>\r\n                            <div className=\"space-y-4\">\r\n                                <p className=\"text-[10px] font-black text-gray-500 uppercase tracking-widest\">Key Pros</p>\r\n                                <ul className=\"text-sm space-y-2 text-gray-300\">\r\n                                    {sentiment.topPros.map((pro: string, i: number) => <li key={i} className=\"flex gap-2\"><span>‚ú®</span> {pro}</li>)}\r\n                                </ul>\r\n                            </div>\r\n                            <div className=\"space-y-4\">\r\n                                <p className=\"text-[10px] font-black text-gray-500 uppercase tracking-widest\">Opportunities</p>\r\n                                <ul className=\"text-sm space-y-2 text-gray-300\">\r\n                                    {sentiment.topCons.map((con: string, i: number) => <li key={i} className=\"flex gap-2\"><span>‚ö†Ô∏è</span> {con}</li>)}\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 animate-in\" style={{ animationDelay: '0.1s' }}>\r\n                {reviews.map((review) => (\r\n                    <div key={review.id} className=\"glass-card bg-white p-8 rounded-3xl border border-gray-100 hover:shadow-2xl transition-all group overflow-hidden relative\">\r\n                        <div className=\"absolute top-0 left-0 w-1 h-full bg-gray-50 group-hover:bg-[var(--brand-primary)] transition-colors\"></div>\r\n\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-start mb-6 gap-4\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-14 h-14 rounded-2xl bg-gray-50 text-[var(--brand-primary)] flex items-center justify-center font-black text-xl shadow-inner group-hover:bg-[var(--brand-primary)] group-hover:text-white transition-all\">\r\n                                    {review.avatar ? (\r\n                                        <img src={review.avatar} className=\"w-full h-full object-cover rounded-2xl\" alt=\"\" />\r\n                                    ) : (\r\n                                        review.name.charAt(0)\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <h3 className=\"font-black text-xl text-gray-900\">{review.name}</h3>\r\n                                    <div className=\"flex items-center gap-2 text-[10px] font-black text-gray-400 uppercase tracking-widest\">\r\n                                        <span>Google Customer</span>\r\n                                        <span>‚Ä¢</span>\r\n                                        <span>{new Date(review.date).toLocaleDateString()}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-1 bg-gray-50 px-4 py-2 rounded-xl border border-gray-100\">\r\n                                <span className=\"text-yellow-400 text-lg\">‚òÖ</span>\r\n                                <span className=\"font-black text-gray-900\">{review.rating}.0</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <p className=\"text-gray-600 leading-relaxed mb-8 italic text-lg font-serif\">\"{review.comment}\"</p>\r\n\r\n                        <div className=\"flex flex-col space-y-4\">\r\n                            <div className=\"flex gap-4\">\r\n                                <button\r\n                                    onClick={() => generateReply(review)}\r\n                                    disabled={replies[review.id]?.loading}\r\n                                    className=\"px-6 py-3 bg-gray-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-[var(--brand-primary)] transition-all disabled:opacity-50 flex items-center gap-2\"\r\n                                >\r\n                                    {replies[review.id]?.loading ? 'ü§ñ Crafting Response...' : '‚ú® Generate AI Reply'}\r\n                                </button>\r\n                                <button className=\"px-6 py-3 bg-gray-50 text-gray-400 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-gray-100 transition-all\">Share</button>\r\n                            </div>\r\n\r\n                            {replies[review.id]?.text && (\r\n                                <div className=\"p-6 bg-blue-50 rounded-2xl border border-blue-100 animate-in slide-in-from-top-2\">\r\n                                    <div className=\"flex items-center gap-2 mb-3\">\r\n                                        <span className=\"text-xs font-black text-blue-600 uppercase tracking-[0.2em]\">Automated Reply Draft</span>\r\n                                        <span className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></span>\r\n                                    </div>\r\n                                    <p className=\"text-sm text-blue-900 leading-relaxed font-medium\">{replies[review.id].text}</p>\r\n                                    <div className=\"mt-4 flex gap-2\">\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                navigator.clipboard.writeText(replies[review.id].text);\r\n                                                alert('Response copied to clipboard!');\r\n                                            }}\r\n                                            className=\"text-[10px] font-black text-blue-600 hover:underline uppercase\"\r\n                                        >\r\n                                            Copy to Clipboard\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}