(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79648,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(28519);let a="oye_chatoro_expenses",l="oye_chatoro_day_closing";function d(){let[e,d]=(0,t.useState)("closing"),[n,i]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[x,m]=(0,t.useState)([]),[h,g]=(0,t.useState)({category:"Ingredients",description:"",amount:""}),[p,u]=(0,t.useState)(new Date().toISOString().split("T")[0]);(0,t.useEffect)(()=>{i((0,r.getOrders)());let e=localStorage.getItem(a);e&&c(JSON.parse(e));let s=localStorage.getItem(l);s&&m(JSON.parse(s));let t=()=>i((0,r.getOrders)());return window.addEventListener("ordersUpdated",t),()=>window.removeEventListener("ordersUpdated",t)},[]),new Date().toISOString().split("T")[0];let b=n.filter(e=>new Date(e.createdAt||Date.now()).toISOString().split("T")[0]===p&&"Cancelled"!==e.status),j=b.reduce((e,s)=>e+s.total,0),N=b.filter(e=>"Cash"===e.paymentMethod&&"Paid"===e.paymentStatus).reduce((e,s)=>e+s.total,0),f=b.filter(e=>"Cash"!==e.paymentMethod&&"Paid"===e.paymentStatus).reduce((e,s)=>e+s.total,0),v=o.filter(e=>e.date===p).reduce((e,s)=>e+s.amount,0),y=N-v,S=Math.round(.05*j/1.05),w=j-S,T=x.includes(p);return(0,s.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:"ðŸ’° Finance Management"}),(0,s.jsx)("p",{className:"text-[var(--text-muted)]",children:"Cash closing, expenses & tax reports"})]}),(0,s.jsx)("input",{type:"date",value:p,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]"})]}),(0,s.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"closing",label:"ðŸ“Š Daily Closing"},{id:"expenses",label:"ðŸ’¸ Expenses"},{id:"gst",label:"ðŸ“„ GST Report"}].map(t=>(0,s.jsx)("button",{onClick:()=>d(t.id),className:`px-6 py-3 rounded-xl font-medium transition-all whitespace-nowrap ${e===t.id?"bg-[var(--brand-dark)] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:t.label},t.id))}),"closing"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-blue-50 border border-blue-100",children:[(0,s.jsx)("div",{className:"text-xs text-blue-600 mb-1",children:"Total Sales"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:["â‚¹",j]}),(0,s.jsxs)("div",{className:"text-xs text-blue-500",children:[b.length," orders"]})]}),(0,s.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-green-50 border border-green-100",children:[(0,s.jsx)("div",{className:"text-xs text-green-600 mb-1",children:"ðŸ’µ Cash In"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:["â‚¹",N]})]}),(0,s.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-purple-50 border border-purple-100",children:[(0,s.jsx)("div",{className:"text-xs text-purple-600 mb-1",children:"ðŸ’³ Online"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:["â‚¹",f]})]}),(0,s.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-red-50 border border-red-100",children:[(0,s.jsx)("div",{className:"text-xs text-red-600 mb-1",children:"ðŸ’¸ Expenses"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-700",children:["â‚¹",v]})]}),(0,s.jsxs)("div",{className:"glass-card p-4 rounded-xl bg-yellow-50 border border-yellow-100",children:[(0,s.jsx)("div",{className:"text-xs text-yellow-600 mb-1",children:"ðŸ¦ Net Cash"}),(0,s.jsxs)("div",{className:`text-2xl font-bold ${y>=0?"text-green-700":"text-red-700"}`,children:["â‚¹",y]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Day Closing"}),T?(0,s.jsxs)("div",{className:"bg-green-100 text-green-800 p-4 rounded-xl flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"âœ…"}),(0,s.jsxs)("span",{className:"font-medium",children:["Day already closed for ",p]})]}):(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,s.jsxs)("p",{className:"text-gray-600",children:["Close the day to finalize all transactions for ",p,"."]}),(0,s.jsx)("button",{onClick:()=>{if(x.includes(p))return;let e=[...x,p];m(e),localStorage.setItem(l,JSON.stringify(e)),alert(`Day closed for ${p}!

Total Sales: â‚¹${j}
Cash: â‚¹${N}
Online: â‚¹${f}
Expenses: â‚¹${v}
Net Cash: â‚¹${y}`)},className:"px-6 py-3 bg-[var(--brand-primary)] text-white rounded-xl font-bold hover:bg-orange-600 transition-colors",children:"ðŸ”’ Close Day"})]})]})]}),"expenses"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Add Expense"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("select",{value:h.category,onChange:e=>g({...h,category:e.target.value}),className:"px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]",children:[(0,s.jsx)("option",{children:"Ingredients"}),(0,s.jsx)("option",{children:"Salary"}),(0,s.jsx)("option",{children:"Rent"}),(0,s.jsx)("option",{children:"Utilities"}),(0,s.jsx)("option",{children:"Maintenance"}),(0,s.jsx)("option",{children:"Marketing"}),(0,s.jsx)("option",{children:"Other"})]}),(0,s.jsx)("input",{placeholder:"Description",value:h.description,onChange:e=>g({...h,description:e.target.value}),className:"px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]"}),(0,s.jsx)("input",{type:"number",placeholder:"Amount â‚¹",value:h.amount,onChange:e=>g({...h,amount:e.target.value}),className:"px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]"}),(0,s.jsx)("button",{onClick:()=>{if(!h.description||!h.amount)return;let e=[{id:`exp_${Date.now()}`,date:p,category:h.category,description:h.description,amount:parseFloat(h.amount)},...o];c(e),localStorage.setItem(a,JSON.stringify(e)),g({category:"Ingredients",description:"",amount:""})},className:"px-6 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors",children:"+ Add Expense"})]})]}),(0,s.jsxs)("div",{className:"glass-card rounded-xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"font-bold",children:["Expenses for ",p]}),(0,s.jsxs)("span",{className:"text-red-600 font-bold",children:["Total: â‚¹",v]})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:0===o.filter(e=>e.date===p).length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-400",children:"No expenses for this day"}):o.filter(e=>e.date===p).map(e=>(0,s.jsxs)("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded mr-2",children:e.category}),(0,s.jsx)("span",{className:"font-medium",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"font-bold text-red-600",children:["â‚¹",e.amount]}),(0,s.jsx)("button",{onClick:()=>{var s;let t;return s=e.id,void(c(t=o.filter(e=>e.id!==s)),localStorage.setItem(a,JSON.stringify(t)))},className:"text-gray-400 hover:text-red-500",children:"ðŸ—‘ï¸"})]})]},e.id))})]})]}),"gst"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4",children:["GST Summary for ",p]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[(0,s.jsx)("div",{className:"text-sm text-blue-600 mb-1",children:"Total Sales (incl. GST)"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-700",children:["â‚¹",j]})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100",children:[(0,s.jsx)("div",{className:"text-sm text-green-600 mb-1",children:"Base Amount"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-700",children:["â‚¹",w]})]}),(0,s.jsxs)("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100",children:[(0,s.jsx)("div",{className:"text-sm text-orange-600 mb-1",children:"GST Amount (5%)"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-orange-700",children:["â‚¹",S]})]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:"GST Breakup (CGST + SGST)"}),(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-4 text-left",children:"Description"}),(0,s.jsx)("th",{className:"p-4 text-right",children:"Rate"}),(0,s.jsx)("th",{className:"p-4 text-right",children:"Amount"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-4",children:"Taxable Value"}),(0,s.jsx)("td",{className:"p-4 text-right",children:"-"}),(0,s.jsxs)("td",{className:"p-4 text-right font-medium",children:["â‚¹",w]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-4",children:"CGST"}),(0,s.jsx)("td",{className:"p-4 text-right",children:"2.5%"}),(0,s.jsxs)("td",{className:"p-4 text-right font-medium",children:["â‚¹",Math.round(S/2)]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-4",children:"SGST"}),(0,s.jsx)("td",{className:"p-4 text-right",children:"2.5%"}),(0,s.jsxs)("td",{className:"p-4 text-right font-medium",children:["â‚¹",Math.round(S/2)]})]}),(0,s.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,s.jsx)("td",{className:"p-4",children:"Total Tax"}),(0,s.jsx)("td",{className:"p-4 text-right",children:"5%"}),(0,s.jsxs)("td",{className:"p-4 text-right",children:["â‚¹",S]})]})]})]})]}),(0,s.jsx)("button",{onClick:()=>{let e=new Blob([`GST Report - ${p}

Total Sales: â‚¹${j}
Base Amount: â‚¹${w}
CGST (2.5%): â‚¹${Math.round(S/2)}
SGST (2.5%): â‚¹${Math.round(S/2)}
Total GST: â‚¹${S}`],{type:"text/plain"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`gst_report_${p}.txt`,t.click()},className:"w-full md:w-auto px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:"ðŸ“¥ Download GST Report"})]})]})}e.s(["default",()=>d])}]);