(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92911,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(28519);let l=e=>"string"==typeof e?e:"object"==typeof e&&null!==e?`${e.name} (${e.quantity||1})`:String(e);e.s(["default",0,()=>{let{orders:e,updateStatus:r}=(0,s.useOrders)(),[d,n]=(0,a.useState)("live"),[i,o]=(0,a.useState)(""),[c,x]=(0,a.useState)(!0),m=(0,a.useRef)(e.length),[g,p]=(0,a.useState)("today"),u=(0,a.useRef)(!0);(0,a.useEffect)(()=>{if(u.current){u.current=!1,m.current=e.length;return}e.length>m.current&&c&&(()=>{try{new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3").play().catch(()=>{})}catch{}})(),m.current=e.length},[e.length,c]);let h=e.reduce((e,t)=>"Cancelled"!==t.status?e+t.total:e,0),b=e.length,f=e.filter(e=>"Pending"===e.status).length,y=e.filter(e=>"Cooking"===e.status).length,v=e.filter(e=>"Paid"===e.paymentStatus&&"Cancelled"!==e.status),j=e.filter(e=>"Unpaid"===e.paymentStatus&&"Cancelled"!==e.status),w=v.filter(e=>"Cash"===e.paymentMethod).reduce((e,t)=>e+t.total,0),N=v.filter(e=>"UPI"===e.paymentMethod).reduce((e,t)=>e+t.total,0),C=v.filter(e=>"Online"===e.paymentMethod).reduce((e,t)=>e+t.total,0),k=j.reduce((e,t)=>e+t.total,0),P=e.filter(e=>{let t=new Date(e.createdAt||Date.now()),a=new Date,s=new Date(a.getFullYear(),a.getMonth(),a.getDate()),r=new Date(s.getTime()-6048e5),n=new Date(s.getTime()-2592e6),o="today"===g?t>=s:"week"===g?t>=r:"month"!==g||t>=n,c="live"===d?["Pending","Cooking","Ready"].includes(e.status):"completed"===d?"Completed"===e.status:"cancelled"===d?"Cancelled"===e.status:"train"!==d||!!e.trainDetails,x=i.toLowerCase(),m=e.id.toString().includes(x)||e.customer.toLowerCase().includes(x)||e.items.some(e=>l(e).toLowerCase().includes(x))||(e.trainDetails?.pnr||"").includes(x)||(e.mobile||"").includes(x);return o&&c&&m}).sort((e,t)=>(t.createdAt||0)-(e.createdAt||0));return(0,t.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8 animate-in w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:"Order Management"}),(0,t.jsxs)("div",{className:"flex gap-3 w-full md:w-auto",children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full md:w-64",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"ðŸ”"}),(0,t.jsx)("input",{placeholder:"Search ID, Name, PNR...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]",value:i,onChange:e=>o(e.target.value)})]}),(0,t.jsx)("button",{onClick:()=>x(!c),className:`p-2 rounded-xl border transition-colors ${c?"bg-white text-[var(--brand-primary)] border-[var(--brand-primary)]":"bg-gray-100 text-gray-400 border-gray-200"}`,title:c?"Sound On":"Sound Off",children:c?"ðŸ””":"ðŸ”•"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 w-full",children:[(0,t.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl shrink-0",children:"ðŸ’°"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Total Revenue"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-[var(--brand-dark)]",children:["â‚¹",h]})]})]}),(0,t.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-2xl shrink-0",children:"ðŸ“¦"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Total Orders"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-[var(--brand-dark)]",children:b})]})]}),(0,t.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl shrink-0",children:"â³"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Pending"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:f})]})]}),(0,t.jsxs)("div",{className:"glass-card p-4 rounded-xl flex items-center gap-4 bg-white/60",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-2xl shrink-0",children:"ðŸ”¥"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-[var(--text-muted)] truncate",children:"Cooking"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:y})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 glass-card p-4 rounded-xl bg-gradient-to-r from-green-50 to-blue-50 border border-green-100",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"ðŸ’³"})," Payment Summary (Today)"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,t.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-green-100",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸ’µ Cash"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["â‚¹",w]})]}),(0,t.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-purple-100",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸ“± UPI"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:["â‚¹",N]})]}),(0,t.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-blue-100",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"ðŸ’³ Online"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:["â‚¹",C]})]}),(0,t.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-gray-200",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"âœ… Total Collected"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["â‚¹",w+N+C]})]}),(0,t.jsxs)("div",{className:"bg-white/80 p-3 rounded-lg text-center border border-orange-100",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["â³ Pending (",j.length,")"]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:["â‚¹",k]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"ðŸ—“ï¸ Period:"}),[{id:"today",label:"Today"},{id:"week",label:"This Week"},{id:"month",label:"This Month"},{id:"all",label:"All Time"}].map(e=>(0,t.jsx)("button",{onClick:()=>p(e.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${g===e.id?"bg-[var(--brand-dark)] text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:e.label},e.id)),(0,t.jsx)("button",{onClick:()=>{let e=new Blob([["Order ID,Customer,Mobile,Items,Total,Payment Method,Payment Status,Order Status,Date",...P.map(e=>[e.id,`"${e.customer}"`,e.mobile||"",`"${e.items.map(e=>l(e)).join(", ")}"`,e.total,e.paymentMethod||"",e.paymentStatus||"",e.status,new Date(e.createdAt||Date.now()).toLocaleString()].join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`orders_${g}_${new Date().toISOString().split("T")[0]}.csv`,a.click()},className:"ml-auto px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 transition-colors flex items-center gap-2",children:"ðŸ“¥ Export CSV"})]}),(0,t.jsx)("div",{className:"flex flex-row overflow-x-auto pb-2 mb-6 gap-2 no-scrollbar w-full",children:[{id:"live",label:"ðŸ”´ Live Orders",count:e.filter(e=>["Pending","Cooking","Ready"].includes(e.status)).length},{id:"train",label:"ðŸš† Train Orders",count:e.filter(e=>!!e.trainDetails).length},{id:"completed",label:"âœ… Completed",count:e.filter(e=>"Completed"===e.status).length},{id:"cancelled",label:"âŒ Cancelled",count:e.filter(e=>"Cancelled"===e.status).length},{id:"all",label:"ðŸ“‚ All Orders",count:e.length}].map(e=>(0,t.jsxs)("button",{onClick:()=>n(e.id),className:`px-6 py-3 rounded-xl font-medium transition-all flex items-center gap-2 ${d===e.id?"bg-[var(--brand-dark)] text-white shadow-lg scale-105":"bg-white text-[var(--text-muted)] hover:bg-gray-50"} whitespace-nowrap flex-shrink-0`,children:[e.label,(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${d===e.id?"bg-white/20":"bg-gray-100"}`,children:e.count})]},e.id))}),(0,t.jsx)("div",{className:"grid gap-4 animate-in pb-24",children:0===P.length?(0,t.jsxs)("div",{className:"text-center py-12 text-[var(--text-muted)]",children:[(0,t.jsx)("div",{className:"text-6xl mb-4 opacity-30",children:"ðŸ“­"}),(0,t.jsx)("p",{children:"No orders found matching your search."})]}):P.map(e=>(0,t.jsxs)("div",{className:`glass-card p-4 md:p-6 rounded-2xl flex flex-col md:flex-row items-start md:items-center justify-between gap-4 transition-all border-l-4 ${"Pending"===e.status?"border-l-yellow-400 bg-yellow-50/30":"Cooking"===e.status?"border-l-blue-400 bg-blue-50/30":"Ready"===e.status?"border-l-green-400 bg-green-50/30":"Cancelled"===e.status?"border-l-red-400 bg-red-50/30":"border-l-gray-400"}`,children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,t.jsxs)("span",{className:"font-bold text-lg text-[var(--brand-dark)] shrink-0",children:["#",e.id]}),(0,t.jsx)("span",{className:"text-sm text-[var(--text-muted)] bg-white px-2 py-1 rounded border shrink-0",children:e.time}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shrink-0 ${"Pending"===e.status?"bg-yellow-100 text-yellow-700":"Cooking"===e.status?"bg-blue-100 text-blue-700":"Ready"===e.status?"bg-green-100 text-green-700":"Completed"===e.status?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:e.status}),e.trainDetails&&(0,t.jsx)("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold",children:"ðŸš† Train"}),(0,t.jsxs)("select",{value:e.paymentMethod||"Cash",onChange:t=>(0,s.updatePaymentMethod)(e.id,t.target.value),className:`px-2 py-1 rounded text-xs font-bold border-0 cursor-pointer ${"Cash"===e.paymentMethod?"bg-yellow-100 text-yellow-700":"UPI"===e.paymentMethod?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:[(0,t.jsx)("option",{value:"Cash",children:"ðŸ’µ Cash"}),(0,t.jsx)("option",{value:"UPI",children:"ðŸ“± UPI"}),(0,t.jsx)("option",{value:"Online",children:"ðŸ’³ Online"})]}),e.paymentStatus&&(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-bold ${"Paid"===e.paymentStatus?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:"Paid"===e.paymentStatus?"âœ… Paid":"â³ Unpaid"})]}),(0,t.jsx)("h3",{className:"font-bold text-[var(--text-main)] mb-1 text-lg truncate",children:e.customer}),e.mobile&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["ðŸ“± ",e.mobile]}),"Ready"===e.status&&(0,t.jsx)("a",{href:`https://wa.me/91${e.mobile}?text=${encodeURIComponent(`ðŸŽ‰ Hi! Your order #${e.id} is READY!

Items: ${e.items.map(e=>l(e)).join(", ")}
Total: â‚¹${e.total}

Thank you from Oye Chatoro! ðŸ½ï¸`)}`,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded hover:bg-green-600",children:"ðŸ“² Notify"})]}),e.trainDetails&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-100 rounded-lg p-2 mb-2 text-sm text-red-800 grid grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block text-[10px] text-red-400 uppercase",children:"PNR"}),(0,t.jsx)("span",{className:"font-bold",children:e.trainDetails.pnr})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block text-[10px] text-red-400 uppercase",children:"Train"}),(0,t.jsx)("span",{className:"font-bold",children:e.trainDetails.trainNo})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block text-[10px] text-red-400 uppercase",children:"Seat"}),(0,t.jsx)("span",{className:"font-bold",children:e.trainDetails.coachSeat||"N/A"})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.items.map((e,a)=>(0,t.jsx)("span",{className:"text-sm bg-white px-3 py-1 rounded-full border border-gray-100 text-gray-600",children:l(e)},a))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6 w-full md:w-auto justify-between md:justify-end border-t md:border-t-0 pt-4 md:pt-0 mt-2 md:mt-0",children:[(0,t.jsxs)("div",{className:"text-right min-w-[100px]",children:[(0,t.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Total Amount"}),(0,t.jsxs)("div",{className:"font-bold text-xl md:text-2xl text-[var(--brand-primary)]",children:["â‚¹",e.total]})]}),(0,t.jsxs)("div",{className:"flex gap-2 flex-1 md:flex-none justify-end",children:[(0,t.jsx)("button",{onClick:()=>{let t,a;return t=`<html><head><title>Bill #${e.id}</title><style>body{font-family:monospace;padding:20px;max-width:300px;margin:0 auto;}.header{text-align:center;margin-bottom:20px;border-bottom:1px dashed #000;padding-bottom:10px;}.item{display:flex;justify-content:space-between;margin-bottom:5px;}.total{border-top:1px dashed #000;margin-top:10px;padding-top:10px;display:flex;justify-content:space-between;font-weight:bold;}.footer{text-align:center;margin-top:20px;font-size:12px;}</style></head><body><div class="header"><h2>Oye Chatoro</h2><p>Abu Road, Rajasthan</p><p>Order #${e.id}</p><p>${new Date().toLocaleString()}</p></div><div class="items">${e.items.map(e=>`<div class="item"><span>${l(e)}</span></div>`).join("")}</div><div class="total"><span>TOTAL</span><span>â‚¹${e.total}</span></div><div class="footer"><p>Thank you for dining with us!</p></div><script>window.print();</script></body></html>`,void((a=window.open("","","width=400,height=600"))&&(a.document.write(t),a.document.close()))},className:"p-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors",title:"Print Bill",children:"ðŸ–¨ï¸"}),"Unpaid"===e.paymentStatus&&(0,t.jsx)("button",{onClick:()=>(0,s.updatePaymentStatus)(e.id,"Paid"),className:"p-3 bg-green-100 hover:bg-green-200 text-green-700 rounded-xl font-medium",title:"Mark as Paid",children:"ðŸ’°"}),"Paid"===e.paymentStatus&&(0,t.jsx)("button",{onClick:()=>(0,s.updatePaymentStatus)(e.id,"Unpaid"),className:"p-3 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded-xl font-medium",title:"Mark as Unpaid",children:"â†©ï¸"}),"Pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>r(e.id,"Cooking"),className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all text-sm md:text-base",children:"Accept & Cook"}),(0,t.jsx)("button",{onClick:()=>r(e.id,"Cancelled"),className:"px-3 md:px-4 py-2 md:py-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl font-bold text-sm md:text-base",children:"Reject"})]}),"Cooking"===e.status&&(0,t.jsx)("button",{onClick:()=>r(e.id,"Ready"),className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-bold shadow-lg shadow-orange-200 text-sm md:text-base",children:"Mark Ready"}),"Ready"===e.status&&(0,t.jsx)("button",{onClick:()=>r(e.id,"Completed"),className:"flex-1 md:flex-none px-4 md:px-6 py-2 md:py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-200 text-sm md:text-base",children:"Complete Order"})]})]})]},e.id))})]})}])}]);