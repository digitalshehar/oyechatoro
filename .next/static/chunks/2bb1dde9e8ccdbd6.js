(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28519,e=>{"use strict";let t,s,i,r;var n,o,a=e.i(71645);let c=Object.create(null);c.open="0",c.close="1",c.ping="2",c.pong="3",c.message="4",c.upgrade="5",c.noop="6";let d=Object.create(null);Object.keys(c).forEach(e=>{d[c[e]]=e});let h={type:"error",data:"parser error"},l="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),u="function"==typeof ArrayBuffer,p=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,f=({type:e,data:t},s,i)=>{if(l&&t instanceof Blob)if(s)return i(t);else return g(t,i);if(u&&(t instanceof ArrayBuffer||p(t)))if(s)return i(t);else return g(new Blob([t]),i);return i(c[e]+(t||""))},g=(e,t)=>{let s=new FileReader;return s.onload=function(){t("b"+(s.result.split(",")[1]||""))},s.readAsDataURL(e)};function m(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<y.length;e++)w[y.charCodeAt(e)]=e;let v="function"==typeof ArrayBuffer,S=(e,t)=>{if("string"!=typeof e)return{type:"message",data:b(e,t)};let s=e.charAt(0);return"b"===s?{type:"message",data:_(e.substring(1),t)}:d[s]?e.length>1?{type:d[s],data:e.substring(1)}:{type:d[s]}:h},_=(e,t)=>v?b((e=>{let t=.75*e.length,s=e.length,i,r=0,n,o,a,c;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let d=new ArrayBuffer(t),h=new Uint8Array(d);for(i=0;i<s;i+=4)n=w[e.charCodeAt(i)],o=w[e.charCodeAt(i+1)],a=w[e.charCodeAt(i+2)],c=w[e.charCodeAt(i+3)],h[r++]=n<<2|o>>4,h[r++]=(15&o)<<4|a>>2,h[r++]=(3&a)<<6|63&c;return d})(e),t):{base64:!0,data:e},b=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;function E(e){return e.reduce((e,t)=>e+t.length,0)}function k(e,t){if(e[0].length===t)return e.shift();let s=new Uint8Array(t),i=0;for(let r=0;r<t;r++)s[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),s}function O(e){if(e){var t=e;for(var s in O.prototype)t[s]=O.prototype[s];return t}}O.prototype.on=O.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},O.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},O.prototype.off=O.prototype.removeListener=O.prototype.removeAllListeners=O.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((s=i[r])===t||s.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},O.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),s=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,r=s.length;i<r;++i)s[i].apply(this,t)}return this},O.prototype.emitReserved=O.prototype.emit,O.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},O.prototype.hasListeners=function(e){return!!this.listeners(e).length};let A="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),C="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function I(e,...t){return t.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}let R=C.setTimeout,T=C.clearTimeout;function L(e,t){t.useNativeTimers?(e.setTimeoutFn=R.bind(C),e.clearTimeoutFn=T.bind(C)):(e.setTimeoutFn=C.setTimeout.bind(C),e.clearTimeoutFn=C.clearTimeout.bind(C))}function N(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class D extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class P extends O{constructor(e){super(),this.writable=!1,L(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new D(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=S(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}}class x extends P{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};((e,t)=>{let s=e.split("\x1e"),i=[];for(let e=0;e<s.length;e++){let r=S(s[e],t);if(i.push(r),"error"===r.type)break}return i})(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){var t;let s,i,r;this.writable=!1,t=e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})},i=Array(s=e.length),r=0,e.forEach((e,n)=>{f(e,!1,e=>{i[n]=e,++r===s&&t(i.join("\x1e"))})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=N()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let U=!1;try{U="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let q=U;function B(){}class M extends x{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){let s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class J extends O{constructor(e,t,s){super(),this.createRequest=e,L(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}_create(){var e;let t=I(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{s.setRequestHeader("Accept","*/*")}catch(e){}null==(e=this._opts.cookieJar)||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null==(e=this._opts.cookieJar)||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof s.status?s.status:0)},0))},s.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=J.requestsCount++,J.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=B,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete J.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function F(){for(let e in J.requests)J.requests.hasOwnProperty(e)&&J.requests[e].abort()}J.requestsCount=0,J.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",F):"function"==typeof addEventListener&&addEventListener("onpagehide"in C?"pagehide":"unload",F,!1));let j=(r=z({xdomain:!1}))&&null!==r.responseType;function z(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||q))return new XMLHttpRequest}catch(e){}if(!t)try{return new C[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}let V="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class W extends P{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,s=V?{}:I(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let s=e[t],i=t===e.length-1;f(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(e){}i&&A(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=N()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}let K=C.WebSocket||C.MozWebSocket,H={websocket:class extends W{createSocket(e,t,s){return V?new K(e,t,s):t?new K(e,t):new K(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends P{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{var i,r;let n,o,a,c,d=(i=Number.MAX_SAFE_INTEGER,r=this.socket.binaryType,s||(s=new TextDecoder),n=[],o=0,a=-1,c=!1,new TransformStream({transform(e,t){for(n.push(e);;){if(0===o){if(1>E(n))break;let e=k(n,1);c=(128&e[0])==128,o=(a=127&e[0])<126?3:126===a?1:2}else if(1===o){if(2>E(n))break;let e=k(n,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),o=3}else if(2===o){if(8>E(n))break;let e=k(n,8),s=new DataView(e.buffer,e.byteOffset,e.length),i=s.getUint32(0);if(i>2097151){t.enqueue(h);break}a=0x100000000*i+s.getUint32(4),o=3}else{if(E(n)<a)break;let e=k(n,a);t.enqueue(S(c?e:s.decode(e),r)),o=0}if(0===a||a>i){t.enqueue(h);break}}}})),g=e.readable.pipeThrough(d).getReader(),y=new TransformStream({transform(e,s){var i;i=t=>{let i,r=t.length;if(r<126)new DataView((i=new Uint8Array(1)).buffer).setUint8(0,r);else if(r<65536){let e=new DataView((i=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,r)}else{let e=new DataView((i=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(i[0]|=128),s.enqueue(i),s.enqueue(t)},l&&e.data instanceof Blob?e.data.arrayBuffer().then(m).then(i):u&&(e.data instanceof ArrayBuffer||p(e.data))?i(m(e.data)):f(e,!1,e=>{t||(t=new TextEncoder),i(t.encode(e))})}});y.readable.pipeTo(e.writable),this._writer=y.writable.getWriter();let w=()=>{g.read().then(({done:e,value:t})=>{e||(this.onPacket(t),w())}).catch(e=>{})};w();let v={type:"open"};this.query.sid&&(v.data=`{"sid":"${this.query.sid}"}`),this._writer.write(v).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&A(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null==(e=this._transport)||e.close()}},polling:class extends M{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=j&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new J(z,this.uri(),e)}}},Y=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function G(e){var t,s;let i,r;if(e.length>8e3)throw"URI too long";let n=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));let c=Y.exec(e||""),d={},h=14;for(;h--;)d[$[h]]=c[h]||"";return -1!=o&&-1!=a&&(d.source=n,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),i=(t=d.path).replace(/\/{2,9}/g,"/").split("/"),("/"==t.slice(0,1)||0===t.length)&&i.splice(0,1),"/"==t.slice(-1)&&i.splice(i.length-1,1),d.pathNames=i,s=d.query,r={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,s){t&&(r[t]=s)}),d.queryKey=r,d}let Q="function"==typeof addEventListener&&"function"==typeof removeEventListener,X=[];Q&&addEventListener("offline",()=>{X.forEach(e=>e())},!1);class Z extends O{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const s=G(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=G(t.host).host);L(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let e=0,i=s.length;e<i;e++){let i=s[e].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}(this.opts.query)),Q&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},X.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);let e=this.opts.rememberUpgrade&&Z.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Z.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let s=this.writeBuffer[t].data;if(s&&(e+="string"==typeof s?function(e){let t=0,s=0;for(let i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(i++,s+=4);return s}(s):Math.ceil(1.33*(s.byteLength||s.size))),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,A(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof s&&(i=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;let r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Z.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Q&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=X.indexOf(this._offlineEventListener);-1!==e&&X.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Z.protocol=4;class ee extends Z{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Z.priorWebsocketSuccess=!1;let i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Z.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function r(){s||(s=!0,d(),t.close(),t=null)}let n=e=>{let s=Error("probe error: "+e);s.transport=t.name,r(),this.emitReserved("upgradeError",s)};function o(){n("transport closed")}function a(){n("socket closed")}function c(e){t&&e.name!==t.name&&r()}let d=()=>{t.removeListener("open",i),t.removeListener("error",n),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",i),t.once("error",n),t.once("close",o),this.once("close",a),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}class et extends ee{constructor(e,t={}){const s="object"==typeof e?e:t;(!s.transports||s.transports&&"string"==typeof s.transports[0])&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(e=>H[e]).filter(e=>!!e)),super(e,s)}}et.protocol;let es="function"==typeof ArrayBuffer,ei=Object.prototype.toString,er="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ei.call(Blob),en="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ei.call(File);function eo(e){return es&&(e instanceof ArrayBuffer||("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer))||er&&e instanceof Blob||en&&e instanceof File}let ea=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];(n=o||(o={}))[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK";class ec{constructor(e){this.replacer=e}encode(e){return(e.type===o.EVENT||e.type===o.ACK)&&function e(t,s){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let s=0,i=t.length;s<i;s++)if(e(t[s]))return!0;return!1}if(eo(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===o.BINARY_EVENT||e.type===o.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t,s,i=(t=[],s=e.data,e.data=function e(t,s){if(!t)return t;if(eo(t)){let e={_placeholder:!0,num:s.length};return s.push(t),e}if(Array.isArray(t)){let i=Array(t.length);for(let r=0;r<t.length;r++)i[r]=e(t[r],s);return i}if("object"==typeof t&&!(t instanceof Date)){let i={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e(t[r],s));return i}return t}(s,t),e.attachments=t.length,{packet:e,buffers:t}),r=this.encodeAsString(i.packet),n=i.buffers;return n.unshift(r),n}}function ed(e){return"[object Object]"===Object.prototype.toString.call(e)}class eh extends O{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let s=(t=this.decodeString(e)).type===o.BINARY_EVENT;s||t.type===o.BINARY_ACK?(t.type=s?o.EVENT:o.ACK,this.reconstructor=new el(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(eo(e)||e.base64)if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+e)}decodeString(e){let t=0,s={type:Number(e.charAt(0))};if(void 0===o[s.type])throw Error("unknown packet type "+s.type);if(s.type===o.BINARY_EVENT||s.type===o.BINARY_ACK){let i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw Error("Illegal attachments");s.attachments=Number(r)}if("/"===e.charAt(t+1)){let i=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);s.nsp=e.substring(i,t)}else s.nsp="/";let i=e.charAt(t+1);if(""!==i&&Number(i)==i){let i=t+1;for(;++t;){let s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){let i=this.tryParse(e.substr(t));if(eh.isPayloadValid(s.type,i))s.data=i;else throw Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case o.CONNECT:return ed(t);case o.DISCONNECT:return void 0===t;case o.CONNECT_ERROR:return"string"==typeof t||ed(t);case o.EVENT:case o.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===ea.indexOf(t[0]));case o.ACK:case o.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class el{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,s;let e=(t=this.reconPack,s=this.buffers,t.data=function e(t,s){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<s.length)return s[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=e(t[i],s);else if("object"==typeof t)for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=e(t[i],s));return t}(t.data,s),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function eu(e,t,s){return e.on(t,s),function(){e.off(t,s)}}e.s(["Decoder",()=>eh,"Encoder",()=>ec,"PacketType",()=>o,"protocol",0,5],51890);let ep=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ef extends O{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[eu(e,"open",this.onopen.bind(this)),eu(e,"packet",this.onpacket.bind(this)),eu(e,"error",this.onerror.bind(this)),eu(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,r;if(ep.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let n={type:o.EVENT,data:t};if(n.options={},n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++,s=t.pop();this._registerAckCallback(e,s),n.id=e}let a=null==(i=null==(s=this.io.engine)?void 0:s.transport)?void 0:i.writable,c=this.connected&&!(null==(r=this.io.engine)?void 0:r._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var s;let i=null!=(s=this.flags.timeout)?s:this._opts.ackTimeout;if(void 0===i){this.acks[e]=t;return}let r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},i),n=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,e)};n.withError=!0,this.acks[e]=n}emitWithAck(e,...t){return new Promise((s,i)=>{let r=(e,t)=>e?i(e):s(t);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...i)=>{if(s===this._queue[0])return null!==e?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...i)),s.pending=!1,this._drainQueue()}),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:o.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,s=!1;return function(...i){s||(s=!0,t.packet({type:o.ACK,id:e,data:i}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:o.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s]){t.splice(s,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s]){t.splice(s,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}var eg=e.i(51890);function em(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}em.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-s:e+s}return 0|Math.min(e,this.max)},em.prototype.reset=function(){this.attempts=0},em.prototype.setMin=function(e){this.ms=e},em.prototype.setMax=function(e){this.max=e},em.prototype.setJitter=function(e){this.jitter=e};class ey extends O{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,L(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(s=t.randomizationFactor)?s:.5),this.backoff=new em({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||eg;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null==(t=this.backoff)||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null==(t=this.backoff)||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null==(t=this.backoff)||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new et(this.uri,this.opts);let t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;let i=eu(t,"open",function(){s.onopen(),e&&e()}),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},n=eu(t,"error",r);if(!1!==this._timeout){let e=this._timeout,s=this.setTimeoutFn(()=>{i(),r(Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(i),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(eu(e,"ping",this.onping.bind(this)),eu(e,"data",this.ondata.bind(this)),eu(e,"error",this.onerror.bind(this)),eu(e,"close",this.onclose.bind(this)),eu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){A(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new ef(this,e,t),this.nsps[e]=s),s}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),null==(s=this.engine)||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let ew={};function ev(e,t){let s;"object"==typeof e&&(t=e,e=void 0);let i=function(e,t="",s){let i=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==s?s.protocol+"//"+e:"https://"+e),i=G(e)),!i.port&&(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(s&&s.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),r=i.source,n=i.id,o=i.path,a=ew[n]&&o in ew[n].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?s=new ey(r,t):(ew[n]||(ew[n]=new ey(r,t)),s=ew[n]),i.query&&!t.query&&(t.query=i.queryKey),s.socket(i.path,t)}Object.assign(ev,{Manager:ey,Socket:ef,io:ev,connect:ev});let eS=()=>(i||(i=ev({path:"/socket.io",addTrailingSlash:!1})),i),e_=[{id:1006,customer:"Rajesh Kumar",items:["Standard Veg Thali (2)","Sweet Lassi (2)"],total:640,status:"Pending",time:"Just now",type:"Delivery",createdAt:Date.now(),paymentStatus:"Unpaid",paymentMethod:"Cash",trainDetails:{pnr:"1234567890",trainNo:"12956",coachSeat:"B2-45"}},{id:1001,customer:"Rahul Sharma",items:["Classic Margherita (1)","Coke (2)"],total:299,status:"Pending",time:"10 mins ago",type:"Dine-in",table:"T-4",createdAt:Date.now()-6e5,waiterName:"Rahul",dietary:["veg","spicy"]},{id:1002,customer:"Priya Singh",items:["Paneer Tikka Pizza (1)","White Sauce Pasta (1)"],total:398,status:"Cooking",time:"25 mins ago",type:"Dine-in",table:"T-2",createdAt:Date.now()-15e5,waiterName:"Amit",dietary:["veg"]},{id:1003,customer:"Amit Patel",items:["Dahi Papdi Chaat (2)"],total:98,status:"Completed",time:"45 mins ago",type:"Takeaway",createdAt:Date.now()-27e5},{id:1004,customer:"Sneha Gupta",items:["Veggie Supreme (1)","Garlic Bread (1)"],total:349,status:"Ready",time:"1 hour ago",type:"Delivery",createdAt:Date.now()-36e5},{id:1005,customer:"Vikram Malhotra",items:["Makhani Paneer Supreme (1)"],total:279,status:"Cancelled",time:"2 hours ago",type:"Dine-in",table:"T-8",createdAt:Date.now()-72e5}],eb=[{id:1,task:"Chop Onions",completed:!1,station:"Vegetable Prep"},{id:2,task:"Marinate Paneer",completed:!1,station:"Tandoor"},{id:3,task:"Prepare Pizza Dough",completed:!0,station:"Pizza Station"},{id:4,task:"Chop Coriander",completed:!1,station:"Vegetable Prep"},{id:5,task:"Check Gas Levels",completed:!1,station:"Safety"}],eE="oye_chatoro_orders",ek=()=>{let e=localStorage.getItem(eE);return e?JSON.parse(e):(localStorage.setItem(eE,JSON.stringify(e_)),e_)},eO=(e,t)=>{let s=ek().map(s=>{if(s.id===e){let e={status:t};return"Cooking"!==t||s.cookingStartedAt||(e.cookingStartedAt=Date.now()),{...s,...e}}return s});localStorage.setItem(eE,JSON.stringify(s)),window.dispatchEvent(new Event("ordersUpdated")),eS().emit("update-status",{orderId:e,status:t})},eA=(e,t)=>{let s=ek().map(s=>s.id===e?{...s,waiterCalled:t}:s);localStorage.setItem(eE,JSON.stringify(s)),window.dispatchEvent(new Event("ordersUpdated")),eS().emit("waiter-call",{orderId:e,isCalled:t})},eC=e=>{let t=ek(),s={id:Math.floor(1e3+9e3*Math.random()),...e,status:"Pending",time:"Just now",createdAt:Date.now(),paymentStatus:e.paymentStatus||"Unpaid",paymentMethod:e.paymentMethod||"Online",mobile:e.mobile,tip:e.tip},i=[s,...t];localStorage.setItem(eE,JSON.stringify(i)),window.dispatchEvent(new Event("ordersUpdated")),ti(s.items);let r=th().find(e=>s.mobile&&e.phone===s.mobile||!s.mobile&&e.name.toLowerCase()===s.customer.toLowerCase());if(r){let e=Math.floor(s.total/100);tl(r={...r,totalOrders:r.totalOrders+1,totalSpent:r.totalSpent+s.total,loyaltyPoints:r.loyaltyPoints+e,lastVisit:new Date().toISOString()})}else s.mobile&&tl({id:`cust_${Date.now()}`,name:s.customer,phone:s.mobile,totalOrders:1,totalSpent:s.total,loyaltyPoints:Math.floor(s.total/100),lastVisit:new Date().toISOString()});return eS().emit("new-order",s),s};function eI(){let[e,t]=(0,a.useState)(()=>{{let e=localStorage.getItem("prepList");return e?JSON.parse(e):eb}});return(0,a.useEffect)(()=>{localStorage.setItem("prepList",JSON.stringify(e))},[e]),{prepList:e,togglePrepItem:e=>{t(t=>t.map(t=>t.id===e?{...t,completed:!t.completed}:t))},resetPrepList:()=>{t(eb.map(e=>({...e,completed:!1})))}}}let eR="oye_chatoro_blog_posts",eT=[{id:"1",title:"Welcome to Oye Chatoro!",slug:"welcome-to-oye-chatoro",excerpt:"We are excited to announce the grand opening of our new outlet in Abu Road.",content:"Welcome to Oye Chatoro! We are thrilled to bring the authentic flavors of street food to Abu Road. Our mission is to serve happiness on every plate with our fresh ingredients and live kitchen concept. Come visit us and try our famous Paneer Tikka Pizza and refreshing beverages.",image:"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?auto=format&fit=crop&w=800&q=80",date:new Date().toLocaleDateString(),author:"Admin",category:"News",tags:["Grand Opening","Abu Road","Street Food"],seoTitle:"Welcome to Oye Chatoro - Best Street Food in Abu Road",seoDescription:"Oye Chatoro is now open in Abu Road! Experience authentic street food, live kitchen, and fresh ingredients. Visit us today.",readingTime:"2 min read",status:"Published",featured:!0},{id:"2",title:"Top 5 Must-Try Dishes",slug:"top-5-must-try-dishes",excerpt:"Discover the customer favorites that you absolutely cannot miss.",content:"1. **Paneer Tikka Pizza**: A fusion delight.\n2. **White Sauce Pasta**: Creamy and delicious.\n3. **Dahi Papdi Chaat**: The perfect balance of sweet and tangy.\n4. **Veggie Supreme**: Loaded with fresh veggies.\n5. **Masala Chai**: The perfect end to your meal.",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?auto=format&fit=crop&w=800&q=80",date:new Date(Date.now()-864e5).toLocaleDateString(),author:"Chef",category:"Food Guide",tags:["Pizza","Pasta","Chaat","Recommendations"],seoTitle:"Top 5 Must-Try Dishes at Oye Chatoro",seoDescription:"From Paneer Tikka Pizza to Dahi Papdi Chaat, discover the top 5 dishes you must try at Oye Chatoro Abu Road.",readingTime:"3 min read",status:"Published"},{id:"3",title:"Best Restaurant in Abu Road - Why Oye Chatoro Stands Out",slug:"best-restaurant-in-abu-road",excerpt:"Looking for the best restaurant in Abu Road? Discover why Oye Chatoro is the top choice for vegetarian food lovers near Mount Abu.",content:"## Best Restaurant in Abu Road\n\nWhen it comes to finding a great restaurant in Abu Road, Oye Chatoro stands out as the premier destination for food lovers. Located in Abu Central Mall, we offer a unique dining experience.\n\n### Why Choose Oye Chatoro?\n\n1. **100% Pure Vegetarian**\n2. **Live Kitchen**\n3. **Near Mount Abu**\n4. **AC Dining**\n5. **FSSAI Licensed**\n\nVisit us today and experience why we are rated as the best restaurant in Abu Road!",image:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=800&q=80",date:new Date(Date.now()-1728e5).toLocaleDateString(),author:"Admin",category:"About Us",tags:["Restaurant in Abu Road","Best Restaurant","Mount Abu","Pure Veg"],seoTitle:"Best Restaurant in Abu Road | Oye Chatoro - Pure Veg Food",seoDescription:"Looking for the best restaurant in Abu Road? Oye Chatoro offers 100% pure vegetarian food, pizzas, pastas, chaats near Mount Abu. FSSAI Licensed.",readingTime:"4 min read",status:"Published",featured:!0},{id:"4",title:"Complete Food Guide: What to Eat in Abu Road",slug:"food-guide-what-to-eat-abu-road",excerpt:"A complete guide to the best food options in Abu Road, Rajasthan.",content:"## Food Guide: Abu Road\n\nAbu Road, the gateway to Mount Abu, has become a growing food destination in Rajasthan.\n\n### Best Restaurants\n\n**Oye Chatoro** - Location: Abu Central Mall, G-5\n\n### Popular Food Items\n\n1. **Pizza** - Fresh, wood-fire style\n2. **Chaat** - Authentic North Indian flavors\n3. **Pasta** - Creamy options\n4. **Burgers** - Loaded veggie burgers\n5. **Momos** - Steamed and fried varieties",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=800&q=80",date:new Date(Date.now()-2592e5).toLocaleDateString(),author:"Food Blogger",category:"Food Guide",tags:["Abu Road Food","Mount Abu","Food Guide"],seoTitle:"Food Guide Abu Road | Best Places to Eat Near Mount Abu",seoDescription:"Complete food guide for Abu Road, Rajasthan. Discover the best restaurants near Mount Abu.",readingTime:"5 min read",status:"Published"},{id:"5",title:"Oye Chatoro - Your Family Restaurant in Abu Road",slug:"family-restaurant-abu-road",excerpt:"Looking for a family-friendly restaurant in Abu Road? Oye Chatoro offers the perfect dining experience.",content:"## Family Restaurant in Abu Road\n\nPlanning a family outing? Oye Chatoro is the perfect destination.\n\n### Why Families Love Us\n\n1. **Kid-Friendly Menu**\n2. **AC Seating**\n3. **Pure Vegetarian**\n4. **Quick Service**\n5. **Affordable Prices**\n\nVisit Oye Chatoro - The best family restaurant in Abu Road!",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?auto=format&fit=crop&w=800&q=80",date:new Date(Date.now()-3456e5).toLocaleDateString(),author:"Admin",category:"About Us",tags:["Family Restaurant","Abu Road","Kids Menu"],seoTitle:"Family Restaurant in Abu Road | Oye Chatoro - Kid Friendly",seoDescription:"Best family restaurant in Abu Road. Kid-friendly menu, AC seating, pure vegetarian food.",readingTime:"3 min read",status:"Published"}],eL=()=>{let e=localStorage.getItem(eR);return e?JSON.parse(e):(localStorage.setItem(eR,JSON.stringify(eT)),eT)},eN=e=>{let t,s=eL();t=s.findIndex(t=>t.id===e.id)>=0?s.map(t=>t.id===e.id?e:t):[e,...s],localStorage.setItem(eR,JSON.stringify(t)),window.dispatchEvent(new Event("blogUpdated"))},eD=e=>{let t=eL().filter(t=>t.id!==e);localStorage.setItem(eR,JSON.stringify(t)),window.dispatchEvent(new Event("blogUpdated"))},eP="oye_chatoro_blog_categories",ex="oye_chatoro_blog_tags",eU="oye_chatoro_menu_cats",eq="oye_chatoro_menu_items",eB=[{id:"cat_train",name:"Train Specials ðŸš‚"},{id:"cat_1",name:"Pizza"},{id:"cat_2",name:"Pasta"},{id:"cat_3",name:"Chaat"}],eM=[{id:"item_t1",name:"Standard Veg Thali",price:240,description:"Dal Fry, Seasonal Veg, 4 Roti, Rice, Salad, Pickle. Perfect for a hearty train meal.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,isFeatured:!0,image:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?auto=format&fit=crop&w=800&q=80"},{id:"item_t2",name:"Maharaja Premium Thali",price:320,description:"Paneer Butter Masala, Dal Makhani, Mix Veg, Jeera Rice, 2 Butter Naan, Sweet, Raita, Salad.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,isFeatured:!0,image:"https://images.unsplash.com/photo-1585937421612-70a008356f36?auto=format&fit=crop&w=800&q=80"},{id:"item_t3",name:"Jain Special Thali",price:260,description:"No Onion/Garlic. Paneer Sabzi, Dal, Rice, 4 Roti, Sweet. Pure & Sattvic.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1514516872020-25ce539541d3?auto=format&fit=crop&w=800&q=80"},{id:"item_t4",name:"Dal Makhani Rice Bowl",price:180,description:"Creamy Dal Makhani served with aromatic Jeera Rice. Comfort food on the go.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1589302168068-964664d93dc0?auto=format&fit=crop&w=800&q=80"},{id:"item_t5",name:"Chole Kulcha Combo",price:160,description:"Spicy Amritsari Chole served with 2 soft Kulchas and pickle.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1565557623262-b51c2513a641?auto=format&fit=crop&w=800&q=80"},{id:"item_t6",name:"Aloo Paratha (2 pcs)",price:120,description:"Stuffed potato parathas served with fresh curd and pickle.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?auto=format&fit=crop&w=800&q=80"},{id:"item_t7",name:"Paneer Paratha (2 pcs)",price:150,description:"Stuffed paneer parathas served with fresh curd and pickle.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?auto=format&fit=crop&w=800&q=80"},{id:"item_t8",name:"Sweet Lassi",price:80,description:"Thick, creamy sweet yogurt drink topped with dry fruits.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1559847844-5315695dadae?auto=format&fit=crop&w=800&q=80"},{id:"item_t9",name:"Masala Chaas",price:50,description:"Spiced buttermilk, refreshing and perfect for digestion.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1559847844-5315695dadae?auto=format&fit=crop&w=800&q=80"},{id:"item_t10",name:"Gulab Jamun (2 pcs)",price:60,description:"Soft, melt-in-your-mouth fried dumplings soaked in sugar syrup.",categoryId:"cat_train",veg:!0,status:"Active",isDigitalMenu:!1,isTrainMenu:!0,image:"https://images.unsplash.com/photo-1593701478530-bfde71cf52dd?auto=format&fit=crop&w=800&q=80"},{id:"item_1",name:"Classic Margherita",price:199,description:"Tomato, basil, mozzarella",categoryId:"cat_1",veg:!0,status:"Active"},{id:"item_2",name:"Paneer Tikka Pizza",price:249,description:"Spiced paneer chunks",categoryId:"cat_1",veg:!0,status:"Active"},{id:"item_3",name:"White Sauce Pasta",price:149,description:"Creamy cheese sauce",categoryId:"cat_2",veg:!0,status:"Active"},{id:"item_4",name:"Dahi Papdi Chaat",price:49,description:"Sweet and tangy yogurt",categoryId:"cat_3",veg:!0,status:"Active"}],eJ=()=>{let e=localStorage.getItem(eU);return e?JSON.parse(e):(localStorage.setItem(eU,JSON.stringify(eB)),eB)},eF=e=>{let t,s=eJ();t=s.findIndex(t=>t.id===e.id)>=0?s.map(t=>t.id===e.id?e:t):[...s,e],localStorage.setItem(eU,JSON.stringify(t)),window.dispatchEvent(new Event("menuUpdated"))},ej=e=>{let t=eJ().filter(t=>t.id!==e);localStorage.setItem(eU,JSON.stringify(t)),window.dispatchEvent(new Event("menuUpdated"))},ez=()=>{let e=localStorage.getItem(eq);return e?JSON.parse(e):(localStorage.setItem(eq,JSON.stringify(eM)),eM)},eV=e=>{let t,s=ez();t=s.findIndex(t=>t.id===e.id)>=0?s.map(t=>t.id===e.id?e:t):[...s,e],localStorage.setItem(eq,JSON.stringify(t)),window.dispatchEvent(new Event("menuUpdated"))},eW=e=>{let t=ez().filter(t=>t.id!==e);localStorage.setItem(eq,JSON.stringify(t)),window.dispatchEvent(new Event("menuUpdated"))},eK="oye_chatoro_users",eH="oye_chatoro_current_user",eY=e=>{let t=eX();if(t.find(t=>t.email===e.email))throw Error("Email already exists");let s={id:`user_${Date.now()}`,...e,favorites:[],addresses:[],preferences:{dietary:[],language:"en"},paymentMethods:[],dates:{birthday:"",anniversary:""},loyalty:{points:0,tier:"Bronze",streak:0,badges:[]},referralCode:Math.random().toString(36).substring(2,8).toUpperCase(),notifications:[]};return localStorage.setItem(eK,JSON.stringify([...t,s])),s},e$=(e,t)=>{let s=eX().find(s=>s.email===e&&s.password===t);if(!s)throw Error("Invalid credentials");let{password:i,...r}=s;return localStorage.setItem(eH,JSON.stringify(r)),window.dispatchEvent(new Event("authUpdated")),r},eG=()=>{localStorage.removeItem(eH),window.dispatchEvent(new Event("authUpdated"))},eQ=()=>{let e=localStorage.getItem(eH);return e?JSON.parse(e):null},eX=()=>{let e=localStorage.getItem(eK);return e?JSON.parse(e):[]},eZ=()=>{let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t(eQ());let e=()=>{t(eQ())};return window.addEventListener("authUpdated",e),window.addEventListener("storage",e),()=>{window.removeEventListener("authUpdated",e),window.removeEventListener("storage",e)}},[]),{user:e,login:e$,register:eY,logout:eG,updateUser:t=>{if(!e)return;let s=eX(),i=s.findIndex(t=>t.id===e.id);if(-1!==i){let e={...s[i],...t};s[i]=e,localStorage.setItem(eK,JSON.stringify(s)),localStorage.setItem(eH,JSON.stringify(e)),window.dispatchEvent(new Event("authUpdated"))}}}},e0="oye_chatoro_cart",e1="oye_chatoro_offers",e2=[{id:"1",code:"WELCOME50",discount:"50%",type:"Percentage",expiry:"2024-12-31",status:"Active",usage:145,description:"Get 50% off on your first order!",bgColor:"from-orange-400 to-red-500"},{id:"2",code:"PIZZALOVER",discount:"â‚¹100",type:"Flat",expiry:"2024-11-30",status:"Active",usage:89,description:"Flat â‚¹100 off on all Pizzas",bgColor:"from-blue-400 to-indigo-500"},{id:"3",code:"FREEDRINK",discount:"FREE",type:"Free Item",expiry:"2024-10-15",status:"Expired",usage:342,description:"Free Coke with any Pasta",bgColor:"from-green-400 to-emerald-500"}],e5=()=>{let e=localStorage.getItem(e1);return e?JSON.parse(e):(localStorage.setItem(e1,JSON.stringify(e2)),e2)},e4=e=>{let t,s=e5();t=s.findIndex(t=>t.id===e.id)>=0?s.map(t=>t.id===e.id?e:t):[e,...s],localStorage.setItem(e1,JSON.stringify(t)),window.dispatchEvent(new Event("offersUpdated"))},e8=e=>{let t=e5().filter(t=>t.id!==e);localStorage.setItem(e1,JSON.stringify(t)),window.dispatchEvent(new Event("offersUpdated"))},e3="oye_chatoro_inventory",e6="oye_chatoro_stock_logs",e9="oye_chatoro_wastage_logs",e7=[{id:1,name:"Pizza Base",quantity:45,unit:"pcs",minLevel:50,status:"Low Stock",category:"Raw Material"},{id:2,name:"Mozzarella Cheese",quantity:12,unit:"kg",minLevel:5,status:"In Stock",category:"Dairy"},{id:3,name:"Tomato Sauce",quantity:8,unit:"kg",minLevel:10,status:"Low Stock",category:"Sauces"},{id:4,name:"Sweet Corn",quantity:5,unit:"kg",minLevel:2,status:"In Stock",category:"Vegetables"},{id:5,name:"Paneer",quantity:15,unit:"kg",minLevel:5,status:"In Stock",category:"Dairy"},{id:6,name:"Disposable Plates",quantity:200,unit:"pcs",minLevel:100,status:"In Stock",category:"Packaging"}],te=()=>{let e=localStorage.getItem(e3);return e?JSON.parse(e):(localStorage.setItem(e3,JSON.stringify(e7)),e7)},tt=()=>{let e=localStorage.getItem(e6);return e?JSON.parse(e):[]},ts=()=>{let e=localStorage.getItem(e9);return e?JSON.parse(e):[]},ti=e=>{let t=ez(),s=te(),i=!1,r=s.map(s=>{let r=s.quantity;return(e.forEach(e=>{let n,o;if("string"==typeof e){let t=e.match(/(.*) \((\d+)\)/);if(!t)return;n=t[1],o=parseInt(t[2])}else{if("object"!=typeof e||null===e)return;n=e.name,o=e.quantity||1}let a=t.find(e=>e.name===n);if(a&&a.recipe){let e=a.recipe.find(e=>e.inventoryItemId===s.id);e&&(r-=e.quantity*o,i=!0)}}),r!==s.quantity)?{...s,quantity:Math.max(0,r),status:r<=0?"Out of Stock":r<=s.minLevel?"Low Stock":"In Stock",lastUpdated:new Date().toISOString()}:s});i&&(localStorage.setItem(e3,JSON.stringify(r)),window.dispatchEvent(new Event("inventoryUpdated")))},tr="oye_chatoro_settings",tn={name:"Oye Chatoro",address:"Abu Road, Rajasthan",phone:"+91 98765 43210",email:"contact@oyechatoro.com",currency:"â‚¹",taxRate:5,serviceCharge:0,storeHours:{Monday:{open:"09:00",close:"22:00",closed:!1},Tuesday:{open:"09:00",close:"22:00",closed:!1},Wednesday:{open:"09:00",close:"22:00",closed:!1},Thursday:{open:"09:00",close:"22:00",closed:!1},Friday:{open:"09:00",close:"23:00",closed:!1},Saturday:{open:"10:00",close:"23:00",closed:!1},Sunday:{open:"10:00",close:"23:00",closed:!1}},receipt:{header:"Thank you for dining with us!",footer:"Visit us again soon.",showLogo:!0},digitalMenu:{bannerImage:"https://images.unsplash.com/photo-1504674900247-0877df9cc836",theme:"light",isActive:!0}},to=()=>{let e=localStorage.getItem(tr);return e?{...tn,...JSON.parse(e)}:tn},ta=e=>{localStorage.setItem(tr,JSON.stringify(e)),window.dispatchEvent(new Event("settingsUpdated"))},tc="oye_chatoro_customers",td=[{id:"cust_1",name:"Rahul Sharma",phone:"9876543210",totalOrders:12,totalSpent:4500,loyaltyPoints:45,lastVisit:new Date().toISOString()},{id:"cust_2",name:"Priya Singh",phone:"9876543211",totalOrders:5,totalSpent:1200,loyaltyPoints:12,lastVisit:new Date(Date.now()-864e5).toISOString()}],th=()=>{let e=localStorage.getItem(tc);return e?JSON.parse(e):(localStorage.setItem(tc,JSON.stringify(td)),td)},tl=e=>{let t,s=th();t=s.findIndex(t=>t.id===e.id)>=0?s.map(t=>t.id===e.id?e:t):[...s,e],localStorage.setItem(tc,JSON.stringify(t)),window.dispatchEvent(new Event("customersUpdated"))},tu="oyechatoro_service_requests",tp=()=>{let e=localStorage.getItem(tu);return e?JSON.parse(e):[]},tf=(e,t)=>{let s=tp(),i={id:Date.now(),table:e,type:t,status:"Pending",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};localStorage.setItem(tu,JSON.stringify([...s,i])),window.dispatchEvent(new Event("serviceRequestsUpdated")),window.dispatchEvent(new Event("storage"))},tg=(e,t)=>{let s=tp().map(s=>s.id===e?{...s,status:t}:s);localStorage.setItem(tu,JSON.stringify(s)),window.dispatchEvent(new Event("serviceRequestsUpdated")),window.dispatchEvent(new Event("storage"))};e.s(["addServiceRequest",0,tf,"createOrder",0,eC,"exportData",0,()=>JSON.stringify({settings:localStorage.getItem(tr),orders:localStorage.getItem(eE),menuItems:localStorage.getItem(eq),menuCats:localStorage.getItem(eU),inventory:localStorage.getItem(e3),customers:localStorage.getItem(tc),users:localStorage.getItem(eK),timestamp:new Date().toISOString(),version:"1.0"},null,2),"getAnalyticsData",0,e=>{let t=ek(),s=new Date,i=new Date;switch(e){case"7d":i.setDate(s.getDate()-7);break;case"30d":i.setDate(s.getDate()-30);break;case"month":i=new Date(s.getFullYear(),s.getMonth(),1);break;case"year":i=new Date(s.getFullYear(),0,1)}let r=t.filter(e=>new Date(e.createdAt||0)>=i&&"Cancelled"!==e.status),n=r.reduce((e,t)=>e+t.total,0),o=r.length,a=o>0?Math.round(n/o):0,c=new Map;for(let e=new Date(i);e<=s;e.setDate(e.getDate()+1))c.set(e.toLocaleDateString(),0);r.forEach(e=>{let t=new Date(e.createdAt||0).toLocaleDateString(),s=c.get(t)||0;c.set(t,s+e.total)});let d=Array.from(c.entries()).map(([e,t])=>({date:e.split("/")[0]+"/"+e.split("/")[1],amount:t})),h=new Map;r.forEach(e=>{e.items.forEach(e=>{let t=e.match(/(.*) \((\d+)\)/);if(t){let e=t[1],s=parseInt(t[2]),i=h.get(e)||{quantity:0,revenue:0};h.set(e,{quantity:i.quantity+s,revenue:i.revenue})}})});let l=Array.from(h.entries()).map(([e,t])=>({name:e,sales:t.quantity,pct:0})).sort((e,t)=>t.sales-e.sales).slice(0,5),u=l.length>0?l[0].sales:1;l.forEach(e=>e.pct=Math.round(e.sales/u*100));let p=Array(24).fill(0);return r.forEach(e=>{let t=new Date(e.createdAt||0).getHours();p[t]++}),{summary:{totalRevenue:n,totalOrders:o,avgOrderValue:a},revenueTrend:d,topItems:l,peakHours:p.map((e,t)=>({hour:t,count:e}))}},"getDailyStats",0,()=>{let e=ek(),t=new Date().toDateString(),s=e.filter(e=>new Date(e.createdAt||Date.now()).toDateString()===t),i=s.length,r=s.reduce((e,t)=>e+t.total,0);return{totalOrders:i,totalSales:r,cashSales:s.filter(e=>"Cash"===e.paymentMethod).reduce((e,t)=>e+t.total,0),onlineSales:s.filter(e=>"Online"===e.paymentMethod||"UPI"===e.paymentMethod||"Card"===e.paymentMethod).reduce((e,t)=>e+t.total,0)}},"getMenuEngineeringData",0,()=>{let e=ez(),t=ek(),s=e.map(e=>{let s=t.flatMap(e=>e.items).filter(t=>t.includes(e.name)).length,i=s*e.price,r=s*(e.costPrice||0);return{...e,sales:s,revenue:i,cost:r,profit:i-r,margin:e.price-(e.costPrice||0)}}),i=s.reduce((e,t)=>e+t.sales,0)/(s.length||1),r=s.reduce((e,t)=>e+t.margin,0)/(s.length||1),n=s.map(e=>{let t=e.sales>=i,s=e.margin>=r,n="Dog";return t&&s?n="Star":t&&!s?n="Plowhorse":!t&&s&&(n="Puzzle"),{id:e.id,name:e.name,sales:e.sales,revenue:e.revenue,cost:e.cost,profit:e.profit,margin:e.margin,category:n}});return{stars:e.filter(e=>n.find(t=>t.id===e.id)?.category==="Star"),plowhorses:e.filter(e=>n.find(t=>t.id===e.id)?.category==="Plowhorse"),puzzles:e.filter(e=>n.find(t=>t.id===e.id)?.category==="Puzzle"),dogs:e.filter(e=>n.find(t=>t.id===e.id)?.category==="Dog"),items:n}},"getOrders",0,ek,"importData",0,e=>{try{let t=JSON.parse(e);return t.settings&&localStorage.setItem(tr,t.settings),t.orders&&localStorage.setItem(eE,t.orders),t.menuItems&&localStorage.setItem(eq,t.menuItems),t.menuCats&&localStorage.setItem(eU,t.menuCats),t.inventory&&localStorage.setItem(e3,t.inventory),t.customers&&localStorage.setItem(tc,t.customers),t.users&&localStorage.setItem(eK,t.users),window.dispatchEvent(new Event("settingsUpdated")),window.dispatchEvent(new Event("ordersUpdated")),window.dispatchEvent(new Event("menuUpdated")),window.dispatchEvent(new Event("inventoryUpdated")),window.dispatchEvent(new Event("customersUpdated")),window.dispatchEvent(new Event("authUpdated")),{success:!0}}catch(e){return console.error("Import failed",e),{success:!1,error:"Invalid data file"}}},"updatePaymentMethod",0,(e,t)=>{let s=ek().map(s=>s.id===e?{...s,paymentMethod:t}:s);localStorage.setItem(eE,JSON.stringify(s)),window.dispatchEvent(new Event("ordersUpdated")),eS().emit("payment-method-updated",{orderId:e,paymentMethod:t})},"updatePaymentStatus",0,(e,t)=>{let s=ek().map(s=>s.id===e?{...s,paymentStatus:t}:s);localStorage.setItem(eE,JSON.stringify(s)),window.dispatchEvent(new Event("ordersUpdated")),eS().emit("payment-updated",{orderId:e,paymentStatus:t})},"useAuth",0,eZ,"useBlog",0,()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[r,n]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=()=>{t(eL());let e=localStorage.getItem(eP);if(e)i(JSON.parse(e));else{let e=[{id:"1",name:"News",slug:"news",count:0},{id:"2",name:"Recipes",slug:"recipes",count:0},{id:"3",name:"Food Guide",slug:"food-guide",count:0},{id:"4",name:"Offers",slug:"offers",count:0},{id:"5",name:"Events",slug:"events",count:0}];i(e),localStorage.setItem(eP,JSON.stringify(e))}let s=localStorage.getItem(ex);s&&n(JSON.parse(s))};e();let s=()=>e();return window.addEventListener("blogUpdated",s),window.addEventListener("storage",s),()=>{window.removeEventListener("blogUpdated",s),window.removeEventListener("storage",s)}},[]),{posts:e,categories:s,tags:r,savePost:eN,deletePost:eD,saveCategory:e=>{let t=[...s],r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),localStorage.setItem(eP,JSON.stringify(t)),i(t)},deleteCategory:e=>{let t=s.filter(t=>t.id!==e);localStorage.setItem(eP,JSON.stringify(t)),i(t)},saveTag:e=>{let t=[...r];t.find(t=>t.name.toLowerCase()===e.name.toLowerCase())||(t.push(e),localStorage.setItem(ex,JSON.stringify(t)),n(t))}}},"useCart",0,()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=localStorage.getItem(e0);e&&t(JSON.parse(e));let s=()=>{let e=localStorage.getItem(e0);e&&t(JSON.parse(e))};return window.addEventListener("storage",s),window.addEventListener("cartUpdated",s),()=>{window.removeEventListener("storage",s),window.removeEventListener("cartUpdated",s)}},[]),{cart:e,addToCart:s=>{let i=[...e],r=i.find(e=>e.name===s.name);r?r.quantity+=1:i.push(s),t(i),localStorage.setItem(e0,JSON.stringify(i)),window.dispatchEvent(new Event("cartUpdated"))},removeFromCart:s=>{let i=e.filter(e=>e.name!==s);t(i),localStorage.setItem(e0,JSON.stringify(i)),window.dispatchEvent(new Event("cartUpdated"))},updateQuantity:(s,i)=>{let r=e.map(e=>e.name===s?{...e,quantity:Math.max(0,e.quantity+i)}:e).filter(e=>e.quantity>0);t(r),localStorage.setItem(e0,JSON.stringify(r)),window.dispatchEvent(new Event("cartUpdated"))},clearCart:()=>{t([]),localStorage.setItem(e0,JSON.stringify([])),window.dispatchEvent(new Event("cartUpdated"))}}},"useCustomers",0,()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{t(th());let e=()=>t(th());return window.addEventListener("customersUpdated",e),window.addEventListener("storage",e),()=>{window.removeEventListener("customersUpdated",e),window.removeEventListener("storage",e)}},[]),{customers:e,saveCustomer:tl}},"useFavorites",0,()=>{let{user:e}=eZ(),[t,s]=(0,a.useState)([]);return(0,a.useEffect)(()=>{e&&e.favorites?s(e.favorites):s([])},[e]),{favorites:t,toggleFavorite:t=>{if(!e)return;let s=JSON.parse(localStorage.getItem("oye_chatoro_users")||"[]"),i=s.findIndex(t=>t.email===e.email);if(-1===i)return;let r=s[i],n=r.favorites?[...r.favorites]:[],o=n.indexOf(t);-1===o?n.push(t):n.splice(o,1),r.favorites=n,s[i]=r,localStorage.setItem("oye_chatoro_users",JSON.stringify(s));let a={...e,favorites:n};localStorage.setItem("oye_chatoro_current_user",JSON.stringify(a)),window.dispatchEvent(new Event("authUpdated"))}}},"useInventory",0,()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),o=()=>{t(te()),i(tt()),n(ts())};(0,a.useEffect)(()=>(o(),window.addEventListener("inventoryUpdated",o),window.addEventListener("storage",o),()=>{window.removeEventListener("inventoryUpdated",o),window.removeEventListener("storage",o)}),[]);let c=(e,t,s)=>{let r=tt(),n=[{id:`log_${Date.now()}_${Math.random()}`,itemId:e,change:t,reason:s,timestamp:new Date().toISOString(),userId:"Admin"},...r];localStorage.setItem(e6,JSON.stringify(n)),i(n)};return{inventory:e,stockLogs:s,wastageLogs:r,addItem:e=>{let t=te(),s={...e,id:Date.now(),status:e.quantity<=0?"Out of Stock":e.quantity<=e.minLevel?"Low Stock":"In Stock",lastUpdated:new Date().toISOString()},i=[...t,s];localStorage.setItem(e3,JSON.stringify(i)),c(s.id,s.quantity,"Initial Stock"),window.dispatchEvent(new Event("inventoryUpdated"))},updateItem:(e,t)=>{let s=te(),i=0,r=s.map(s=>{if(s.id===e){void 0!==t.quantity&&(i=t.quantity-s.quantity);let e={...s,...t,lastUpdated:new Date().toISOString()};if(void 0!==t.quantity||void 0!==t.minLevel){let i=void 0!==t.quantity?t.quantity:s.quantity,r=void 0!==t.minLevel?t.minLevel:s.minLevel;e.status=i<=0?"Out of Stock":i<=r?"Low Stock":"In Stock"}return e}return s});localStorage.setItem(e3,JSON.stringify(r)),0!==i&&c(e,i,"Manual Update"),window.dispatchEvent(new Event("inventoryUpdated"))},deleteItem:e=>{let t=te().filter(t=>t.id!==e);localStorage.setItem(e3,JSON.stringify(t)),window.dispatchEvent(new Event("inventoryUpdated"))},recordWastage:(e,t,s)=>{let i=te().map(s=>{if(s.id===e){let e=Math.max(0,s.quantity-t);return{...s,quantity:e,status:e<=0?"Out of Stock":e<=s.minLevel?"Low Stock":"In Stock",lastUpdated:new Date().toISOString()}}return s});localStorage.setItem(e3,JSON.stringify(i));let r=ts(),n=[{id:`waste_${Date.now()}_${Math.random()}`,itemId:e,quantity:t,reason:s,timestamp:new Date().toISOString(),userId:"Admin"},...r];localStorage.setItem(e9,JSON.stringify(n)),c(e,-t,`Wastage: ${s}`),window.dispatchEvent(new Event("inventoryUpdated"))}}},"useMenu",0,()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),r=()=>{t(eJ()),i(ez())};return(0,a.useEffect)(()=>(r(),window.addEventListener("menuUpdated",r),window.addEventListener("storage",r),()=>{window.removeEventListener("menuUpdated",r),window.removeEventListener("storage",r)}),[]),{categories:e,items:s,saveCategory:eF,deleteCategory:ej,saveItem:eV,deleteItem:eW}},"useOffers",0,()=>{let[e,t]=(0,a.useState)([]),s=()=>{t(e5())};return(0,a.useEffect)(()=>(s(),window.addEventListener("offersUpdated",s),window.addEventListener("storage",s),()=>{window.removeEventListener("offersUpdated",s),window.removeEventListener("storage",s)}),[]),{offers:e,saveOffer:e4,deleteOffer:e8}},"useOrders",0,()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{t(ek());let e=()=>{t(ek())};window.addEventListener("ordersUpdated",e),window.addEventListener("storage",e);let s=eS();return s.on("order-received",e=>{let s=ek();if(!s.find(t=>t.id===e.id)){let i=[e,...s];localStorage.setItem(eE,JSON.stringify(i)),t(i)}}),s.on("status-updated",({orderId:e,status:s})=>{let i=ek().map(t=>t.id===e?{...t,status:s}:t);localStorage.setItem(eE,JSON.stringify(i)),t(i)}),()=>{window.removeEventListener("ordersUpdated",e),window.removeEventListener("storage",e),s.off("order-received"),s.off("status-updated")}},[]),{orders:e,updateStatus:eO,createOrder:eC,toggleWaiterCall:eA}},"usePrepList",()=>eI,"useServiceRequests",0,()=>{let[e,t]=(0,a.useState)([]),s=()=>{t(tp())};return(0,a.useEffect)(()=>(s(),window.addEventListener("serviceRequestsUpdated",s),window.addEventListener("storage",s),()=>{window.removeEventListener("serviceRequestsUpdated",s),window.removeEventListener("storage",s)}),[]),{requests:e,addRequest:tf,updateStatus:tg}},"useSettings",0,()=>{let[e,t]=(0,a.useState)(tn);return(0,a.useEffect)(()=>{t(to());let e=()=>t(to());return window.addEventListener("settingsUpdated",e),window.addEventListener("storage",e),()=>{window.removeEventListener("settingsUpdated",e),window.removeEventListener("storage",e)}},[]),{settings:e,updateSettings:ta}},"useUsers",0,()=>{let[e,t]=(0,a.useState)([]),s=()=>t(eX());return(0,a.useEffect)(()=>(s(),window.addEventListener("authUpdated",s),window.addEventListener("storage",s),()=>{window.removeEventListener("authUpdated",s),window.removeEventListener("storage",s)}),[]),{users:e,addUser:e=>{try{return eY(e),s(),{success:!0}}catch(e){return{success:!1,error:e.message}}},deleteUser:e=>{let t=eX().filter(t=>t.id!==e);localStorage.setItem(eK,JSON.stringify(t)),window.dispatchEvent(new Event("authUpdated")),s()}}}],28519)}]);