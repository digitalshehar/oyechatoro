(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18140,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(28519);function r(){let[e,r]=(0,s.useState)("sales"),[a,d]=(0,s.useState)("7d"),[n,i]=(0,s.useState)((0,l.getAnalyticsData)("7d")),[c,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{i((0,l.getAnalyticsData)(a)),o((0,l.getMenuEngineeringData)());let e=()=>{i((0,l.getAnalyticsData)(a)),o((0,l.getMenuEngineeringData)())};return window.addEventListener("ordersUpdated",e),window.addEventListener("menuUpdated",e),window.addEventListener("storage",e),()=>{window.removeEventListener("ordersUpdated",e),window.removeEventListener("menuUpdated",e),window.removeEventListener("storage",e)}},[a]),(0,t.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 animate-in gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:"Analytics & Insights"}),(0,t.jsx)("p",{className:"text-[var(--text-muted)]",children:"Track performance and optimize your menu"})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full md:w-auto",children:["sales"===e&&(0,t.jsxs)("select",{value:a,onChange:e=>d(e.target.value),className:"px-4 py-2 rounded-xl border border-[var(--border-light)] bg-white text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)] flex-1 md:flex-none",children:[(0,t.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,t.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,t.jsx)("option",{value:"month",children:"This Month"}),(0,t.jsx)("option",{value:"year",children:"This Year"})]}),(0,t.jsx)("button",{onClick:()=>{if("sales"===e){let e=encodeURI("data:text/csv;charset=utf-8,"+["Date,Revenue",...n.revenueTrend.map(e=>`${e.date},${e.amount}`)].join("\n")),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",`sales_report_${a}.csv`),document.body.appendChild(t),t.click(),document.body.removeChild(t)}else if(c){let e=encodeURI("data:text/csv;charset=utf-8,"+["Item,Category,Sales,Cost,Revenue,Profit,Margin",...c.items.map(e=>`${e.name},${e.category},${e.sales},${e.cost},${e.revenue},${e.profit},${e.margin}`)].join("\n")),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","menu_engineering_report.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}},className:"btn btn-primary whitespace-nowrap",children:"Export Report"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-8 border-b border-gray-200",children:[(0,t.jsx)("button",{onClick:()=>r("sales"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${"sales"===e?"border-[var(--brand-primary)] text-[var(--brand-primary)]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Sales Analytics"}),(0,t.jsx)("button",{onClick:()=>r("menu"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${"menu"===e?"border-[var(--brand-primary)] text-[var(--brand-primary)]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Menu Engineering (AI)"})]}),"sales"===e?(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl bg-gradient-to-br from-green-50 to-white border-green-100",children:[(0,t.jsx)("div",{className:"text-green-800 text-sm font-bold mb-1 uppercase tracking-wider",children:"Total Revenue"}),(0,t.jsxs)("div",{className:"text-4xl font-bold text-green-700",children:["â‚¹",n.summary.totalRevenue]}),(0,t.jsx)("div",{className:"text-green-600 text-xs mt-2 font-medium",children:"For selected period"})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-white border-blue-100",children:[(0,t.jsx)("div",{className:"text-blue-800 text-sm font-bold mb-1 uppercase tracking-wider",children:"Total Orders"}),(0,t.jsx)("div",{className:"text-4xl font-bold text-blue-700",children:n.summary.totalOrders}),(0,t.jsxs)("div",{className:"text-blue-600 text-xs mt-2 font-medium",children:["Avg. Order Value: â‚¹",n.summary.avgOrderValue]})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl bg-gradient-to-br from-purple-50 to-white border-purple-100",children:[(0,t.jsx)("div",{className:"text-purple-800 text-sm font-bold mb-1 uppercase tracking-wider",children:"Peak Hour"}),(0,t.jsxs)("div",{className:"text-4xl font-bold text-purple-700",children:[n.peakHours.reduce((e,t)=>t.count>e.count?t:e,{hour:0,count:0}).hour,":00"]}),(0,t.jsx)("div",{className:"text-purple-600 text-xs mt-2 font-medium",children:"Busiest time of day"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl",children:[(0,t.jsx)("h3",{className:"font-bold text-[var(--brand-dark)] mb-6 flex items-center gap-2",children:"ðŸ“ˆ Revenue Trend"}),(0,t.jsx)("div",{className:"h-64 flex items-end justify-between gap-2 px-2 border-b border-gray-100 pb-2",children:n.revenueTrend.length>0?n.revenueTrend.map((e,s)=>{let l=Math.max(...n.revenueTrend.map(e=>e.amount),1),r=e.amount/l*100;return(0,t.jsxs)("div",{className:"w-full flex flex-col justify-end group relative h-full",children:[(0,t.jsx)("div",{className:"w-full bg-blue-100 rounded-t-md hover:bg-blue-300 transition-all relative",style:{height:`${r}%`,minHeight:"4px"},children:(0,t.jsxs)("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-black text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:["â‚¹",e.amount]})}),(0,t.jsx)("div",{className:"text-[10px] text-center text-gray-400 mt-1 truncate w-full",children:e.date})]},s)}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No data available"})})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl",children:[(0,t.jsx)("h3",{className:"font-bold text-[var(--brand-dark)] mb-6 flex items-center gap-2",children:"ðŸ† Top Selling Items"}),(0,t.jsx)("div",{className:"space-y-4",children:n.topItems.length>0?n.topItems.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-[var(--text-main)]",children:e.name}),(0,t.jsxs)("span",{className:"text-[var(--text-muted)]",children:[e.sales," sold"]})]}),(0,t.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-[var(--brand-primary)] rounded-full transition-all duration-500",style:{width:`${e.pct}%`}})})]},s)):(0,t.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No sales data yet"})})]})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl mb-8",children:[(0,t.jsx)("h3",{className:"font-bold text-[var(--brand-dark)] mb-6 flex items-center gap-2",children:"â° Peak Hours Activity"}),(0,t.jsx)("div",{className:"h-48 flex items-end gap-1",children:n.peakHours.map((e,s)=>{let l=Math.max(...n.peakHours.map(e=>e.count),1),r=e.count/l*100;return(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-end group h-full",children:[(0,t.jsx)("div",{className:`w-full rounded-t-sm transition-all ${e.count>0?"bg-purple-200 hover:bg-purple-400":"bg-gray-50"}`,style:{height:`${r}%`,minHeight:"2px"},children:e.count>0&&(0,t.jsxs)("div",{className:"hidden group-hover:block absolute -mt-8 bg-black text-white text-xs px-2 py-1 rounded z-10",children:[e.count," orders"]})}),s%3==0&&(0,t.jsx)("div",{className:"text-[10px] text-gray-400 text-center mt-1",children:e.hour})]},s)})})]})]}):(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl",children:[(0,t.jsx)("h3",{className:"font-bold text-xl mb-4",children:"Menu Engineering Matrix"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 h-64 relative bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsxs)("div",{className:"bg-green-100 rounded-lg p-2 flex flex-col items-center justify-center text-center border border-green-200",children:[(0,t.jsx)("div",{className:"text-2xl",children:"â­"}),(0,t.jsx)("div",{className:"font-bold text-green-800",children:"Stars"}),(0,t.jsx)("div",{className:"text-[10px] text-green-600",children:"High Profit, High Popularity"})]}),(0,t.jsxs)("div",{className:"bg-yellow-100 rounded-lg p-2 flex flex-col items-center justify-center text-center border border-yellow-200",children:[(0,t.jsx)("div",{className:"text-2xl",children:"ðŸšœ"}),(0,t.jsx)("div",{className:"font-bold text-yellow-800",children:"Plowhorses"}),(0,t.jsx)("div",{className:"text-[10px] text-yellow-600",children:"Low Profit, High Popularity"})]}),(0,t.jsxs)("div",{className:"bg-blue-100 rounded-lg p-2 flex flex-col items-center justify-center text-center border border-blue-200",children:[(0,t.jsx)("div",{className:"text-2xl",children:"ðŸ§©"}),(0,t.jsx)("div",{className:"font-bold text-blue-800",children:"Puzzles"}),(0,t.jsx)("div",{className:"text-[10px] text-blue-600",children:"High Profit, Low Popularity"})]}),(0,t.jsxs)("div",{className:"bg-red-100 rounded-lg p-2 flex flex-col items-center justify-center text-center border border-red-200",children:[(0,t.jsx)("div",{className:"text-2xl",children:"ðŸ•"}),(0,t.jsx)("div",{className:"font-bold text-red-800",children:"Dogs"}),(0,t.jsx)("div",{className:"text-[10px] text-red-600",children:"Low Profit, Low Popularity"})]}),(0,t.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-6 -rotate-90 text-xs font-bold text-gray-400",children:"PROFITABILITY"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-6 text-xs font-bold text-gray-400",children:"POPULARITY"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Star Items"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c?.stars.length||0})]}),(0,t.jsx)("div",{className:"text-3xl",children:"â­"})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Plowhorses"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:c?.plowhorses.length||0})]}),(0,t.jsx)("div",{className:"text-3xl",children:"ðŸšœ"})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Puzzles"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c?.puzzles.length||0})]}),(0,t.jsx)("div",{className:"text-3xl",children:"ðŸ§©"})]}),(0,t.jsxs)("div",{className:"glass-card p-6 rounded-2xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Dogs"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c?.dogs.length||0})]}),(0,t.jsx)("div",{className:"text-3xl",children:"ðŸ•"})]})]})]}),(0,t.jsxs)("div",{className:"glass-card rounded-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,t.jsx)("h3",{className:"font-bold text-xl",children:"Detailed Analysis"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4",children:"Item Name"}),(0,t.jsx)("th",{className:"p-4",children:"Category"}),(0,t.jsx)("th",{className:"p-4 text-right",children:"Sales Vol."}),(0,t.jsx)("th",{className:"p-4 text-right",children:"Cost"}),(0,t.jsx)("th",{className:"p-4 text-right",children:"Revenue"}),(0,t.jsx)("th",{className:"p-4 text-right",children:"Profit"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Class"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[c?.items.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,t.jsx)("td",{className:"p-4 text-sm text-gray-500",children:"Food"}),(0,t.jsx)("td",{className:"p-4 text-right",children:e.sales}),(0,t.jsxs)("td",{className:"p-4 text-right text-red-500",children:["â‚¹",e.cost]}),(0,t.jsxs)("td",{className:"p-4 text-right text-green-600",children:["â‚¹",e.revenue]}),(0,t.jsxs)("td",{className:"p-4 text-right font-bold",children:["â‚¹",e.profit]}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-bold
                                                    ${"Star"===e.category?"bg-green-100 text-green-700":""}
                                                    ${"Plowhorse"===e.category?"bg-yellow-100 text-yellow-700":""}
                                                    ${"Puzzle"===e.category?"bg-blue-100 text-blue-700":""}
                                                    ${"Dog"===e.category?"bg-red-100 text-red-700":""}
                                                `,children:e.category})})]},e.id)),(!c?.items||0===c.items.length)&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"p-8 text-center text-gray-400",children:"No data available. Start selling to see insights!"})})]})]})})]})]})]})}e.s(["default",()=>r])}]);