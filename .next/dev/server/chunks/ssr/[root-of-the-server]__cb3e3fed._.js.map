{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///E:/oyechatorocomingsoon/app/dashboard/tables/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport default function TablesPage() {\r\n    const [tableCount, setTableCount] = useState(10);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    const generateQRUrl = (tableNum: number) => {\r\n        const data = `https://oyechatoro.com/menu?table=${tableNum}`;\r\n        return `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(data)}&color=ea580c&bgcolor=ffffff&margin=10`;\r\n    };\r\n\r\n    const downloadQR = async (tableNum: number) => {\r\n        const url = generateQRUrl(tableNum);\r\n        try {\r\n            const response = await fetch(url);\r\n            const blob = await response.blob();\r\n            const blobUrl = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = blobUrl;\r\n            link.download = `OyeChatoro-Table-${tableNum}.png`;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        } catch (error) {\r\n            console.error('Error downloading QR:', error);\r\n            alert('Failed to download QR code');\r\n        }\r\n    };\r\n\r\n    const generateAllPDF = async () => {\r\n        setIsGenerating(true);\r\n        try {\r\n            const doc = new jsPDF();\r\n            let x = 10;\r\n            let y = 10;\r\n            const size = 60; // QR code size in mm\r\n            const gap = 10;\r\n            const pageWidth = doc.internal.pageSize.getWidth();\r\n            const pageHeight = doc.internal.pageSize.getHeight();\r\n\r\n            doc.setFontSize(20);\r\n            doc.text(\"Oye Chatoro - Table QR Codes\", pageWidth / 2, 15, { align: \"center\" });\r\n            y += 20;\r\n\r\n            for (let i = 1; i <= tableCount; i++) {\r\n                const url = generateQRUrl(i);\r\n\r\n                // Fetch image to get base64\r\n                const response = await fetch(url);\r\n                const blob = await response.blob();\r\n                const base64 = await new Promise<string>((resolve) => {\r\n                    const reader = new FileReader();\r\n                    reader.onloadend = () => resolve(reader.result as string);\r\n                    reader.readAsDataURL(blob);\r\n                });\r\n\r\n                // Check if we need a new page\r\n                if (y + size + 10 > pageHeight) {\r\n                    doc.addPage();\r\n                    y = 20;\r\n                }\r\n\r\n                doc.addImage(base64, 'PNG', x, y, size, size);\r\n                doc.setFontSize(12);\r\n                doc.text(`Table ${i}`, x + size / 2, y + size + 5, { align: \"center\" });\r\n\r\n                // Move to next position\r\n                x += size + gap;\r\n                if (x + size > pageWidth) {\r\n                    x = 10;\r\n                    y += size + 15;\r\n                }\r\n            }\r\n\r\n            doc.save(\"OyeChatoro-All-Tables.pdf\");\r\n        } catch (error) {\r\n            console.error(\"Error generating PDF:\", error);\r\n            alert(\"Failed to generate PDF. Please try again.\");\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4\">\r\n            <div className=\"flex justify-between items-center mb-8 animate-in\">\r\n                <h1 className=\"text-3xl font-bold text-[var(--brand-dark)]\">Table Management</h1>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <span className=\"text-sm text-[var(--text-muted)]\">Total Tables:</span>\r\n                    <div className=\"flex items-center gap-2 bg-white rounded-lg border border-[var(--border-light)] p-1\">\r\n                        <button\r\n                            onClick={() => setTableCount(Math.max(1, tableCount - 1))}\r\n                            className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded font-bold\"\r\n                        >-</button>\r\n                        <span className=\"w-8 text-center font-bold\">{tableCount}</span>\r\n                        <button\r\n                            onClick={() => setTableCount(tableCount + 1)}\r\n                            className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded font-bold\"\r\n                        >+</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 animate-in\" style={{ animationDelay: '0.1s' }}>\r\n                {Array.from({ length: tableCount }).map((_, i) => {\r\n                    const tableNum = i + 1;\r\n                    return (\r\n                        <div key={tableNum} className=\"glass-card p-4 rounded-2xl flex flex-col items-center text-center hover:shadow-lg transition-all group\">\r\n                            <div className=\"w-12 h-12 rounded-full bg-[var(--brand-primary)]/10 text-[var(--brand-primary)] flex items-center justify-center font-bold text-xl mb-3 group-hover:bg-[var(--brand-primary)] group-hover:text-white transition-colors\">\r\n                                {tableNum}\r\n                            </div>\r\n                            <h3 className=\"font-bold text-[var(--text-main)] mb-2\">Table {tableNum}</h3>\r\n\r\n                            <div className=\"bg-white p-2 rounded-lg border border-[var(--border-light)] mb-3\">\r\n                                <img\r\n                                    src={generateQRUrl(tableNum)}\r\n                                    alt={`QR for Table ${tableNum}`}\r\n                                    className=\"w-24 h-24\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => downloadQR(tableNum)}\r\n                                className=\"text-xs font-bold text-[var(--brand-primary)] hover:underline flex items-center gap-1\"\r\n                            >\r\n                                <span>⬇️</span> Download QR\r\n                            </button>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <div className=\"mt-12 glass-card p-8 rounded-2xl text-center animate-in\" style={{ animationDelay: '0.2s' }}>\r\n                <h2 className=\"text-xl font-bold text-[var(--brand-dark)] mb-4\">Need to print all QR codes?</h2>\r\n                <p className=\"text-[var(--text-muted)] mb-6 max-w-md mx-auto\">Download a PDF containing all table QR codes formatted for printing stickers.</p>\r\n                <button\r\n                    className=\"btn btn-primary btn-glow\"\r\n                    onClick={generateAllPDF}\r\n                    disabled={isGenerating}\r\n                >\r\n                    {isGenerating ? 'Generating PDF...' : 'Generate PDF for All Tables'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}