(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65333,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(28519);function s(){let{orders:e,updateStatus:s}=(0,i.useOrders)(),[a,l]=(0,r.useState)("tickets"),[n,d]=(0,r.useState)(Date.now()),[o,c]=(0,r.useState)(!0),x=(0,r.useRef)(0);(0,r.useRef)(null);let m=e.filter(e=>"Pending"===e.status||"Cooking"===e.status).sort((e,t)=>e.id-t.id);(0,r.useEffect)(()=>{let e=setInterval(()=>d(Date.now()),1e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{m.length>x.current&&o&&(()=>{try{let e=window.AudioContext||window.webkitAudioContext;if(!e)return;let t=new e,r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.type="square",r.frequency.setValueAtTime(600,t.currentTime),r.frequency.exponentialRampToValueAtTime(300,t.currentTime+.5),i.gain.setValueAtTime(.3,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),r.start(),r.stop(t.currentTime+.5)}catch(e){console.error(e)}})(),x.current=m.length},[m.length,o]);let g=m.reduce((e,t)=>(t.items.forEach(t=>{e[t]=(e[t]||0)+1}),e),{});return(0,t.jsxs)("div",{className:"p-4 h-full flex flex-col min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 animate-in",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[var(--brand-dark)]",children:"ðŸ‘¨â€ðŸ³ Kitchen Display"}),(0,t.jsx)("p",{className:"text-[var(--text-muted)]",children:"Live Order Tracking"})]}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsxs)("div",{className:"bg-white p-1 rounded-xl border border-gray-200 flex",children:[(0,t.jsx)("button",{onClick:()=>l("tickets"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${"tickets"===a?"bg-[var(--brand-primary)] text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"ðŸŽ« Tickets"}),(0,t.jsx)("button",{onClick:()=>l("items"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${"items"===a?"bg-[var(--brand-primary)] text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"ðŸ” Items"})]}),(0,t.jsx)("button",{onClick:()=>c(!o),className:`p-3 rounded-xl border transition-colors ${o?"bg-white text-[var(--brand-primary)] border-[var(--brand-primary)]":"bg-gray-100 text-gray-400 border-gray-200"}`,children:o?"ðŸ””":"ðŸ”•"}),(0,t.jsxs)("div",{className:"bg-[var(--brand-dark)] text-white px-6 py-2 rounded-xl text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold leading-none",children:m.length}),(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wider opacity-80",children:"Pending"})]})]})]}),0===m.length?(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-[var(--text-muted)] animate-in",children:[(0,t.jsx)("div",{className:"text-8xl mb-6 opacity-20",children:"ðŸ‘¨â€ðŸ³"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-400",children:"All Caught Up!"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Kitchen is clear."})]}):(0,t.jsx)(t.Fragment,{children:"tickets"===a?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in",children:m.map(e=>{let r="Pending"===e.status?Math.floor((n-e.id)/6e4):"Cooking"===e.status&&e.cookingStartedAt?Math.floor((n-e.cookingStartedAt)/6e4):0,i=r<10?"bg-green-100 text-green-800 border-green-200":r<20?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200 animate-pulse";return(0,t.jsxs)("div",{className:`bg-white rounded-2xl shadow-sm border-2 flex flex-col overflow-hidden transition-all hover:shadow-md ${"Pending"===e.status?"border-yellow-400":"border-blue-500"}`,children:[(0,t.jsxs)("div",{className:`p-4 flex justify-between items-start border-b ${i}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsxs)("span",{className:"font-bold text-lg",children:["#",e.id.toString().slice(-4)]}),(0,t.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 bg-white/50 rounded",children:e.type})]}),(0,t.jsx)("div",{className:"text-xs font-mono opacity-80",children:e.time})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold leading-none",children:[r,"m"]}),(0,t.jsx)("div",{className:"text-[10px] uppercase font-bold opacity-80",children:"Cooking"===e.status?"Cooking":"Waiting"})]})]}),(0,t.jsx)("div",{className:"p-4 flex-1 space-y-3",children:e.items.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 text-lg font-bold text-gray-800",children:[(0,t.jsx)("span",{className:"mt-1.5 w-2 h-2 rounded-full bg-gray-300 shrink-0"}),(0,t.jsx)("span",{className:"leading-tight",children:e})]},r))}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{let t,r;return t=`
            <html>
            <head>
                <title>KOT #${e.id}</title>
                <style>
                    body { font-family: monospace; padding: 20px; max-width: 300px; }
                    .header { font-size: 20px; font-weight: bold; text-align: center; margin-bottom: 10px; }
                    .meta { font-size: 14px; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
                    .item { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
                </style>
            </head>
            <body>
                <div class="header">KITCHEN TICKET</div>
                <div class="meta">
                    #${e.id}<br>
                    ${e.time}<br>
                    ${e.type}
                </div>
                ${e.items.map(e=>`<div class="item">â–¡ ${e}</div>`).join("")}
                <script>window.print();</script>
            </body>
            </html>
        `,void((r=window.open("","","width=300,height=600"))&&(r.document.write(t),r.document.close()))},className:"p-3 bg-white border border-gray-200 rounded-xl text-gray-500 hover:bg-gray-100",title:"Print KOT",children:"ðŸ–¨ï¸"}),"Pending"===e.status?(0,t.jsx)("button",{onClick:()=>s(e.id,"Cooking"),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-200 transition-all",children:"Start Cooking"}):(0,t.jsx)("button",{onClick:()=>s(e.id,"Ready"),className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-200 transition-all",children:"Mark Ready"})]})]},e.id)})}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 animate-in",children:Object.entries(g).map(([e,r])=>(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center text-center hover:shadow-md transition-all",children:[(0,t.jsx)("div",{className:"text-5xl font-bold text-[var(--brand-primary)] mb-2",children:r}),(0,t.jsx)("div",{className:"text-lg font-bold text-gray-800 leading-tight",children:e}),(0,t.jsx)("div",{className:"mt-4 text-xs text-gray-400 uppercase tracking-wider font-bold",children:"To Prepare"})]},e))})})]})}e.s(["default",()=>s])}]);