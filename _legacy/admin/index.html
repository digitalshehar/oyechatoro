<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Menu Admin - Oye Chatoro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <!-- Login Form -->
    <div id="loginForm" class="login-form">
        <h1>Menu Admin Login</h1>
        <div class="form-group">
            <input type="password" id="adminPassword" placeholder="Enter admin password" />
        </div>
        <button onclick="login()">Login</button>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="container hidden">
        <header style="margin-bottom: 20px;">
            <h1 style="margin-bottom: 10px;">Menu Management</h1>
            <nav style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap;">
                <a href="../menu/" style="color: var(--primary); text-decoration: none;">‚Üê View Menu</a>
                <span id="itemCount" style="color: var(--text-muted);"></span>
                <div style="margin-left: auto; display: flex; gap: 10px; flex-wrap: wrap;">
                    <div class="dropdown">
                        <button class="dropbtn">
                            <span style="margin-right: 4px;">‚öôÔ∏è</span> Actions
                        </button>
                        <div class="dropdown-content">
                            <a href="#" onclick="downloadMenu()"><span>üì•</span> Export Menu</a>
                            <a href="#" onclick="document.getElementById('importInput').click()"><span>üì§</span> Import Menu</a>
                            <a href="#" onclick="backupMenu()"><span>üíæ</span> Backup Menu</a>
                            <a href="#" onclick="restoreMenu()"><span>üîÑ</span> Restore Backup</a>
                            <a href="#" onclick="toggleBulkEdit()"><span>üìù</span> Bulk Edit</a>
                            <a href="#" onclick="clearMenu()" class="text-danger"><span>üóëÔ∏è</span> Clear All</a>
                        </div>
                    </div>
                    <input type="file" id="importInput" accept=".json" style="display: none;" onchange="importMenu(event)">
                </div>
            </nav>
        </header>
        
        <!-- Bulk Edit Panel -->
        <div id="bulkEditPanel" class="bulk-edit-panel hidden">
            <h3>Bulk Edit</h3>
            <div class="bulk-actions">
                <select id="bulkAction">
                    <option value="">Select Action...</option>
                    <option value="category">Change Category</option>
                    <option value="price">Update Price</option>
                    <option value="veg">Set as Veg</option>
                    <option value="bestseller">Toggle Bestseller</option>
                    <option value="delete">Delete Selected</option>
                </select>
                <div id="bulkActionValue" class="hidden">
                    <!-- Dynamic inputs will be inserted here -->
                </div>
                <button onclick="applyBulkAction()" class="btn-primary">Apply</button>
                <button onclick="toggleBulkEdit()" class="btn-secondary">Cancel</button>
            </div>
        </div>

        <!-- Advanced Search and Filters -->
        <div class="filter-panel">
            <div class="search-section">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchBox" placeholder="Search items by name, description, or category...">
                </div>
            </div>

            <div class="advanced-search">
                <div class="filter-group">
                    <label>Price Range</label>
                    <div class="price-range">
                        <input type="number" id="minPrice" placeholder="Min" min="0">
                        <span>to</span>
                        <input type="number" id="maxPrice" placeholder="Max" min="0">
                    </div>
                </div>
                
                <div class="filter-group">
                    <label>Categories</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" class="category-checkbox" value="starters"> Starters</label>
                        <label><input type="checkbox" class="category-checkbox" value="chaat"> Chaat & Snacks</label>
                        <label><input type="checkbox" class="category-checkbox" value="pizza"> Pizza</label>
                        <label><input type="checkbox" class="category-checkbox" value="pasta"> Pasta</label>
                        <label><input type="checkbox" class="category-checkbox" value="sandwich"> Sandwiches & Burgers</label>
                        <label><input type="checkbox" class="category-checkbox" value="chinese"> Chinese</label>
                        <label><input type="checkbox" class="category-checkbox" value="southindian"> South Indian</label>
                        <label><input type="checkbox" class="category-checkbox" value="thali"> Special Thali</label>
                        <label><input type="checkbox" class="category-checkbox" value="desserts"> Desserts</label>
                        <label><input type="checkbox" class="category-checkbox" value="beverages"> Beverages</label>
                    </div>
                </div>
                
                <div class="filter-group">
                    <label>Item Type</label>
                    <select id="typeFilter">
                        <option value="">All Items</option>
                        <option value="veg">Veg Only</option>
                        <option value="bestseller">Bestsellers</option>
                    </select>
                </div>
            </div>

            <div class="sort-section">
                <select id="sortSelect">
                    <option value="name-asc">Name (A to Z)</option>
                    <option value="name-desc">Name (Z to A)</option>
                    <option value="price-asc">Price (Low to High)</option>
                    <option value="price-desc">Price (High to Low)</option>
                    <option value="category">Category</option>
                </select>
                <button type="button" id="resetFilters" class="reset-btn">
                    <span>‚Ü∫</span> Reset Filters
                </button>
            </div>
        </div>

        <!-- Active Filters Display -->
        <div class="active-filters"></div>
        
        <div class="stats-bar" style="display: flex; gap: 20px; margin-bottom: 20px;">
            <div class="stat-card" style="background: #f8fafc; padding: 15px; border-radius: 8px; flex: 1;">
                <div style="font-size: 0.9rem; color: var(--text-muted);">Total Items</div>
                <div id="totalItems" style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">0</div>
            </div>
            <div class="stat-card" style="background: #f8fafc; padding: 15px; border-radius: 8px; flex: 1;">
                <div style="font-size: 0.9rem; color: var(--text-muted);">Veg Items</div>
                <div id="vegItems" style="font-size: 1.5rem; font-weight: 700; color: #059669;">0</div>
            </div>
            <div class="stat-card" style="background: #f8fafc; padding: 15px; border-radius: 8px; flex: 1;">
                <div style="font-size: 0.9rem; color: var(--text-muted);">Categories</div>
                <div id="categoryCount" style="font-size: 1.5rem; font-weight: 700; color: #0ea5e9;">0</div>
            </div>
        </div>
        
        <!-- Add/Edit Form -->
        <form id="menuForm" onsubmit="saveMenuItem(event)">
            <input type="hidden" id="editItemId">
            <div class="form-group">
                <label>Item Name</label>
                <input type="text" id="itemName" required>
            </div>
            <div class="form-group">
                <label>Category</label>
                <select id="itemCategory" required>
                    <option value="starters">Starters</option>
                    <option value="chaat">Chaat & Snacks</option>
                    <option value="pizza">Pizza</option>
                    <option value="pasta">Pasta</option>
                    <option value="sandwich">Sandwiches & Burgers</option>
                    <option value="chinese">Chinese</option>
                    <option value="southindian">South Indian</option>
                    <option value="thali">Special Thali</option>
                    <option value="desserts">Desserts</option>
                    <option value="beverages">Beverages</option>
                </select>
            </div>
            <div class="form-group">
                <label>Price (‚Çπ)</label>
                <input type="number" id="itemPrice" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="itemDescription" required></textarea>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="itemVeg"> Veg
                </label>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="itemBestseller"> Bestseller
                </label>
            </div>
            <button type="submit" id="saveButton">Add Item</button>
        </form>

        <!-- Menu Items List -->
        <div class="menu-items" id="menuItemsList"></div>
    </div>

    <script>
        const ADMIN_PASSWORD = '123456'; // Change this to your desired password
    </script>
    <script src="script.js"></script>
            {
                id: 'combo1',
                name: 'Family Feast',
                category: 'combo',
                price: 999,
                description: '2 Pizzas + 1 Pasta + Garlic Bread + 2 Drinks',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'pizza1',
                name: 'Paneer Tikka Pizza',
                category: 'pizza',
                price: 299,
                description: 'Spicy paneer tikka, onions, capsicum on cheese base',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'chaat1',
                name: 'Dahi Papdi Chaat',
                category: 'chaat',
                price: 89,
                description: 'Crispy papdis with yogurt, chutneys & sev',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'pasta1',
                name: 'Arrabiata Pasta',
                category: 'pasta',
                price: 199,
                description: 'Spicy tomato sauce with herbs and parmesan',
                isVeg: true,
                isBestseller: false
            },
            {
                id: 'chinese1',
                name: 'Veg Manchurian',
                category: 'chinese',
                price: 179,
                description: 'Crispy veg balls in spicy gravy',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'thali1',
                name: 'Deluxe Thali',
                category: 'thali',
                price: 249,
                description: '3 Rotis, 2 Sabzi, Dal, Rice, Salad & Sweet',
                isVeg: true,
                isBestseller: false
            },
            {
                id: 'dessert1',
                name: 'Sizzling Brownie',
                category: 'desserts',
                price: 159,
                description: 'Hot chocolate brownie with ice cream',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'beverage1',
                name: 'Cold Coffee',
                category: 'beverages',
                price: 99,
                description: 'Creamy cold coffee with ice cream',
                isVeg: true,
                isBestseller: false
            }
            // Special Combos & Offers
            {
                id: 'combo1',
                name: 'Family Feast Combo',
                category: 'combo',
                price: 999,
                description: '2 Medium Pizzas + 1 Pasta + 2 Cold Drinks + 1 Dessert',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'combo2',
                name: 'Student Special',
                category: 'combo',
                price: 199,
                description: '1 Burger + French Fries + Cold Drink',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'combo3',
                name: 'Chaat Party Pack',
                category: 'combo',
                price: 399,
                description: 'Pani Puri + Bhel + Dahi Papdi + 2 Cold Drinks',
                isVeg: true,
                isBestseller: false
            },
            // Seasonal Specials
            {
                id: 'seasonal1',
                name: 'Winter Special Hot Chocolate',
                category: 'seasonal',
                price: 129,
                description: 'Rich hot chocolate with marshmallows and cream. Available in winter only.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'seasonal2',
                name: 'Summer Cooler Combo',
                category: 'seasonal',
                price: 169,
                description: 'Mango lassi + Ice cream. Perfect for summer!',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'seasonal3',
                name: 'Monsoon Magic Pakoda Platter',
                category: 'seasonal',
                price: 199,
                description: 'Mix veg pakoda + Paneer pakoda + Masala chai. Monsoon special!',
                isVeg: true,
                isBestseller: true
            },

            // Starters
            {
                id: 's3',
                name: 'Veg Spring Roll',
                category: 'starters',
                price: 139,
                description: 'Crispy rolls filled with vegetables and noodles.',
                isVeg: true,
                isBestseller: false
            },
            {
                id: 's4',
                name: 'Paneer Tikka',
                category: 'starters',
                price: 199,
                description: 'Marinated and grilled paneer with onions and capsicum.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 's1',
                name: 'Paneer 65',
                category: 'starters',
                price: 179,
                description: 'Spicy marinated paneer, deep fried with curry leaves and chilies.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 's2',
                name: 'Crispy Corn',
                category: 'starters',
                price: 149,
                description: 'Golden fried sweet corn tossed in spicy seasoning.',
                isVeg: true,
                isBestseller: false
            },
            
            // Chaat & Snacks
            {
                id: 'c1',
                name: 'Dahi Papdi Chaat',
                category: 'chaat',
                price: 89,
                description: 'Crispy papdi with creamy yogurt, mint & tamarind chutneys.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'c2',
                name: 'Pani Puri (6 pcs)',
                category: 'chaat',
                price: 49,
                description: 'Crispy puris with spicy mint water and potato filling.',
                isVeg: true,
                isBestseller: true
            },
            
            // Pizza
            {
                id: 'p3',
                name: 'Mushroom Overload',
                category: 'pizza',
                price: 279,
                description: 'Button mushrooms, herbs, extra cheese and truffle oil.',
                isVeg: true,
                isBestseller: false
            },
            {
                id: 'p4',
                name: 'Mexican Fiesta',
                category: 'pizza',
                price: 299,
                description: 'Jalapenos, corn, beans, nachos and Mexican sauce.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'p1',
                name: 'Classic Margherita',
                category: 'pizza',
                price: 199,
                description: 'Fresh tomato, basil, mozzarella on hand‚Äëtossed base.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'p2',
                name: 'Tandoori Paneer Pizza',
                category: 'pizza',
                price: 299,
                description: 'Spicy tandoori paneer with onions and capsicum.',
                isVeg: true,
                isBestseller: true
            },
            
            // Pasta
            {
                id: 'pa1',
                name: 'Alfredo Pasta',
                category: 'pasta',
                price: 199,
                description: 'Creamy white sauce pasta with herbs and parmesan.',
                isVeg: true,
                isBestseller: false
            },
            {
                id: 'pa2',
                name: 'Arrabbiata Pasta',
                category: 'pasta',
                price: 189,
                description: 'Spicy tomato sauce pasta with Italian herbs.',
                isVeg: true,
                isBestseller: true
            },
            
            // Sandwiches & Burgers
            {
                id: 'sb1',
                name: 'Grilled Paneer Sandwich',
                category: 'sandwich',
                price: 129,
                description: 'Grilled sandwich with spicy paneer and vegetables.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'sb2',
                name: 'Cheese Burger',
                category: 'sandwich',
                price: 149,
                description: 'Veg patty with cheese slice, lettuce and special sauce.',
                isVeg: true,
                isBestseller: false
            },
            
            // Chinese
            {
                id: 'ch1',
                name: 'Veg Manchurian',
                category: 'chinese',
                price: 169,
                description: 'Mixed vegetable balls in spicy manchurian sauce.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'ch2',
                name: 'Hakka Noodles',
                category: 'chinese',
                price: 149,
                description: 'Wok tossed noodles with vegetables and soy sauce.',
                isVeg: true,
                isBestseller: false
            },
            
            // South Indian
            {
                id: 'si1',
                name: 'Masala Dosa',
                category: 'southindian',
                price: 129,
                description: 'Crispy dosa with potato masala and chutneys.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'si2',
                name: 'Idli Sambar (2 pcs)',
                category: 'southindian',
                price: 79,
                description: 'Soft idlis with sambar and coconut chutney.',
                isVeg: true,
                isBestseller: false
            },
            
            // Special Thali
            {
                id: 't1',
                name: 'Deluxe Thali',
                category: 'thali',
                price: 249,
                description: '2 Rotis, Dal, Rice, 2 Sabzi, Raita, Papad, Sweet',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 't2',
                name: 'Gujarati Thali',
                category: 'thali',
                price: 229,
                description: 'Traditional Gujarati thali with khichdi and kadhi',
                isVeg: true,
                isBestseller: false
            },
            
            // Desserts
            {
                id: 'd1',
                name: 'Gulab Jamun (2 pcs)',
                category: 'desserts',
                price: 49,
                description: 'Soft and sweet milk dumplings in sugar syrup.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'd2',
                name: 'Chocolate Brownie',
                category: 'desserts',
                price: 89,
                description: 'Warm chocolate brownie with vanilla ice cream.',
                isVeg: true,
                isBestseller: false
            },
            
            // Beverages
            {
                id: 'b1',
                name: 'Masala Chai',
                category: 'beverages',
                price: 30,
                description: 'Indian spiced tea with milk.',
                isVeg: true,
                isBestseller: true
            },
            {
                id: 'b2',
                name: 'Cold Coffee',
                category: 'beverages',
                price: 89,
                description: 'Creamy cold coffee with ice cream.',
                isVeg: true,
                isBestseller: true
            }
        ];

        function login() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('loginForm').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                displayMenuItems();
            } else {
                alert('Invalid password');
            }
        }

        function displayMenuItems() {
            const container = document.getElementById('menuItemsList');
            container.innerHTML = menuItems.map(item => `
                <div class="menu-item">
                    <div class="menu-item-details">
                        <strong>${item.name}</strong> - ‚Çπ${item.price}<br>
                        ${item.description}<br>
                        <small>
                            Category: ${item.category} | 
                            ${item.isVeg ? 'üå± Veg' : 'üçñ Non-veg'} |
                            ${item.isBestseller ? '‚≠ê Bestseller' : ''}
                        </small>
                    </div>
                    <div class="menu-item-actions">
                        <button onclick="editItem('${item.id}')" class="btn-edit">Edit</button>
                        <button onclick="deleteItem('${item.id}')" class="btn-delete">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function saveMenuItem(event) {
            event.preventDefault();
            
            const editItemId = document.getElementById('editItemId').value;
            const item = {
                id: editItemId || Date.now().toString(),
                name: document.getElementById('itemName').value,
                category: document.getElementById('itemCategory').value,
                price: parseInt(document.getElementById('itemPrice').value),
                description: document.getElementById('itemDescription').value,
                isVeg: document.getElementById('itemVeg').checked,
                isBestseller: document.getElementById('itemBestseller').checked
            };

            if (editItemId) {
                // Update existing item
                const index = menuItems.findIndex(i => i.id === editItemId);
                if (index !== -1) {
                    menuItems[index] = item;
                }
            } else {
                // Add new item
                menuItems.push(item);
            }

            // Save to localStorage
            localStorage.setItem('oye_chatoro_menu', JSON.stringify(menuItems));
            
            // Reset form
            document.getElementById('menuForm').reset();
            document.getElementById('editItemId').value = '';
            document.getElementById('saveButton').textContent = 'Add Item';
            
            // Refresh display
            displayMenuItems();
        }

        function editItem(id) {
            const item = menuItems.find(i => i.id === id);
            if (item) {
                document.getElementById('editItemId').value = item.id;
                document.getElementById('itemName').value = item.name;
                document.getElementById('itemCategory').value = item.category;
                document.getElementById('itemPrice').value = item.price;
                document.getElementById('itemDescription').value = item.description;
                document.getElementById('itemVeg').checked = item.isVeg;
                document.getElementById('itemBestseller').checked = item.isBestseller;
                document.getElementById('saveButton').textContent = 'Update Item';
            }
        }

        function deleteItem(id) {
            if (confirm('Are you sure you want to delete this item?')) {
                menuItems = menuItems.filter(item => item.id !== id);
                localStorage.setItem('oye_chatoro_menu', JSON.stringify(menuItems));
                displayMenuItems();
            }
        }

        // Update the menu page when items change
        function updatePublicMenu() {
            localStorage.setItem('publicMenu', JSON.stringify(menuItems));
        }
    </script>
</body>
</html>